(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function df(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var md={exports:{}},Pa={},pd={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs=Symbol.for("react.element"),uf=Symbol.for("react.portal"),hf=Symbol.for("react.fragment"),ff=Symbol.for("react.strict_mode"),mf=Symbol.for("react.profiler"),pf=Symbol.for("react.provider"),gf=Symbol.for("react.context"),xf=Symbol.for("react.forward_ref"),yf=Symbol.for("react.suspense"),vf=Symbol.for("react.memo"),wf=Symbol.for("react.lazy"),Fl=Symbol.iterator;function bf(t){return t===null||typeof t!="object"?null:(t=Fl&&t[Fl]||t["@@iterator"],typeof t=="function"?t:null)}var gd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xd=Object.assign,yd={};function cn(t,e,r){this.props=t,this.context=e,this.refs=yd,this.updater=r||gd}cn.prototype.isReactComponent={};cn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vd(){}vd.prototype=cn.prototype;function Fo(t,e,r){this.props=t,this.context=e,this.refs=yd,this.updater=r||gd}var zo=Fo.prototype=new vd;zo.constructor=Fo;xd(zo,cn.prototype);zo.isPureReactComponent=!0;var zl=Array.isArray,wd=Object.prototype.hasOwnProperty,Uo={current:null},bd={key:!0,ref:!0,__self:!0,__source:!0};function jd(t,e,r){var n,a={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wd.call(e,n)&&!bd.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:gs,type:t,key:i,ref:o,props:a,_owner:Uo.current}}function jf(t,e){return{$$typeof:gs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bo(t){return typeof t=="object"&&t!==null&&t.$$typeof===gs}function Nf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ul=/\/+/g;function Xa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nf(""+t.key):e.toString(36)}function Hs(t,e,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gs:case uf:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+Xa(o,0):n,zl(a)?(r="",t!=null&&(r=t.replace(Ul,"$&/")+"/"),Hs(a,e,r,"",function(d){return d})):a!=null&&(Bo(a)&&(a=jf(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Ul,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",zl(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Xa(i,l);o+=Hs(i,e,r,c,a)}else if(c=bf(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Xa(i,l++),o+=Hs(i,e,r,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _s(t,e,r){if(t==null)return t;var n=[],a=0;return Hs(t,n,"","",function(i){return e.call(r,i,a++)}),n}function _f(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Se={current:null},Ws={transition:null},kf={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:Ws,ReactCurrentOwner:Uo};function Nd(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:_s,forEach:function(t,e,r){_s(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return _s(t,function(){e++}),e},toArray:function(t){return _s(t,function(e){return e})||[]},only:function(t){if(!Bo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=cn;H.Fragment=hf;H.Profiler=mf;H.PureComponent=Fo;H.StrictMode=ff;H.Suspense=yf;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kf;H.act=Nd;H.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=xd({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Uo.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)wd.call(e,c)&&!bd.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:gs,type:t.type,key:a,ref:i,props:n,_owner:o}};H.createContext=function(t){return t={$$typeof:gf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pf,_context:t},t.Consumer=t};H.createElement=jd;H.createFactory=function(t){var e=jd.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:xf,render:t}};H.isValidElement=Bo;H.lazy=function(t){return{$$typeof:wf,_payload:{_status:-1,_result:t},_init:_f}};H.memo=function(t,e){return{$$typeof:vf,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=Ws.transition;Ws.transition={};try{t()}finally{Ws.transition=e}};H.unstable_act=Nd;H.useCallback=function(t,e){return Se.current.useCallback(t,e)};H.useContext=function(t){return Se.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Se.current.useDeferredValue(t)};H.useEffect=function(t,e){return Se.current.useEffect(t,e)};H.useId=function(){return Se.current.useId()};H.useImperativeHandle=function(t,e,r){return Se.current.useImperativeHandle(t,e,r)};H.useInsertionEffect=function(t,e){return Se.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Se.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Se.current.useMemo(t,e)};H.useReducer=function(t,e,r){return Se.current.useReducer(t,e,r)};H.useRef=function(t){return Se.current.useRef(t)};H.useState=function(t){return Se.current.useState(t)};H.useSyncExternalStore=function(t,e,r){return Se.current.useSyncExternalStore(t,e,r)};H.useTransition=function(){return Se.current.useTransition()};H.version="18.3.1";pd.exports=H;var T=pd.exports;const Sf=cf(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=T,Cf=Symbol.for("react.element"),Pf=Symbol.for("react.fragment"),Tf=Object.prototype.hasOwnProperty,Of=Ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Af={key:!0,ref:!0,__self:!0,__source:!0};function _d(t,e,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Tf.call(e,n)&&!Af.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Cf,type:t,key:i,ref:o,props:a,_owner:Of.current}}Pa.Fragment=Pf;Pa.jsx=_d;Pa.jsxs=_d;md.exports=Pa;var s=md.exports,kd={exports:{}},ze={},Sd={exports:{}},Ed={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,M){var z=$.length;$.push(M);e:for(;0<z;){var ee=z-1>>>1,oe=$[ee];if(0<a(oe,M))$[ee]=M,$[z]=oe,z=ee;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var M=$[0],z=$.pop();if(z!==M){$[0]=z;e:for(var ee=0,oe=$.length,kr=oe>>>1;ee<kr;){var it=2*(ee+1)-1,gn=$[it],mt=it+1,Sr=$[mt];if(0>a(gn,z))mt<oe&&0>a(Sr,gn)?($[ee]=Sr,$[mt]=z,ee=mt):($[ee]=gn,$[it]=z,ee=it);else if(mt<oe&&0>a(Sr,z))$[ee]=Sr,$[mt]=z,ee=mt;else break e}}return M}function a($,M){var z=$.sortIndex-M.sortIndex;return z!==0?z:$.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,x=!1,v=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f($){for(var M=r(d);M!==null;){if(M.callback===null)n(d);else if(M.startTime<=$)n(d),M.sortIndex=M.expirationTime,e(c,M);else break;M=r(d)}}function g($){if(b=!1,f($),!v)if(r(c)!==null)v=!0,A(k);else{var M=r(d);M!==null&&I(g,M.startTime-$)}}function k($,M){v=!1,b&&(b=!1,y(E),E=-1),x=!0;var z=m;try{for(f(M),h=r(c);h!==null&&(!(h.expirationTime>M)||$&&!R());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,m=h.priorityLevel;var oe=ee(h.expirationTime<=M);M=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===r(c)&&n(c),f(M)}else n(c);h=r(c)}if(h!==null)var kr=!0;else{var it=r(d);it!==null&&I(g,it.startTime-M),kr=!1}return kr}finally{h=null,m=z,x=!1}}var S=!1,j=null,E=-1,D=5,N=-1;function R(){return!(t.unstable_now()-N<D)}function V(){if(j!==null){var $=t.unstable_now();N=$;var M=!0;try{M=j(!0,$)}finally{M?K():(S=!1,j=null)}}else S=!1}var K;if(typeof p=="function")K=function(){p(V)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,w=_.port2;_.port1.onmessage=V,K=function(){w.postMessage(null)}}else K=function(){C(V,0)};function A($){j=$,S||(S=!0,K())}function I($,M){E=C(function(){$(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){v||x||(v=!0,A(k))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var M=3;break;default:M=m}var z=m;m=M;try{return $()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,M){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=m;m=$;try{return M()}finally{m=z}},t.unstable_scheduleCallback=function($,M,z){var ee=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ee+z:ee):z=ee,$){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=z+oe,$={id:u++,callback:M,priorityLevel:$,startTime:z,expirationTime:oe,sortIndex:-1},z>ee?($.sortIndex=z,e(d,$),r(c)===null&&$===r(d)&&(b?(y(E),E=-1):b=!0,I(g,z-ee))):($.sortIndex=oe,e(c,$),v||x||(v=!0,A(k))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var M=m;return function(){var z=m;m=M;try{return $.apply(this,arguments)}finally{m=z}}}})(Ed);Sd.exports=Ed;var If=Sd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=T,Fe=If;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cd=new Set,Qn={};function br(t,e){en(t,e),en(t+"Capture",e)}function en(t,e){for(Qn[t]=e,t=0;t<e.length;t++)Cd.add(e[t])}var _t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ii=Object.prototype.hasOwnProperty,Df=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bl={},Vl={};function Lf(t){return Ii.call(Vl,t)?!0:Ii.call(Bl,t)?!1:Df.test(t)?Vl[t]=!0:(Bl[t]=!0,!1)}function Rf(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mf(t,e,r,n){if(e===null||typeof e>"u"||Rf(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ee(t,e,r,n,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new Ee(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new Ee(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new Ee(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new Ee(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new Ee(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new Ee(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xe[t]=new Ee(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xe[t]=new Ee(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xe[t]=new Ee(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vo=/[\-:]([a-z])/g;function qo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vo,qo);xe[e]=new Ee(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vo,qo);xe[e]=new Ee(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vo,qo);xe[e]=new Ee(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new Ee(t,1,!1,t.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xe[t]=new Ee(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ho(t,e,r,n){var a=xe.hasOwnProperty(e)?xe[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mf(e,r,a,n)&&(r=null),n||a===null?Lf(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ct=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ks=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),Rr=Symbol.for("react.fragment"),Wo=Symbol.for("react.strict_mode"),$i=Symbol.for("react.profiler"),Pd=Symbol.for("react.provider"),Td=Symbol.for("react.context"),Go=Symbol.for("react.forward_ref"),Di=Symbol.for("react.suspense"),Li=Symbol.for("react.suspense_list"),Ko=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Od=Symbol.for("react.offscreen"),ql=Symbol.iterator;function yn(t){return t===null||typeof t!="object"?null:(t=ql&&t[ql]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,ei;function En(t){if(ei===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ei=e&&e[1]||""}return`
`+ei+t}var ti=!1;function ri(t,e){if(!t||ti)return"";ti=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{ti=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?En(t):""}function Ff(t){switch(t.tag){case 5:return En(t.type);case 16:return En("Lazy");case 13:return En("Suspense");case 19:return En("SuspenseList");case 0:case 2:case 15:return t=ri(t.type,!1),t;case 11:return t=ri(t.type.render,!1),t;case 1:return t=ri(t.type,!0),t;default:return""}}function Ri(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rr:return"Fragment";case Lr:return"Portal";case $i:return"Profiler";case Wo:return"StrictMode";case Di:return"Suspense";case Li:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Td:return(t.displayName||"Context")+".Consumer";case Pd:return(t._context.displayName||"Context")+".Provider";case Go:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ko:return e=t.displayName||null,e!==null?e:Ri(t.type)||"Memo";case At:e=t._payload,t=t._init;try{return Ri(t(e))}catch{}}return null}function zf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ri(e);case 8:return e===Wo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ad(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Uf(t){var e=Ad(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ss(t){t._valueTracker||(t._valueTracker=Uf(t))}function Id(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Ad(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mi(t,e){var r=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Hl(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Kt(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $d(t,e){e=e.checked,e!=null&&Ho(t,"checked",e,!1)}function Fi(t,e){$d(t,e);var r=Kt(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zi(t,e.type,r):e.hasOwnProperty("defaultValue")&&zi(t,e.type,Kt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wl(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zi(t,e,r){(e!=="number"||na(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Cn=Array.isArray;function Kr(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Kt(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Ui(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gl(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(O(92));if(Cn(r)){if(1<r.length)throw Error(O(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Kt(r)}}function Dd(t,e){var r=Kt(e.value),n=Kt(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Kl(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ld(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bi(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ld(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Es,Rd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Es=Es||document.createElement("div"),Es.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Es.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bf=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(t){Bf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),In[e]=In[t]})});function Md(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||In.hasOwnProperty(t)&&In[t]?(""+e).trim():e+"px"}function Fd(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Md(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Vf=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vi(t,e){if(e){if(Vf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function qi(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function Qo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wi=null,Qr=null,Jr=null;function Ql(t){if(t=vs(t)){if(typeof Wi!="function")throw Error(O(280));var e=t.stateNode;e&&(e=$a(e),Wi(t.stateNode,t.type,e))}}function zd(t){Qr?Jr?Jr.push(t):Jr=[t]:Qr=t}function Ud(){if(Qr){var t=Qr,e=Jr;if(Jr=Qr=null,Ql(t),e)for(t=0;t<e.length;t++)Ql(e[t])}}function Bd(t,e){return t(e)}function Vd(){}var ni=!1;function qd(t,e,r){if(ni)return t(e,r);ni=!0;try{return Bd(t,e,r)}finally{ni=!1,(Qr!==null||Jr!==null)&&(Vd(),Ud())}}function Yn(t,e){var r=t.stateNode;if(r===null)return null;var n=$a(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(O(231,e,typeof r));return r}var Gi=!1;if(_t)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{Gi=!1}function qf(t,e,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var $n=!1,sa=null,aa=!1,Ki=null,Hf={onError:function(t){$n=!0,sa=t}};function Wf(t,e,r,n,a,i,o,l,c){$n=!1,sa=null,qf.apply(Hf,arguments)}function Gf(t,e,r,n,a,i,o,l,c){if(Wf.apply(this,arguments),$n){if($n){var d=sa;$n=!1,sa=null}else throw Error(O(198));aa||(aa=!0,Ki=d)}}function jr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Hd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jl(t){if(jr(t)!==t)throw Error(O(188))}function Kf(t){var e=t.alternate;if(!e){if(e=jr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Jl(a),t;if(i===n)return Jl(a),e;i=i.sibling}throw Error(O(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(O(189))}}if(r.alternate!==n)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?t:e}function Wd(t){return t=Kf(t),t!==null?Gd(t):null}function Gd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gd(t);if(e!==null)return e;t=t.sibling}return null}var Kd=Fe.unstable_scheduleCallback,Yl=Fe.unstable_cancelCallback,Qf=Fe.unstable_shouldYield,Jf=Fe.unstable_requestPaint,ae=Fe.unstable_now,Yf=Fe.unstable_getCurrentPriorityLevel,Jo=Fe.unstable_ImmediatePriority,Qd=Fe.unstable_UserBlockingPriority,ia=Fe.unstable_NormalPriority,Zf=Fe.unstable_LowPriority,Jd=Fe.unstable_IdlePriority,Ta=null,ht=null;function Xf(t){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Ta,t,void 0,(t.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:rm,em=Math.log,tm=Math.LN2;function rm(t){return t>>>=0,t===0?32:31-(em(t)/tm|0)|0}var Cs=64,Ps=4194304;function Pn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oa(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Pn(l):(i&=o,i!==0&&(n=Pn(i)))}else o=r&~a,o!==0?n=Pn(o):i!==0&&(n=Pn(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-nt(e),a=1<<r,n|=t[r],e&=~a;return n}function nm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sm(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nt(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=nm(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Qi(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yd(){var t=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),t}function si(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function xs(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nt(e),t[e]=r}function am(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-nt(r),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function Yo(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-nt(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var G=0;function Zd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xd,Zo,eu,tu,ru,Ji=!1,Ts=[],Ft=null,zt=null,Ut=null,Zn=new Map,Xn=new Map,$t=[],im="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zl(t,e){switch(t){case"focusin":case"focusout":Ft=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Zn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(e.pointerId)}}function wn(t,e,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=vs(e),e!==null&&Zo(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function om(t,e,r,n,a){switch(e){case"focusin":return Ft=wn(Ft,t,e,r,n,a),!0;case"dragenter":return zt=wn(zt,t,e,r,n,a),!0;case"mouseover":return Ut=wn(Ut,t,e,r,n,a),!0;case"pointerover":var i=a.pointerId;return Zn.set(i,wn(Zn.get(i)||null,t,e,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Xn.set(i,wn(Xn.get(i)||null,t,e,r,n,a)),!0}return!1}function nu(t){var e=lr(t.target);if(e!==null){var r=jr(e);if(r!==null){if(e=r.tag,e===13){if(e=Hd(r),e!==null){t.blockedOn=e,ru(t.priority,function(){eu(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Yi(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Hi=n,r.target.dispatchEvent(n),Hi=null}else return e=vs(r),e!==null&&Zo(e),t.blockedOn=r,!1;e.shift()}return!0}function Xl(t,e,r){Gs(t)&&r.delete(e)}function lm(){Ji=!1,Ft!==null&&Gs(Ft)&&(Ft=null),zt!==null&&Gs(zt)&&(zt=null),Ut!==null&&Gs(Ut)&&(Ut=null),Zn.forEach(Xl),Xn.forEach(Xl)}function bn(t,e){t.blockedOn===e&&(t.blockedOn=null,Ji||(Ji=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,lm)))}function es(t){function e(a){return bn(a,t)}if(0<Ts.length){bn(Ts[0],t);for(var r=1;r<Ts.length;r++){var n=Ts[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ft!==null&&bn(Ft,t),zt!==null&&bn(zt,t),Ut!==null&&bn(Ut,t),Zn.forEach(e),Xn.forEach(e),r=0;r<$t.length;r++)n=$t[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<$t.length&&(r=$t[0],r.blockedOn===null);)nu(r),r.blockedOn===null&&$t.shift()}var Yr=Ct.ReactCurrentBatchConfig,la=!0;function cm(t,e,r,n){var a=G,i=Yr.transition;Yr.transition=null;try{G=1,Xo(t,e,r,n)}finally{G=a,Yr.transition=i}}function dm(t,e,r,n){var a=G,i=Yr.transition;Yr.transition=null;try{G=4,Xo(t,e,r,n)}finally{G=a,Yr.transition=i}}function Xo(t,e,r,n){if(la){var a=Yi(t,e,r,n);if(a===null)mi(t,e,n,ca,r),Zl(t,n);else if(om(a,t,e,r,n))n.stopPropagation();else if(Zl(t,n),e&4&&-1<im.indexOf(t)){for(;a!==null;){var i=vs(a);if(i!==null&&Xd(i),i=Yi(t,e,r,n),i===null&&mi(t,e,n,ca,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else mi(t,e,n,null,r)}}var ca=null;function Yi(t,e,r,n){if(ca=null,t=Qo(n),t=lr(t),t!==null)if(e=jr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Hd(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ca=t,null}function su(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yf()){case Jo:return 1;case Qd:return 4;case ia:case Zf:return 16;case Jd:return 536870912;default:return 16}default:return 16}}var Rt=null,el=null,Ks=null;function au(){if(Ks)return Ks;var t,e=el,r=e.length,n,a="value"in Rt?Rt.value:Rt.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[i-n];n++);return Ks=a.slice(t,1<n?1-n:void 0)}function Qs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Os(){return!0}function ec(){return!1}function Ue(t){function e(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Os:ec,this.isPropagationStopped=ec,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),e}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Ue(dn),ys=ne({},dn,{view:0,detail:0}),um=Ue(ys),ai,ii,jn,Oa=ne({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jn&&(jn&&t.type==="mousemove"?(ai=t.screenX-jn.screenX,ii=t.screenY-jn.screenY):ii=ai=0,jn=t),ai)},movementY:function(t){return"movementY"in t?t.movementY:ii}}),tc=Ue(Oa),hm=ne({},Oa,{dataTransfer:0}),fm=Ue(hm),mm=ne({},ys,{relatedTarget:0}),oi=Ue(mm),pm=ne({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),gm=Ue(pm),xm=ne({},dn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ym=Ue(xm),vm=ne({},dn,{data:0}),rc=Ue(vm),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jm[t])?!!e[t]:!1}function rl(){return Nm}var _m=ne({},ys,{key:function(t){if(t.key){var e=wm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rl,charCode:function(t){return t.type==="keypress"?Qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),km=Ue(_m),Sm=ne({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=Ue(Sm),Em=ne({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rl}),Cm=Ue(Em),Pm=ne({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tm=Ue(Pm),Om=ne({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Am=Ue(Om),Im=[9,13,27,32],nl=_t&&"CompositionEvent"in window,Dn=null;_t&&"documentMode"in document&&(Dn=document.documentMode);var $m=_t&&"TextEvent"in window&&!Dn,iu=_t&&(!nl||Dn&&8<Dn&&11>=Dn),sc=" ",ac=!1;function ou(t,e){switch(t){case"keyup":return Im.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mr=!1;function Dm(t,e){switch(t){case"compositionend":return lu(e);case"keypress":return e.which!==32?null:(ac=!0,sc);case"textInput":return t=e.data,t===sc&&ac?null:t;default:return null}}function Lm(t,e){if(Mr)return t==="compositionend"||!nl&&ou(t,e)?(t=au(),Ks=el=Rt=null,Mr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iu&&e.locale!=="ko"?null:e.data;default:return null}}var Rm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ic(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Rm[t.type]:e==="textarea"}function cu(t,e,r,n){zd(n),e=da(e,"onChange"),0<e.length&&(r=new tl("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ln=null,ts=null;function Mm(t){wu(t,0)}function Aa(t){var e=Ur(t);if(Id(e))return t}function Fm(t,e){if(t==="change")return e}var du=!1;if(_t){var li;if(_t){var ci="oninput"in document;if(!ci){var oc=document.createElement("div");oc.setAttribute("oninput","return;"),ci=typeof oc.oninput=="function"}li=ci}else li=!1;du=li&&(!document.documentMode||9<document.documentMode)}function lc(){Ln&&(Ln.detachEvent("onpropertychange",uu),ts=Ln=null)}function uu(t){if(t.propertyName==="value"&&Aa(ts)){var e=[];cu(e,ts,t,Qo(t)),qd(Mm,e)}}function zm(t,e,r){t==="focusin"?(lc(),Ln=e,ts=r,Ln.attachEvent("onpropertychange",uu)):t==="focusout"&&lc()}function Um(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Aa(ts)}function Bm(t,e){if(t==="click")return Aa(e)}function Vm(t,e){if(t==="input"||t==="change")return Aa(e)}function qm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:qm;function rs(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Ii.call(e,a)||!at(t[a],e[a]))return!1}return!0}function cc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dc(t,e){var r=cc(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cc(r)}}function hu(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hu(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fu(){for(var t=window,e=na();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=na(t.document)}return e}function sl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Hm(t){var e=fu(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&hu(r.ownerDocument.documentElement,r)){if(n!==null&&sl(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=dc(r,i);var o=dc(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Wm=_t&&"documentMode"in document&&11>=document.documentMode,Fr=null,Zi=null,Rn=null,Xi=!1;function uc(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xi||Fr==null||Fr!==na(n)||(n=Fr,"selectionStart"in n&&sl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Rn&&rs(Rn,n)||(Rn=n,n=da(Zi,"onSelect"),0<n.length&&(e=new tl("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Fr)))}function As(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var zr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},di={},mu={};_t&&(mu=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function Ia(t){if(di[t])return di[t];if(!zr[t])return t;var e=zr[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in mu)return di[t]=e[r];return t}var pu=Ia("animationend"),gu=Ia("animationiteration"),xu=Ia("animationstart"),yu=Ia("transitionend"),vu=new Map,hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zt(t,e){vu.set(t,e),br(e,[t])}for(var ui=0;ui<hc.length;ui++){var hi=hc[ui],Gm=hi.toLowerCase(),Km=hi[0].toUpperCase()+hi.slice(1);Zt(Gm,"on"+Km)}Zt(pu,"onAnimationEnd");Zt(gu,"onAnimationIteration");Zt(xu,"onAnimationStart");Zt("dblclick","onDoubleClick");Zt("focusin","onFocus");Zt("focusout","onBlur");Zt(yu,"onTransitionEnd");en("onMouseEnter",["mouseout","mouseover"]);en("onMouseLeave",["mouseout","mouseover"]);en("onPointerEnter",["pointerout","pointerover"]);en("onPointerLeave",["pointerout","pointerover"]);br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));br("onBeforeInput",["compositionend","keypress","textInput","paste"]);br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tn));function fc(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Gf(n,e,void 0,t),t.currentTarget=null}function wu(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;fc(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;fc(a,l,d),i=c}}}if(aa)throw t=Ki,aa=!1,Ki=null,t}function Y(t,e){var r=e[so];r===void 0&&(r=e[so]=new Set);var n=t+"__bubble";r.has(n)||(bu(e,t,2,!1),r.add(n))}function fi(t,e,r){var n=0;e&&(n|=4),bu(r,t,n,e)}var Is="_reactListening"+Math.random().toString(36).slice(2);function ns(t){if(!t[Is]){t[Is]=!0,Cd.forEach(function(r){r!=="selectionchange"&&(Qm.has(r)||fi(r,!1,t),fi(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Is]||(e[Is]=!0,fi("selectionchange",!1,e))}}function bu(t,e,r,n){switch(su(e)){case 1:var a=cm;break;case 4:a=dm;break;default:a=Xo}r=a.bind(null,e,r,t),a=void 0,!Gi||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function mi(t,e,r,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=lr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}qd(function(){var d=i,u=Qo(r),h=[];e:{var m=vu.get(t);if(m!==void 0){var x=tl,v=t;switch(t){case"keypress":if(Qs(r)===0)break e;case"keydown":case"keyup":x=km;break;case"focusin":v="focus",x=oi;break;case"focusout":v="blur",x=oi;break;case"beforeblur":case"afterblur":x=oi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=fm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Cm;break;case pu:case gu:case xu:x=gm;break;case yu:x=Tm;break;case"scroll":x=um;break;case"wheel":x=Am;break;case"copy":case"cut":case"paste":x=ym;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=nc}var b=(e&4)!==0,C=!b&&t==="scroll",y=b?m!==null?m+"Capture":null:m;b=[];for(var p=d,f;p!==null;){f=p;var g=f.stateNode;if(f.tag===5&&g!==null&&(f=g,y!==null&&(g=Yn(p,y),g!=null&&b.push(ss(p,g,f)))),C)break;p=p.return}0<b.length&&(m=new x(m,v,null,r,u),h.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&r!==Hi&&(v=r.relatedTarget||r.fromElement)&&(lr(v)||v[kt]))break e;if((x||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,x?(v=r.relatedTarget||r.toElement,x=d,v=v?lr(v):null,v!==null&&(C=jr(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=d),x!==v)){if(b=tc,g="onMouseLeave",y="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(b=nc,g="onPointerLeave",y="onPointerEnter",p="pointer"),C=x==null?m:Ur(x),f=v==null?m:Ur(v),m=new b(g,p+"leave",x,r,u),m.target=C,m.relatedTarget=f,g=null,lr(u)===d&&(b=new b(y,p+"enter",v,r,u),b.target=f,b.relatedTarget=C,g=b),C=g,x&&v)t:{for(b=x,y=v,p=0,f=b;f;f=Er(f))p++;for(f=0,g=y;g;g=Er(g))f++;for(;0<p-f;)b=Er(b),p--;for(;0<f-p;)y=Er(y),f--;for(;p--;){if(b===y||y!==null&&b===y.alternate)break t;b=Er(b),y=Er(y)}b=null}else b=null;x!==null&&mc(h,m,x,b,!1),v!==null&&C!==null&&mc(h,C,v,b,!0)}}e:{if(m=d?Ur(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var k=Fm;else if(ic(m))if(du)k=Vm;else{k=Um;var S=zm}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=Bm);if(k&&(k=k(t,d))){cu(h,k,r,u);break e}S&&S(t,m,d),t==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&zi(m,"number",m.value)}switch(S=d?Ur(d):window,t){case"focusin":(ic(S)||S.contentEditable==="true")&&(Fr=S,Zi=d,Rn=null);break;case"focusout":Rn=Zi=Fr=null;break;case"mousedown":Xi=!0;break;case"contextmenu":case"mouseup":case"dragend":Xi=!1,uc(h,r,u);break;case"selectionchange":if(Wm)break;case"keydown":case"keyup":uc(h,r,u)}var j;if(nl)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Mr?ou(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(iu&&r.locale!=="ko"&&(Mr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Mr&&(j=au()):(Rt=u,el="value"in Rt?Rt.value:Rt.textContent,Mr=!0)),S=da(d,E),0<S.length&&(E=new rc(E,t,null,r,u),h.push({event:E,listeners:S}),j?E.data=j:(j=lu(r),j!==null&&(E.data=j)))),(j=$m?Dm(t,r):Lm(t,r))&&(d=da(d,"onBeforeInput"),0<d.length&&(u=new rc("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=j))}wu(h,e)})}function ss(t,e,r){return{instance:t,listener:e,currentTarget:r}}function da(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Yn(t,r),i!=null&&n.unshift(ss(t,i,a)),i=Yn(t,e),i!=null&&n.push(ss(t,i,a))),t=t.return}return n}function Er(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mc(t,e,r,n,a){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Yn(r,i),c!=null&&o.unshift(ss(r,c,l))):a||(c=Yn(r,i),c!=null&&o.push(ss(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Jm=/\r\n?/g,Ym=/\u0000|\uFFFD/g;function pc(t){return(typeof t=="string"?t:""+t).replace(Jm,`
`).replace(Ym,"")}function $s(t,e,r){if(e=pc(e),pc(t)!==e&&r)throw Error(O(425))}function ua(){}var eo=null,to=null;function ro(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var no=typeof setTimeout=="function"?setTimeout:void 0,Zm=typeof clearTimeout=="function"?clearTimeout:void 0,gc=typeof Promise=="function"?Promise:void 0,Xm=typeof queueMicrotask=="function"?queueMicrotask:typeof gc<"u"?function(t){return gc.resolve(null).then(t).catch(ep)}:no;function ep(t){setTimeout(function(){throw t})}function pi(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),es(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);es(e)}function Bt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var un=Math.random().toString(36).slice(2),ut="__reactFiber$"+un,as="__reactProps$"+un,kt="__reactContainer$"+un,so="__reactEvents$"+un,tp="__reactListeners$"+un,rp="__reactHandles$"+un;function lr(t){var e=t[ut];if(e)return e;for(var r=t.parentNode;r;){if(e=r[kt]||r[ut]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=xc(t);t!==null;){if(r=t[ut])return r;t=xc(t)}return e}t=r,r=t.parentNode}return null}function vs(t){return t=t[ut]||t[kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ur(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function $a(t){return t[as]||null}var ao=[],Br=-1;function Xt(t){return{current:t}}function Z(t){0>Br||(t.current=ao[Br],ao[Br]=null,Br--)}function J(t,e){Br++,ao[Br]=t.current,t.current=e}var Qt={},be=Xt(Qt),Oe=Xt(!1),fr=Qt;function tn(t,e){var r=t.type.contextTypes;if(!r)return Qt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Ae(t){return t=t.childContextTypes,t!=null}function ha(){Z(Oe),Z(be)}function yc(t,e,r){if(be.current!==Qt)throw Error(O(168));J(be,e),J(Oe,r)}function ju(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(O(108,zf(t)||"Unknown",a));return ne({},r,n)}function fa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qt,fr=be.current,J(be,t),J(Oe,Oe.current),!0}function vc(t,e,r){var n=t.stateNode;if(!n)throw Error(O(169));r?(t=ju(t,e,fr),n.__reactInternalMemoizedMergedChildContext=t,Z(Oe),Z(be),J(be,t)):Z(Oe),J(Oe,r)}var vt=null,Da=!1,gi=!1;function Nu(t){vt===null?vt=[t]:vt.push(t)}function np(t){Da=!0,Nu(t)}function er(){if(!gi&&vt!==null){gi=!0;var t=0,e=G;try{var r=vt;for(G=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}vt=null,Da=!1}catch(a){throw vt!==null&&(vt=vt.slice(t+1)),Kd(Jo,er),a}finally{G=e,gi=!1}}return null}var Vr=[],qr=0,ma=null,pa=0,Ve=[],qe=0,mr=null,wt=1,bt="";function sr(t,e){Vr[qr++]=pa,Vr[qr++]=ma,ma=t,pa=e}function _u(t,e,r){Ve[qe++]=wt,Ve[qe++]=bt,Ve[qe++]=mr,mr=t;var n=wt;t=bt;var a=32-nt(n)-1;n&=~(1<<a),r+=1;var i=32-nt(e)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,wt=1<<32-nt(e)+a|r<<a|n,bt=i+t}else wt=1<<i|r<<a|n,bt=t}function al(t){t.return!==null&&(sr(t,1),_u(t,1,0))}function il(t){for(;t===ma;)ma=Vr[--qr],Vr[qr]=null,pa=Vr[--qr],Vr[qr]=null;for(;t===mr;)mr=Ve[--qe],Ve[qe]=null,bt=Ve[--qe],Ve[qe]=null,wt=Ve[--qe],Ve[qe]=null}var Re=null,De=null,X=!1,tt=null;function ku(t,e){var r=He(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function wc(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Re=t,De=Bt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Re=t,De=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=mr!==null?{id:wt,overflow:bt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=He(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Re=t,De=null,!0):!1;default:return!1}}function io(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oo(t){if(X){var e=De;if(e){var r=e;if(!wc(t,e)){if(io(t))throw Error(O(418));e=Bt(r.nextSibling);var n=Re;e&&wc(t,e)?ku(n,r):(t.flags=t.flags&-4097|2,X=!1,Re=t)}}else{if(io(t))throw Error(O(418));t.flags=t.flags&-4097|2,X=!1,Re=t}}}function bc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Re=t}function Ds(t){if(t!==Re)return!1;if(!X)return bc(t),X=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ro(t.type,t.memoizedProps)),e&&(e=De)){if(io(t))throw Su(),Error(O(418));for(;e;)ku(t,e),e=Bt(e.nextSibling)}if(bc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){De=Bt(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}De=null}}else De=Re?Bt(t.stateNode.nextSibling):null;return!0}function Su(){for(var t=De;t;)t=Bt(t.nextSibling)}function rn(){De=Re=null,X=!1}function ol(t){tt===null?tt=[t]:tt.push(t)}var sp=Ct.ReactCurrentBatchConfig;function Nn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var n=r.stateNode}if(!n)throw Error(O(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,t))}return t}function Ls(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jc(t){var e=t._init;return e(t._payload)}function Eu(t){function e(y,p){if(t){var f=y.deletions;f===null?(y.deletions=[p],y.flags|=16):f.push(p)}}function r(y,p){if(!t)return null;for(;p!==null;)e(y,p),p=p.sibling;return null}function n(y,p){for(y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function a(y,p){return y=Wt(y,p),y.index=0,y.sibling=null,y}function i(y,p,f){return y.index=f,t?(f=y.alternate,f!==null?(f=f.index,f<p?(y.flags|=2,p):f):(y.flags|=2,p)):(y.flags|=1048576,p)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,p,f,g){return p===null||p.tag!==6?(p=Ni(f,y.mode,g),p.return=y,p):(p=a(p,f),p.return=y,p)}function c(y,p,f,g){var k=f.type;return k===Rr?u(y,p,f.props.children,g,f.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===At&&jc(k)===p.type)?(g=a(p,f.props),g.ref=Nn(y,p,f),g.return=y,g):(g=ra(f.type,f.key,f.props,null,y.mode,g),g.ref=Nn(y,p,f),g.return=y,g)}function d(y,p,f,g){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=_i(f,y.mode,g),p.return=y,p):(p=a(p,f.children||[]),p.return=y,p)}function u(y,p,f,g,k){return p===null||p.tag!==7?(p=hr(f,y.mode,g,k),p.return=y,p):(p=a(p,f),p.return=y,p)}function h(y,p,f){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ni(""+p,y.mode,f),p.return=y,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ks:return f=ra(p.type,p.key,p.props,null,y.mode,f),f.ref=Nn(y,null,p),f.return=y,f;case Lr:return p=_i(p,y.mode,f),p.return=y,p;case At:var g=p._init;return h(y,g(p._payload),f)}if(Cn(p)||yn(p))return p=hr(p,y.mode,f,null),p.return=y,p;Ls(y,p)}return null}function m(y,p,f,g){var k=p!==null?p.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return k!==null?null:l(y,p,""+f,g);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ks:return f.key===k?c(y,p,f,g):null;case Lr:return f.key===k?d(y,p,f,g):null;case At:return k=f._init,m(y,p,k(f._payload),g)}if(Cn(f)||yn(f))return k!==null?null:u(y,p,f,g,null);Ls(y,f)}return null}function x(y,p,f,g,k){if(typeof g=="string"&&g!==""||typeof g=="number")return y=y.get(f)||null,l(p,y,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ks:return y=y.get(g.key===null?f:g.key)||null,c(p,y,g,k);case Lr:return y=y.get(g.key===null?f:g.key)||null,d(p,y,g,k);case At:var S=g._init;return x(y,p,f,S(g._payload),k)}if(Cn(g)||yn(g))return y=y.get(f)||null,u(p,y,g,k,null);Ls(p,g)}return null}function v(y,p,f,g){for(var k=null,S=null,j=p,E=p=0,D=null;j!==null&&E<f.length;E++){j.index>E?(D=j,j=null):D=j.sibling;var N=m(y,j,f[E],g);if(N===null){j===null&&(j=D);break}t&&j&&N.alternate===null&&e(y,j),p=i(N,p,E),S===null?k=N:S.sibling=N,S=N,j=D}if(E===f.length)return r(y,j),X&&sr(y,E),k;if(j===null){for(;E<f.length;E++)j=h(y,f[E],g),j!==null&&(p=i(j,p,E),S===null?k=j:S.sibling=j,S=j);return X&&sr(y,E),k}for(j=n(y,j);E<f.length;E++)D=x(j,y,E,f[E],g),D!==null&&(t&&D.alternate!==null&&j.delete(D.key===null?E:D.key),p=i(D,p,E),S===null?k=D:S.sibling=D,S=D);return t&&j.forEach(function(R){return e(y,R)}),X&&sr(y,E),k}function b(y,p,f,g){var k=yn(f);if(typeof k!="function")throw Error(O(150));if(f=k.call(f),f==null)throw Error(O(151));for(var S=k=null,j=p,E=p=0,D=null,N=f.next();j!==null&&!N.done;E++,N=f.next()){j.index>E?(D=j,j=null):D=j.sibling;var R=m(y,j,N.value,g);if(R===null){j===null&&(j=D);break}t&&j&&R.alternate===null&&e(y,j),p=i(R,p,E),S===null?k=R:S.sibling=R,S=R,j=D}if(N.done)return r(y,j),X&&sr(y,E),k;if(j===null){for(;!N.done;E++,N=f.next())N=h(y,N.value,g),N!==null&&(p=i(N,p,E),S===null?k=N:S.sibling=N,S=N);return X&&sr(y,E),k}for(j=n(y,j);!N.done;E++,N=f.next())N=x(j,y,E,N.value,g),N!==null&&(t&&N.alternate!==null&&j.delete(N.key===null?E:N.key),p=i(N,p,E),S===null?k=N:S.sibling=N,S=N);return t&&j.forEach(function(V){return e(y,V)}),X&&sr(y,E),k}function C(y,p,f,g){if(typeof f=="object"&&f!==null&&f.type===Rr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case ks:e:{for(var k=f.key,S=p;S!==null;){if(S.key===k){if(k=f.type,k===Rr){if(S.tag===7){r(y,S.sibling),p=a(S,f.props.children),p.return=y,y=p;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===At&&jc(k)===S.type){r(y,S.sibling),p=a(S,f.props),p.ref=Nn(y,S,f),p.return=y,y=p;break e}r(y,S);break}else e(y,S);S=S.sibling}f.type===Rr?(p=hr(f.props.children,y.mode,g,f.key),p.return=y,y=p):(g=ra(f.type,f.key,f.props,null,y.mode,g),g.ref=Nn(y,p,f),g.return=y,y=g)}return o(y);case Lr:e:{for(S=f.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){r(y,p.sibling),p=a(p,f.children||[]),p.return=y,y=p;break e}else{r(y,p);break}else e(y,p);p=p.sibling}p=_i(f,y.mode,g),p.return=y,y=p}return o(y);case At:return S=f._init,C(y,p,S(f._payload),g)}if(Cn(f))return v(y,p,f,g);if(yn(f))return b(y,p,f,g);Ls(y,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,p!==null&&p.tag===6?(r(y,p.sibling),p=a(p,f),p.return=y,y=p):(r(y,p),p=Ni(f,y.mode,g),p.return=y,y=p),o(y)):r(y,p)}return C}var nn=Eu(!0),Cu=Eu(!1),ga=Xt(null),xa=null,Hr=null,ll=null;function cl(){ll=Hr=xa=null}function dl(t){var e=ga.current;Z(ga),t._currentValue=e}function lo(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Zr(t,e){xa=t,ll=Hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Te=!0),t.firstContext=null)}function Ke(t){var e=t._currentValue;if(ll!==t)if(t={context:t,memoizedValue:e,next:null},Hr===null){if(xa===null)throw Error(O(308));Hr=t,xa.dependencies={lanes:0,firstContext:t}}else Hr=Hr.next=t;return e}var cr=null;function ul(t){cr===null?cr=[t]:cr.push(t)}function Pu(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,ul(e)):(r.next=a.next,a.next=r),e.interleaved=r,St(t,n)}function St(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var It=!1;function hl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tu(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,W&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,St(t,r)}return a=n.interleaved,a===null?(e.next=e,ul(n)):(e.next=a.next,a.next=e),n.interleaved=e,St(t,r)}function Js(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Yo(t,r)}}function Nc(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ya(t,e,r,n){var a=t.updateQueue;It=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,b=l;switch(m=e,x=r,b.tag){case 1:if(v=b.payload,typeof v=="function"){h=v.call(x,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,m=typeof v=="function"?v.call(x,h,m):v,m==null)break e;h=ne({},h,m);break e;case 2:It=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=x,c=h):u=u.next=x,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);gr|=o,t.lanes=o,t.memoizedState=h}}function _c(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(O(191,a));a.call(n)}}}var ws={},ft=Xt(ws),is=Xt(ws),os=Xt(ws);function dr(t){if(t===ws)throw Error(O(174));return t}function fl(t,e){switch(J(os,e),J(is,t),J(ft,ws),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bi(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bi(e,t)}Z(ft),J(ft,e)}function sn(){Z(ft),Z(is),Z(os)}function Ou(t){dr(os.current);var e=dr(ft.current),r=Bi(e,t.type);e!==r&&(J(is,t),J(ft,r))}function ml(t){is.current===t&&(Z(ft),Z(is))}var te=Xt(0);function va(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xi=[];function pl(){for(var t=0;t<xi.length;t++)xi[t]._workInProgressVersionPrimary=null;xi.length=0}var Ys=Ct.ReactCurrentDispatcher,yi=Ct.ReactCurrentBatchConfig,pr=0,re=null,ue=null,fe=null,wa=!1,Mn=!1,ls=0,ap=0;function ye(){throw Error(O(321))}function gl(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!at(t[r],e[r]))return!1;return!0}function xl(t,e,r,n,a,i){if(pr=i,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ys.current=t===null||t.memoizedState===null?cp:dp,t=r(n,a),Mn){i=0;do{if(Mn=!1,ls=0,25<=i)throw Error(O(301));i+=1,fe=ue=null,e.updateQueue=null,Ys.current=up,t=r(n,a)}while(Mn)}if(Ys.current=ba,e=ue!==null&&ue.next!==null,pr=0,fe=ue=re=null,wa=!1,e)throw Error(O(300));return t}function yl(){var t=ls!==0;return ls=0,t}function ct(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?re.memoizedState=fe=t:fe=fe.next=t,fe}function Qe(){if(ue===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=fe===null?re.memoizedState:fe.next;if(e!==null)fe=e,ue=t;else{if(t===null)throw Error(O(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?re.memoizedState=fe=t:fe=fe.next=t}return fe}function cs(t,e){return typeof e=="function"?e(t):e}function vi(t){var e=Qe(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var n=ue,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((pr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,re.lanes|=u,gr|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,at(n,e.memoizedState)||(Te=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,re.lanes|=i,gr|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function wi(t){var e=Qe(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);at(i,e.memoizedState)||(Te=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Au(){}function Iu(t,e){var r=re,n=Qe(),a=e(),i=!at(n.memoizedState,a);if(i&&(n.memoizedState=a,Te=!0),n=n.queue,vl(Lu.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||fe!==null&&fe.memoizedState.tag&1){if(r.flags|=2048,ds(9,Du.bind(null,r,n,a,e),void 0,null),me===null)throw Error(O(349));pr&30||$u(r,e,a)}return a}function $u(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Du(t,e,r,n){e.value=r,e.getSnapshot=n,Ru(e)&&Mu(t)}function Lu(t,e,r){return r(function(){Ru(e)&&Mu(t)})}function Ru(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!at(t,r)}catch{return!0}}function Mu(t){var e=St(t,1);e!==null&&st(e,t,1,-1)}function kc(t){var e=ct();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t},e.queue=t,t=t.dispatch=lp.bind(null,re,t),[e.memoizedState,t]}function ds(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Fu(){return Qe().memoizedState}function Zs(t,e,r,n){var a=ct();re.flags|=t,a.memoizedState=ds(1|e,r,void 0,n===void 0?null:n)}function La(t,e,r,n){var a=Qe();n=n===void 0?null:n;var i=void 0;if(ue!==null){var o=ue.memoizedState;if(i=o.destroy,n!==null&&gl(n,o.deps)){a.memoizedState=ds(e,r,i,n);return}}re.flags|=t,a.memoizedState=ds(1|e,r,i,n)}function Sc(t,e){return Zs(8390656,8,t,e)}function vl(t,e){return La(2048,8,t,e)}function zu(t,e){return La(4,2,t,e)}function Uu(t,e){return La(4,4,t,e)}function Bu(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vu(t,e,r){return r=r!=null?r.concat([t]):null,La(4,4,Bu.bind(null,e,t),r)}function wl(){}function qu(t,e){var r=Qe();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&gl(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Hu(t,e){var r=Qe();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&gl(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Wu(t,e,r){return pr&21?(at(r,e)||(r=Yd(),re.lanes|=r,gr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Te=!0),t.memoizedState=r)}function ip(t,e){var r=G;G=r!==0&&4>r?r:4,t(!0);var n=yi.transition;yi.transition={};try{t(!1),e()}finally{G=r,yi.transition=n}}function Gu(){return Qe().memoizedState}function op(t,e,r){var n=Ht(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ku(t))Qu(e,r);else if(r=Pu(t,e,r,n),r!==null){var a=ke();st(r,t,n,a),Ju(r,e,n)}}function lp(t,e,r){var n=Ht(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ku(t))Qu(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,at(l,o)){var c=e.interleaved;c===null?(a.next=a,ul(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=Pu(t,e,a,n),r!==null&&(a=ke(),st(r,t,n,a),Ju(r,e,n))}}function Ku(t){var e=t.alternate;return t===re||e!==null&&e===re}function Qu(t,e){Mn=wa=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Ju(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Yo(t,r)}}var ba={readContext:Ke,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},cp={readContext:Ke,useCallback:function(t,e){return ct().memoizedState=[t,e===void 0?null:e],t},useContext:Ke,useEffect:Sc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Zs(4194308,4,Bu.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Zs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zs(4,2,t,e)},useMemo:function(t,e){var r=ct();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ct();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=op.bind(null,re,t),[n.memoizedState,t]},useRef:function(t){var e=ct();return t={current:t},e.memoizedState=t},useState:kc,useDebugValue:wl,useDeferredValue:function(t){return ct().memoizedState=t},useTransition:function(){var t=kc(!1),e=t[0];return t=ip.bind(null,t[1]),ct().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=re,a=ct();if(X){if(r===void 0)throw Error(O(407));r=r()}else{if(r=e(),me===null)throw Error(O(349));pr&30||$u(n,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,Sc(Lu.bind(null,n,i,t),[t]),n.flags|=2048,ds(9,Du.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=ct(),e=me.identifierPrefix;if(X){var r=bt,n=wt;r=(n&~(1<<32-nt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ls++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ap++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dp={readContext:Ke,useCallback:qu,useContext:Ke,useEffect:vl,useImperativeHandle:Vu,useInsertionEffect:zu,useLayoutEffect:Uu,useMemo:Hu,useReducer:vi,useRef:Fu,useState:function(){return vi(cs)},useDebugValue:wl,useDeferredValue:function(t){var e=Qe();return Wu(e,ue.memoizedState,t)},useTransition:function(){var t=vi(cs)[0],e=Qe().memoizedState;return[t,e]},useMutableSource:Au,useSyncExternalStore:Iu,useId:Gu,unstable_isNewReconciler:!1},up={readContext:Ke,useCallback:qu,useContext:Ke,useEffect:vl,useImperativeHandle:Vu,useInsertionEffect:zu,useLayoutEffect:Uu,useMemo:Hu,useReducer:wi,useRef:Fu,useState:function(){return wi(cs)},useDebugValue:wl,useDeferredValue:function(t){var e=Qe();return ue===null?e.memoizedState=t:Wu(e,ue.memoizedState,t)},useTransition:function(){var t=wi(cs)[0],e=Qe().memoizedState;return[t,e]},useMutableSource:Au,useSyncExternalStore:Iu,useId:Gu,unstable_isNewReconciler:!1};function Ze(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function co(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ne({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ra={isMounted:function(t){return(t=t._reactInternals)?jr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ke(),a=Ht(t),i=jt(n,a);i.payload=e,r!=null&&(i.callback=r),e=Vt(t,i,a),e!==null&&(st(e,t,a,n),Js(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ke(),a=Ht(t),i=jt(n,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Vt(t,i,a),e!==null&&(st(e,t,a,n),Js(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ke(),n=Ht(t),a=jt(r,n);a.tag=2,e!=null&&(a.callback=e),e=Vt(t,a,n),e!==null&&(st(e,t,n,r),Js(e,t,n))}};function Ec(t,e,r,n,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!rs(r,n)||!rs(a,i):!0}function Yu(t,e,r){var n=!1,a=Qt,i=e.contextType;return typeof i=="object"&&i!==null?i=Ke(i):(a=Ae(e)?fr:be.current,n=e.contextTypes,i=(n=n!=null)?tn(t,a):Qt),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ra,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cc(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ra.enqueueReplaceState(e,e.state,null)}function uo(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},hl(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=Ke(i):(i=Ae(e)?fr:be.current,a.context=tn(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(co(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ra.enqueueReplaceState(a,a.state,null),ya(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function an(t,e){try{var r="",n=e;do r+=Ff(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function bi(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ho(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var hp=typeof WeakMap=="function"?WeakMap:Map;function Zu(t,e,r){r=jt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Na||(Na=!0,jo=n),ho(t,e)},r}function Xu(t,e,r){r=jt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){ho(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ho(t,e),typeof n!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Pc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new hp;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=Sp.bind(null,t,e,r),e.then(t,t))}function Tc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Oc(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=jt(-1,1),e.tag=2,Vt(r,e,1))),r.lanes|=1),t)}var fp=Ct.ReactCurrentOwner,Te=!1;function Ne(t,e,r,n){e.child=t===null?Cu(e,null,r,n):nn(e,t.child,r,n)}function Ac(t,e,r,n,a){r=r.render;var i=e.ref;return Zr(e,a),n=xl(t,e,r,n,i,a),r=yl(),t!==null&&!Te?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Et(t,e,a)):(X&&r&&al(e),e.flags|=1,Ne(t,e,n,a),e.child)}function Ic(t,e,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!Cl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,eh(t,e,i,n,a)):(t=ra(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:rs,r(o,n)&&t.ref===e.ref)return Et(t,e,a)}return e.flags|=1,t=Wt(i,n),t.ref=e.ref,t.return=e,e.child=t}function eh(t,e,r,n,a){if(t!==null){var i=t.memoizedProps;if(rs(i,n)&&t.ref===e.ref)if(Te=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Te=!0);else return e.lanes=t.lanes,Et(t,e,a)}return fo(t,e,r,n,a)}function th(t,e,r){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Gr,$e),$e|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(Gr,$e),$e|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,J(Gr,$e),$e|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,J(Gr,$e),$e|=n;return Ne(t,e,a,r),e.child}function rh(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function fo(t,e,r,n,a){var i=Ae(r)?fr:be.current;return i=tn(e,i),Zr(e,a),r=xl(t,e,r,n,i,a),n=yl(),t!==null&&!Te?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Et(t,e,a)):(X&&n&&al(e),e.flags|=1,Ne(t,e,r,a),e.child)}function $c(t,e,r,n,a){if(Ae(r)){var i=!0;fa(e)}else i=!1;if(Zr(e,a),e.stateNode===null)Xs(t,e),Yu(e,r,n),uo(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ke(d):(d=Ae(r)?fr:be.current,d=tn(e,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Cc(e,o,n,d),It=!1;var m=e.memoizedState;o.state=m,ya(e,n,o,a),c=e.memoizedState,l!==n||m!==c||Oe.current||It?(typeof u=="function"&&(co(e,r,u,n),c=e.memoizedState),(l=It||Ec(e,r,l,n,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Tu(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ze(e.type,l),o.props=d,h=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ke(c):(c=Ae(r)?fr:be.current,c=tn(e,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Cc(e,o,n,c),It=!1,m=e.memoizedState,o.state=m,ya(e,n,o,a);var v=e.memoizedState;l!==h||m!==v||Oe.current||It?(typeof x=="function"&&(co(e,r,x,n),v=e.memoizedState),(d=It||Ec(e,r,d,n,m,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return mo(t,e,r,n,i,a)}function mo(t,e,r,n,a,i){rh(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&vc(e,r,!1),Et(t,e,i);n=e.stateNode,fp.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=nn(e,t.child,null,i),e.child=nn(e,null,l,i)):Ne(t,e,l,i),e.memoizedState=n.state,a&&vc(e,r,!0),e.child}function nh(t){var e=t.stateNode;e.pendingContext?yc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yc(t,e.context,!1),fl(t,e.containerInfo)}function Dc(t,e,r,n,a){return rn(),ol(a),e.flags|=256,Ne(t,e,r,n),e.child}var po={dehydrated:null,treeContext:null,retryLane:0};function go(t){return{baseLanes:t,cachePool:null,transitions:null}}function sh(t,e,r){var n=e.pendingProps,a=te.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),J(te,a&1),t===null)return oo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=za(o,n,0,null),t=hr(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=go(r),e.memoizedState=po,t):bl(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return mp(t,e,o,n,l,a,r);if(i){i=n.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Wt(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Wt(l,i):(i=hr(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?go(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=po,n}return i=t.child,t=i.sibling,n=Wt(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function bl(t,e){return e=za({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rs(t,e,r,n){return n!==null&&ol(n),nn(e,t.child,null,r),t=bl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mp(t,e,r,n,a,i,o){if(r)return e.flags&256?(e.flags&=-257,n=bi(Error(O(422))),Rs(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=za({mode:"visible",children:n.children},a,0,null),i=hr(i,a,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&nn(e,t.child,null,o),e.child.memoizedState=go(o),e.memoizedState=po,i);if(!(e.mode&1))return Rs(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(O(419)),n=bi(i,n,void 0),Rs(t,e,o,n)}if(l=(o&t.childLanes)!==0,Te||l){if(n=me,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,St(t,a),st(n,t,a,-1))}return El(),n=bi(Error(O(421))),Rs(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Ep.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,De=Bt(a.nextSibling),Re=e,X=!0,tt=null,t!==null&&(Ve[qe++]=wt,Ve[qe++]=bt,Ve[qe++]=mr,wt=t.id,bt=t.overflow,mr=e),e=bl(e,n.children),e.flags|=4096,e)}function Lc(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),lo(t.return,e,r)}function ji(t,e,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function ah(t,e,r){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(Ne(t,e,n.children,r),n=te.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lc(t,r,e);else if(t.tag===19)Lc(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(J(te,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&va(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),ji(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&va(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}ji(e,!0,r,null,i);break;case"together":ji(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Et(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),gr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,r=Wt(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Wt(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function pp(t,e,r){switch(e.tag){case 3:nh(e),rn();break;case 5:Ou(e);break;case 1:Ae(e.type)&&fa(e);break;case 4:fl(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;J(ga,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(J(te,te.current&1),e.flags|=128,null):r&e.child.childLanes?sh(t,e,r):(J(te,te.current&1),t=Et(t,e,r),t!==null?t.sibling:null);J(te,te.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ah(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),J(te,te.current),n)break;return null;case 22:case 23:return e.lanes=0,th(t,e,r)}return Et(t,e,r)}var ih,xo,oh,lh;ih=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xo=function(){};oh=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,dr(ft.current);var i=null;switch(r){case"input":a=Mi(t,a),n=Mi(t,n),i=[];break;case"select":a=ne({},a,{value:void 0}),n=ne({},n,{value:void 0}),i=[];break;case"textarea":a=Ui(t,a),n=Ui(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ua)}Vi(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Y("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};lh=function(t,e,r,n){r!==n&&(e.flags|=4)};function _n(t,e){if(!X)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function gp(t,e,r){var n=e.pendingProps;switch(il(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(e),null;case 1:return Ae(e.type)&&ha(),ve(e),null;case 3:return n=e.stateNode,sn(),Z(Oe),Z(be),pl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ds(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tt!==null&&(ko(tt),tt=null))),xo(t,e),ve(e),null;case 5:ml(e);var a=dr(os.current);if(r=e.type,t!==null&&e.stateNode!=null)oh(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(O(166));return ve(e),null}if(t=dr(ft.current),Ds(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[ut]=e,n[as]=i,t=(e.mode&1)!==0,r){case"dialog":Y("cancel",n),Y("close",n);break;case"iframe":case"object":case"embed":Y("load",n);break;case"video":case"audio":for(a=0;a<Tn.length;a++)Y(Tn[a],n);break;case"source":Y("error",n);break;case"img":case"image":case"link":Y("error",n),Y("load",n);break;case"details":Y("toggle",n);break;case"input":Hl(n,i),Y("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Y("invalid",n);break;case"textarea":Gl(n,i),Y("invalid",n)}Vi(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&$s(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&$s(n.textContent,l,t),a=["children",""+l]):Qn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Y("scroll",n)}switch(r){case"input":Ss(n),Wl(n,i,!0);break;case"textarea":Ss(n),Kl(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ua)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ld(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ut]=e,t[as]=n,ih(t,e,!1,!1),e.stateNode=t;e:{switch(o=qi(r,n),r){case"dialog":Y("cancel",t),Y("close",t),a=n;break;case"iframe":case"object":case"embed":Y("load",t),a=n;break;case"video":case"audio":for(a=0;a<Tn.length;a++)Y(Tn[a],t);a=n;break;case"source":Y("error",t),a=n;break;case"img":case"image":case"link":Y("error",t),Y("load",t),a=n;break;case"details":Y("toggle",t),a=n;break;case"input":Hl(t,n),a=Mi(t,n),Y("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=ne({},n,{value:void 0}),Y("invalid",t);break;case"textarea":Gl(t,n),a=Ui(t,n),Y("invalid",t);break;default:a=n}Vi(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Fd(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rd(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Jn(t,c):typeof c=="number"&&Jn(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Y("scroll",t):c!=null&&Ho(t,i,c,o))}switch(r){case"input":Ss(t),Wl(t,n,!1);break;case"textarea":Ss(t),Kl(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Kt(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Kr(t,!!n.multiple,i,!1):n.defaultValue!=null&&Kr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=ua)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ve(e),null;case 6:if(t&&e.stateNode!=null)lh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(O(166));if(r=dr(os.current),dr(ft.current),Ds(e)){if(n=e.stateNode,r=e.memoizedProps,n[ut]=e,(i=n.nodeValue!==r)&&(t=Re,t!==null))switch(t.tag){case 3:$s(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$s(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ut]=e,e.stateNode=n}return ve(e),null;case 13:if(Z(te),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(X&&De!==null&&e.mode&1&&!(e.flags&128))Su(),rn(),e.flags|=98560,i=!1;else if(i=Ds(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[ut]=e}else rn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ve(e),i=!1}else tt!==null&&(ko(tt),tt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?he===0&&(he=3):El())),e.updateQueue!==null&&(e.flags|=4),ve(e),null);case 4:return sn(),xo(t,e),t===null&&ns(e.stateNode.containerInfo),ve(e),null;case 10:return dl(e.type._context),ve(e),null;case 17:return Ae(e.type)&&ha(),ve(e),null;case 19:if(Z(te),i=e.memoizedState,i===null)return ve(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)_n(i,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=va(t),o!==null){for(e.flags|=128,_n(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return J(te,te.current&1|2),e.child}t=t.sibling}i.tail!==null&&ae()>on&&(e.flags|=128,n=!0,_n(i,!1),e.lanes=4194304)}else{if(!n)if(t=va(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_n(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!X)return ve(e),null}else 2*ae()-i.renderingStartTime>on&&r!==1073741824&&(e.flags|=128,n=!0,_n(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ae(),e.sibling=null,r=te.current,J(te,n?r&1|2:r&1),e):(ve(e),null);case 22:case 23:return Sl(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?$e&1073741824&&(ve(e),e.subtreeFlags&6&&(e.flags|=8192)):ve(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function xp(t,e){switch(il(e),e.tag){case 1:return Ae(e.type)&&ha(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sn(),Z(Oe),Z(be),pl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ml(e),null;case 13:if(Z(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));rn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(te),null;case 4:return sn(),null;case 10:return dl(e.type._context),null;case 22:case 23:return Sl(),null;case 24:return null;default:return null}}var Ms=!1,we=!1,yp=typeof WeakSet=="function"?WeakSet:Set,L=null;function Wr(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){se(t,e,n)}else r.current=null}function yo(t,e,r){try{r()}catch(n){se(t,e,n)}}var Rc=!1;function vp(t,e){if(eo=la,t=fu(),sl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,m=null;t:for(;;){for(var x;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(x=h.firstChild)!==null;)m=h,h=x;for(;;){if(h===t)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),(x=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(to={focusedElem:t,selectionRange:r},la=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,C=v.memoizedState,y=e.stateNode,p=y.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ze(e.type,b),C);y.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(g){se(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return v=Rc,Rc=!1,v}function Fn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&yo(e,r,i)}a=a.next}while(a!==n)}}function Ma(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function vo(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ch(t){var e=t.alternate;e!==null&&(t.alternate=null,ch(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ut],delete e[as],delete e[so],delete e[tp],delete e[rp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dh(t){return t.tag===5||t.tag===3||t.tag===4}function Mc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wo(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ua));else if(n!==4&&(t=t.child,t!==null))for(wo(t,e,r),t=t.sibling;t!==null;)wo(t,e,r),t=t.sibling}function bo(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(bo(t,e,r),t=t.sibling;t!==null;)bo(t,e,r),t=t.sibling}var pe=null,Xe=!1;function Pt(t,e,r){for(r=r.child;r!==null;)uh(t,e,r),r=r.sibling}function uh(t,e,r){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Ta,r)}catch{}switch(r.tag){case 5:we||Wr(r,e);case 6:var n=pe,a=Xe;pe=null,Pt(t,e,r),pe=n,Xe=a,pe!==null&&(Xe?(t=pe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):pe.removeChild(r.stateNode));break;case 18:pe!==null&&(Xe?(t=pe,r=r.stateNode,t.nodeType===8?pi(t.parentNode,r):t.nodeType===1&&pi(t,r),es(t)):pi(pe,r.stateNode));break;case 4:n=pe,a=Xe,pe=r.stateNode.containerInfo,Xe=!0,Pt(t,e,r),pe=n,Xe=a;break;case 0:case 11:case 14:case 15:if(!we&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yo(r,e,o),a=a.next}while(a!==n)}Pt(t,e,r);break;case 1:if(!we&&(Wr(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){se(r,e,l)}Pt(t,e,r);break;case 21:Pt(t,e,r);break;case 22:r.mode&1?(we=(n=we)||r.memoizedState!==null,Pt(t,e,r),we=n):Pt(t,e,r);break;default:Pt(t,e,r)}}function Fc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new yp),e.forEach(function(n){var a=Cp.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Je(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:pe=l.stateNode,Xe=!1;break e;case 3:pe=l.stateNode.containerInfo,Xe=!0;break e;case 4:pe=l.stateNode.containerInfo,Xe=!0;break e}l=l.return}if(pe===null)throw Error(O(160));uh(i,o,a),pe=null,Xe=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){se(a,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hh(e,t),e=e.sibling}function hh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Je(e,t),ot(t),n&4){try{Fn(3,t,t.return),Ma(3,t)}catch(b){se(t,t.return,b)}try{Fn(5,t,t.return)}catch(b){se(t,t.return,b)}}break;case 1:Je(e,t),ot(t),n&512&&r!==null&&Wr(r,r.return);break;case 5:if(Je(e,t),ot(t),n&512&&r!==null&&Wr(r,r.return),t.flags&32){var a=t.stateNode;try{Jn(a,"")}catch(b){se(t,t.return,b)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$d(a,i),qi(l,o);var d=qi(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?Fd(a,h):u==="dangerouslySetInnerHTML"?Rd(a,h):u==="children"?Jn(a,h):Ho(a,u,h,d)}switch(l){case"input":Fi(a,i);break;case"textarea":Dd(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Kr(a,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?Kr(a,!!i.multiple,i.defaultValue,!0):Kr(a,!!i.multiple,i.multiple?[]:"",!1))}a[as]=i}catch(b){se(t,t.return,b)}}break;case 6:if(Je(e,t),ot(t),n&4){if(t.stateNode===null)throw Error(O(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(b){se(t,t.return,b)}}break;case 3:if(Je(e,t),ot(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{es(e.containerInfo)}catch(b){se(t,t.return,b)}break;case 4:Je(e,t),ot(t);break;case 13:Je(e,t),ot(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(_l=ae())),n&4&&Fc(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(we=(d=we)||u,Je(e,t),we=d):Je(e,t),ot(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(L=t,u=t.child;u!==null;){for(h=L=u;L!==null;){switch(m=L,x=m.child,m.tag){case 0:case 11:case 14:case 15:Fn(4,m,m.return);break;case 1:Wr(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){se(n,r,b)}}break;case 5:Wr(m,m.return);break;case 22:if(m.memoizedState!==null){Uc(h);continue}}x!==null?(x.return=m,L=x):Uc(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Md("display",o))}catch(b){se(t,t.return,b)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(b){se(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Je(e,t),ot(t),n&4&&Fc(t);break;case 21:break;default:Je(e,t),ot(t)}}function ot(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(dh(r)){var n=r;break e}r=r.return}throw Error(O(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Jn(a,""),n.flags&=-33);var i=Mc(t);bo(t,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Mc(t);wo(t,l,o);break;default:throw Error(O(161))}}catch(c){se(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wp(t,e,r){L=t,fh(t)}function fh(t,e,r){for(var n=(t.mode&1)!==0;L!==null;){var a=L,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Ms;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||we;l=Ms;var d=we;if(Ms=o,(we=c)&&!d)for(L=a;L!==null;)o=L,c=o.child,o.tag===22&&o.memoizedState!==null?Bc(a):c!==null?(c.return=o,L=c):Bc(a);for(;i!==null;)L=i,fh(i),i=i.sibling;L=a,Ms=l,we=d}zc(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,L=i):zc(t)}}function zc(t){for(;L!==null;){var e=L;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:we||Ma(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!we)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Ze(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&_c(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}_c(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&es(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}we||e.flags&512&&vo(e)}catch(m){se(e,e.return,m)}}if(e===t){L=null;break}if(r=e.sibling,r!==null){r.return=e.return,L=r;break}L=e.return}}function Uc(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var r=e.sibling;if(r!==null){r.return=e.return,L=r;break}L=e.return}}function Bc(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ma(4,e)}catch(c){se(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){se(e,a,c)}}var i=e.return;try{vo(e)}catch(c){se(e,i,c)}break;case 5:var o=e.return;try{vo(e)}catch(c){se(e,o,c)}}}catch(c){se(e,e.return,c)}if(e===t){L=null;break}var l=e.sibling;if(l!==null){l.return=e.return,L=l;break}L=e.return}}var bp=Math.ceil,ja=Ct.ReactCurrentDispatcher,jl=Ct.ReactCurrentOwner,We=Ct.ReactCurrentBatchConfig,W=0,me=null,le=null,ge=0,$e=0,Gr=Xt(0),he=0,us=null,gr=0,Fa=0,Nl=0,zn=null,Ce=null,_l=0,on=1/0,xt=null,Na=!1,jo=null,qt=null,Fs=!1,Mt=null,_a=0,Un=0,No=null,ea=-1,ta=0;function ke(){return W&6?ae():ea!==-1?ea:ea=ae()}function Ht(t){return t.mode&1?W&2&&ge!==0?ge&-ge:sp.transition!==null?(ta===0&&(ta=Yd()),ta):(t=G,t!==0||(t=window.event,t=t===void 0?16:su(t.type)),t):1}function st(t,e,r,n){if(50<Un)throw Un=0,No=null,Error(O(185));xs(t,r,n),(!(W&2)||t!==me)&&(t===me&&(!(W&2)&&(Fa|=r),he===4&&Dt(t,ge)),Ie(t,n),r===1&&W===0&&!(e.mode&1)&&(on=ae()+500,Da&&er()))}function Ie(t,e){var r=t.callbackNode;sm(t,e);var n=oa(t,t===me?ge:0);if(n===0)r!==null&&Yl(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Yl(r),e===1)t.tag===0?np(Vc.bind(null,t)):Nu(Vc.bind(null,t)),Xm(function(){!(W&6)&&er()}),r=null;else{switch(Zd(n)){case 1:r=Jo;break;case 4:r=Qd;break;case 16:r=ia;break;case 536870912:r=Jd;break;default:r=ia}r=bh(r,mh.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function mh(t,e){if(ea=-1,ta=0,W&6)throw Error(O(327));var r=t.callbackNode;if(Xr()&&t.callbackNode!==r)return null;var n=oa(t,t===me?ge:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ka(t,n);else{e=n;var a=W;W|=2;var i=gh();(me!==t||ge!==e)&&(xt=null,on=ae()+500,ur(t,e));do try{_p();break}catch(l){ph(t,l)}while(!0);cl(),ja.current=i,W=a,le!==null?e=0:(me=null,ge=0,e=he)}if(e!==0){if(e===2&&(a=Qi(t),a!==0&&(n=a,e=_o(t,a))),e===1)throw r=us,ur(t,0),Dt(t,n),Ie(t,ae()),r;if(e===6)Dt(t,n);else{if(a=t.current.alternate,!(n&30)&&!jp(a)&&(e=ka(t,n),e===2&&(i=Qi(t),i!==0&&(n=i,e=_o(t,i))),e===1))throw r=us,ur(t,0),Dt(t,n),Ie(t,ae()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(O(345));case 2:ar(t,Ce,xt);break;case 3:if(Dt(t,n),(n&130023424)===n&&(e=_l+500-ae(),10<e)){if(oa(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){ke(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=no(ar.bind(null,t,Ce,xt),e);break}ar(t,Ce,xt);break;case 4:if(Dt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-nt(n);i=1<<o,o=e[o],o>a&&(a=o),n&=~i}if(n=a,n=ae()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bp(n/1960))-n,10<n){t.timeoutHandle=no(ar.bind(null,t,Ce,xt),n);break}ar(t,Ce,xt);break;case 5:ar(t,Ce,xt);break;default:throw Error(O(329))}}}return Ie(t,ae()),t.callbackNode===r?mh.bind(null,t):null}function _o(t,e){var r=zn;return t.current.memoizedState.isDehydrated&&(ur(t,e).flags|=256),t=ka(t,e),t!==2&&(e=Ce,Ce=r,e!==null&&ko(e)),t}function ko(t){Ce===null?Ce=t:Ce.push.apply(Ce,t)}function jp(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!at(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dt(t,e){for(e&=~Nl,e&=~Fa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-nt(e),n=1<<r;t[r]=-1,e&=~n}}function Vc(t){if(W&6)throw Error(O(327));Xr();var e=oa(t,0);if(!(e&1))return Ie(t,ae()),null;var r=ka(t,e);if(t.tag!==0&&r===2){var n=Qi(t);n!==0&&(e=n,r=_o(t,n))}if(r===1)throw r=us,ur(t,0),Dt(t,e),Ie(t,ae()),r;if(r===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ar(t,Ce,xt),Ie(t,ae()),null}function kl(t,e){var r=W;W|=1;try{return t(e)}finally{W=r,W===0&&(on=ae()+500,Da&&er())}}function xr(t){Mt!==null&&Mt.tag===0&&!(W&6)&&Xr();var e=W;W|=1;var r=We.transition,n=G;try{if(We.transition=null,G=1,t)return t()}finally{G=n,We.transition=r,W=e,!(W&6)&&er()}}function Sl(){$e=Gr.current,Z(Gr)}function ur(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Zm(r)),le!==null)for(r=le.return;r!==null;){var n=r;switch(il(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ha();break;case 3:sn(),Z(Oe),Z(be),pl();break;case 5:ml(n);break;case 4:sn();break;case 13:Z(te);break;case 19:Z(te);break;case 10:dl(n.type._context);break;case 22:case 23:Sl()}r=r.return}if(me=t,le=t=Wt(t.current,null),ge=$e=e,he=0,us=null,Nl=Fa=gr=0,Ce=zn=null,cr!==null){for(e=0;e<cr.length;e++)if(r=cr[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}cr=null}return t}function ph(t,e){do{var r=le;try{if(cl(),Ys.current=ba,wa){for(var n=re.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}wa=!1}if(pr=0,fe=ue=re=null,Mn=!1,ls=0,jl.current=null,r===null||r.return===null){he=1,us=e,le=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=ge,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=Tc(o);if(x!==null){x.flags&=-257,Oc(x,o,l,i,e),x.mode&1&&Pc(i,d,e),e=x,c=d;var v=e.updateQueue;if(v===null){var b=new Set;b.add(c),e.updateQueue=b}else v.add(c);break e}else{if(!(e&1)){Pc(i,d,e),El();break e}c=Error(O(426))}}else if(X&&l.mode&1){var C=Tc(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Oc(C,o,l,i,e),ol(an(c,l));break e}}i=c=an(c,l),he!==4&&(he=2),zn===null?zn=[i]:zn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Zu(i,c,e);Nc(i,y);break e;case 1:l=c;var p=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(qt===null||!qt.has(f)))){i.flags|=65536,e&=-e,i.lanes|=e;var g=Xu(i,l,e);Nc(i,g);break e}}i=i.return}while(i!==null)}yh(r)}catch(k){e=k,le===r&&r!==null&&(le=r=r.return);continue}break}while(!0)}function gh(){var t=ja.current;return ja.current=ba,t===null?ba:t}function El(){(he===0||he===3||he===2)&&(he=4),me===null||!(gr&268435455)&&!(Fa&268435455)||Dt(me,ge)}function ka(t,e){var r=W;W|=2;var n=gh();(me!==t||ge!==e)&&(xt=null,ur(t,e));do try{Np();break}catch(a){ph(t,a)}while(!0);if(cl(),W=r,ja.current=n,le!==null)throw Error(O(261));return me=null,ge=0,he}function Np(){for(;le!==null;)xh(le)}function _p(){for(;le!==null&&!Qf();)xh(le)}function xh(t){var e=wh(t.alternate,t,$e);t.memoizedProps=t.pendingProps,e===null?yh(t):le=e,jl.current=null}function yh(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=xp(r,e),r!==null){r.flags&=32767,le=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,le=null;return}}else if(r=gp(r,e,$e),r!==null){le=r;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);he===0&&(he=5)}function ar(t,e,r){var n=G,a=We.transition;try{We.transition=null,G=1,kp(t,e,r,n)}finally{We.transition=a,G=n}return null}function kp(t,e,r,n){do Xr();while(Mt!==null);if(W&6)throw Error(O(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(am(t,i),t===me&&(le=me=null,ge=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fs||(Fs=!0,bh(ia,function(){return Xr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=We.transition,We.transition=null;var o=G;G=1;var l=W;W|=4,jl.current=null,vp(t,r),hh(r,t),Hm(to),la=!!eo,to=eo=null,t.current=r,wp(r),Jf(),W=l,G=o,We.transition=i}else t.current=r;if(Fs&&(Fs=!1,Mt=t,_a=a),i=t.pendingLanes,i===0&&(qt=null),Xf(r.stateNode),Ie(t,ae()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Na)throw Na=!1,t=jo,jo=null,t;return _a&1&&t.tag!==0&&Xr(),i=t.pendingLanes,i&1?t===No?Un++:(Un=0,No=t):Un=0,er(),null}function Xr(){if(Mt!==null){var t=Zd(_a),e=We.transition,r=G;try{if(We.transition=null,G=16>t?16:t,Mt===null)var n=!1;else{if(t=Mt,Mt=null,_a=0,W&6)throw Error(O(331));var a=W;for(W|=4,L=t.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(L=d;L!==null;){var u=L;switch(u.tag){case 0:case 11:case 15:Fn(8,u,i)}var h=u.child;if(h!==null)h.return=u,L=h;else for(;L!==null;){u=L;var m=u.sibling,x=u.return;if(ch(u),u===d){L=null;break}if(m!==null){m.return=x,L=m;break}L=x}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var C=b.sibling;b.sibling=null,b=C}while(b!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fn(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,L=y;break e}L=i.return}}var p=t.current;for(L=p;L!==null;){o=L;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,L=f;else e:for(o=p;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ma(9,l)}}catch(k){se(l,l.return,k)}if(l===o){L=null;break e}var g=l.sibling;if(g!==null){g.return=l.return,L=g;break e}L=l.return}}if(W=a,er(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Ta,t)}catch{}n=!0}return n}finally{G=r,We.transition=e}}return!1}function qc(t,e,r){e=an(r,e),e=Zu(t,e,1),t=Vt(t,e,1),e=ke(),t!==null&&(xs(t,1,e),Ie(t,e))}function se(t,e,r){if(t.tag===3)qc(t,t,r);else for(;e!==null;){if(e.tag===3){qc(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qt===null||!qt.has(n))){t=an(r,t),t=Xu(e,t,1),e=Vt(e,t,1),t=ke(),e!==null&&(xs(e,1,t),Ie(e,t));break}}e=e.return}}function Sp(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ke(),t.pingedLanes|=t.suspendedLanes&r,me===t&&(ge&r)===r&&(he===4||he===3&&(ge&130023424)===ge&&500>ae()-_l?ur(t,0):Nl|=r),Ie(t,e)}function vh(t,e){e===0&&(t.mode&1?(e=Ps,Ps<<=1,!(Ps&130023424)&&(Ps=4194304)):e=1);var r=ke();t=St(t,e),t!==null&&(xs(t,e,r),Ie(t,r))}function Ep(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),vh(t,r)}function Cp(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(e),vh(t,r)}var wh;wh=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Oe.current)Te=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Te=!1,pp(t,e,r);Te=!!(t.flags&131072)}else Te=!1,X&&e.flags&1048576&&_u(e,pa,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Xs(t,e),t=e.pendingProps;var a=tn(e,be.current);Zr(e,r),a=xl(null,e,n,t,a,r);var i=yl();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ae(n)?(i=!0,fa(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,hl(e),a.updater=Ra,e.stateNode=a,a._reactInternals=e,uo(e,n,t,r),e=mo(null,e,n,!0,i,r)):(e.tag=0,X&&i&&al(e),Ne(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Xs(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Tp(n),t=Ze(n,t),a){case 0:e=fo(null,e,n,t,r);break e;case 1:e=$c(null,e,n,t,r);break e;case 11:e=Ac(null,e,n,t,r);break e;case 14:e=Ic(null,e,n,Ze(n.type,t),r);break e}throw Error(O(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ze(n,a),fo(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ze(n,a),$c(t,e,n,a,r);case 3:e:{if(nh(e),t===null)throw Error(O(387));n=e.pendingProps,i=e.memoizedState,a=i.element,Tu(t,e),ya(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=an(Error(O(423)),e),e=Dc(t,e,n,r,a);break e}else if(n!==a){a=an(Error(O(424)),e),e=Dc(t,e,n,r,a);break e}else for(De=Bt(e.stateNode.containerInfo.firstChild),Re=e,X=!0,tt=null,r=Cu(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rn(),n===a){e=Et(t,e,r);break e}Ne(t,e,n,r)}e=e.child}return e;case 5:return Ou(e),t===null&&oo(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,ro(n,a)?o=null:i!==null&&ro(n,i)&&(e.flags|=32),rh(t,e),Ne(t,e,o,r),e.child;case 6:return t===null&&oo(e),null;case 13:return sh(t,e,r);case 4:return fl(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=nn(e,null,n,r):Ne(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ze(n,a),Ac(t,e,n,a,r);case 7:return Ne(t,e,e.pendingProps,r),e.child;case 8:return Ne(t,e,e.pendingProps.children,r),e.child;case 12:return Ne(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,J(ga,n._currentValue),n._currentValue=o,i!==null)if(at(i.value,o)){if(i.children===a.children&&!Oe.current){e=Et(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=jt(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),lo(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),lo(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ne(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Zr(e,r),a=Ke(a),n=n(a),e.flags|=1,Ne(t,e,n,r),e.child;case 14:return n=e.type,a=Ze(n,e.pendingProps),a=Ze(n.type,a),Ic(t,e,n,a,r);case 15:return eh(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ze(n,a),Xs(t,e),e.tag=1,Ae(n)?(t=!0,fa(e)):t=!1,Zr(e,r),Yu(e,n,a),uo(e,n,a,r),mo(null,e,n,!0,t,r);case 19:return ah(t,e,r);case 22:return th(t,e,r)}throw Error(O(156,e.tag))};function bh(t,e){return Kd(t,e)}function Pp(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(t,e,r,n){return new Pp(t,e,r,n)}function Cl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tp(t){if(typeof t=="function")return Cl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Go)return 11;if(t===Ko)return 14}return 2}function Wt(t,e){var r=t.alternate;return r===null?(r=He(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ra(t,e,r,n,a,i){var o=2;if(n=t,typeof t=="function")Cl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rr:return hr(r.children,a,i,e);case Wo:o=8,a|=8;break;case $i:return t=He(12,r,e,a|2),t.elementType=$i,t.lanes=i,t;case Di:return t=He(13,r,e,a),t.elementType=Di,t.lanes=i,t;case Li:return t=He(19,r,e,a),t.elementType=Li,t.lanes=i,t;case Od:return za(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pd:o=10;break e;case Td:o=9;break e;case Go:o=11;break e;case Ko:o=14;break e;case At:o=16,n=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=He(o,r,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function hr(t,e,r,n){return t=He(7,t,n,e),t.lanes=r,t}function za(t,e,r,n){return t=He(22,t,n,e),t.elementType=Od,t.lanes=r,t.stateNode={isHidden:!1},t}function Ni(t,e,r){return t=He(6,t,null,e),t.lanes=r,t}function _i(t,e,r){return e=He(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Op(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=si(0),this.expirationTimes=si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Pl(t,e,r,n,a,i,o,l,c){return t=new Op(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=He(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hl(i),t}function Ap(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function jh(t){if(!t)return Qt;t=t._reactInternals;e:{if(jr(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ae(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var r=t.type;if(Ae(r))return ju(t,r,e)}return e}function Nh(t,e,r,n,a,i,o,l,c){return t=Pl(r,n,!0,t,a,i,o,l,c),t.context=jh(null),r=t.current,n=ke(),a=Ht(r),i=jt(n,a),i.callback=e??null,Vt(r,i,a),t.current.lanes=a,xs(t,a,n),Ie(t,n),t}function Ua(t,e,r,n){var a=e.current,i=ke(),o=Ht(a);return r=jh(r),e.context===null?e.context=r:e.pendingContext=r,e=jt(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Vt(a,e,o),t!==null&&(st(t,a,o,i),Js(t,a,o)),o}function Sa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Tl(t,e){Hc(t,e),(t=t.alternate)&&Hc(t,e)}function Ip(){return null}var _h=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ol(t){this._internalRoot=t}Ba.prototype.render=Ol.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Ua(t,e,null,null)};Ba.prototype.unmount=Ol.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xr(function(){Ua(null,t,null,null)}),e[kt]=null}};function Ba(t){this._internalRoot=t}Ba.prototype.unstable_scheduleHydration=function(t){if(t){var e=tu();t={blockedOn:null,target:t,priority:e};for(var r=0;r<$t.length&&e!==0&&e<$t[r].priority;r++);$t.splice(r,0,t),r===0&&nu(t)}};function Al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wc(){}function $p(t,e,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Sa(o);i.call(d)}}var o=Nh(e,n,t,0,null,!1,!1,"",Wc);return t._reactRootContainer=o,t[kt]=o.current,ns(t.nodeType===8?t.parentNode:t),xr(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Sa(c);l.call(d)}}var c=Pl(t,0,!1,null,null,!1,!1,"",Wc);return t._reactRootContainer=c,t[kt]=c.current,ns(t.nodeType===8?t.parentNode:t),xr(function(){Ua(e,c,r,n)}),c}function qa(t,e,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Sa(o);l.call(c)}}Ua(e,o,t,a)}else o=$p(r,e,t,a,n);return Sa(o)}Xd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Pn(e.pendingLanes);r!==0&&(Yo(e,r|1),Ie(e,ae()),!(W&6)&&(on=ae()+500,er()))}break;case 13:xr(function(){var n=St(t,1);if(n!==null){var a=ke();st(n,t,1,a)}}),Tl(t,1)}};Zo=function(t){if(t.tag===13){var e=St(t,134217728);if(e!==null){var r=ke();st(e,t,134217728,r)}Tl(t,134217728)}};eu=function(t){if(t.tag===13){var e=Ht(t),r=St(t,e);if(r!==null){var n=ke();st(r,t,e,n)}Tl(t,e)}};tu=function(){return G};ru=function(t,e){var r=G;try{return G=t,e()}finally{G=r}};Wi=function(t,e,r){switch(e){case"input":if(Fi(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=$a(n);if(!a)throw Error(O(90));Id(n),Fi(n,a)}}}break;case"textarea":Dd(t,r);break;case"select":e=r.value,e!=null&&Kr(t,!!r.multiple,e,!1)}};Bd=kl;Vd=xr;var Dp={usingClientEntryPoint:!1,Events:[vs,Ur,$a,zd,Ud,kl]},kn={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lp={bundleType:kn.bundleType,version:kn.version,rendererPackageName:kn.rendererPackageName,rendererConfig:kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ct.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wd(t),t===null?null:t.stateNode},findFiberByHostInstance:kn.findFiberByHostInstance||Ip,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zs.isDisabled&&zs.supportsFiber)try{Ta=zs.inject(Lp),ht=zs}catch{}}ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dp;ze.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Al(e))throw Error(O(200));return Ap(t,e,null,r)};ze.createRoot=function(t,e){if(!Al(t))throw Error(O(299));var r=!1,n="",a=_h;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Pl(t,1,!1,null,null,r,!1,n,a),t[kt]=e.current,ns(t.nodeType===8?t.parentNode:t),new Ol(e)};ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Wd(e),t=t===null?null:t.stateNode,t};ze.flushSync=function(t){return xr(t)};ze.hydrate=function(t,e,r){if(!Va(e))throw Error(O(200));return qa(null,t,e,!0,r)};ze.hydrateRoot=function(t,e,r){if(!Al(t))throw Error(O(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=_h;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Nh(e,null,t,1,r??null,a,!1,i,o),t[kt]=e.current,ns(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Ba(e)};ze.render=function(t,e,r){if(!Va(e))throw Error(O(200));return qa(null,t,e,!1,r)};ze.unmountComponentAtNode=function(t){if(!Va(t))throw Error(O(40));return t._reactRootContainer?(xr(function(){qa(null,null,t,!1,function(){t._reactRootContainer=null,t[kt]=null})}),!0):!1};ze.unstable_batchedUpdates=kl;ze.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Va(r))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return qa(t,e,r,!1,n)};ze.version="18.3.1-next-f1338f8080-20240426";function kh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kh)}catch(t){console.error(t)}}kh(),kd.exports=ze;var Rp=kd.exports,Sh,Gc=Rp;Sh=Gc.createRoot,Gc.hydrateRoot;const Eh=T.createContext(void 0),Mp=[{id:"1",email:"rmegaguimaraes@gmail.com",name:"Rui Guimarães",role:"admin",permissions:[{page:"producoes",canView:!0,canEdit:!0},{page:"preparar-componentes",canView:!0,canEdit:!0},{page:"gantt",canView:!0,canEdit:!0},{page:"registos",canView:!0,canEdit:!0},{page:"historico",canView:!0,canEdit:!0},{page:"apps-lomartex",canView:!0,canEdit:!0},{page:"controlo-qualidade",canView:!0,canEdit:!0},{page:"financeiro",canView:!0,canEdit:!0},{page:"users",canView:!0,canEdit:!0}],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],Fp=({children:t})=>{const[e,r]=T.useState({user:null,isAuthenticated:!1,loading:!0});T.useEffect(()=>{const l=localStorage.getItem("auth_user");if(l)try{const c=JSON.parse(l);r({user:c,isAuthenticated:!0,loading:!1})}catch{localStorage.removeItem("auth_user"),r({user:null,isAuthenticated:!1,loading:!1})}else r(c=>({...c,loading:!1}))},[]);const n=async l=>{try{const c=Mp.find(d=>d.email===l.email);if(c&&l.password==="mega$3311225"){const d={...c,last_login:new Date().toISOString()};return r({user:d,isAuthenticated:!0,loading:!1}),localStorage.setItem("auth_user",JSON.stringify(d)),!0}return!1}catch(c){return console.error("Login error:",c),!1}},a=()=>{r({user:null,isAuthenticated:!1,loading:!1}),localStorage.removeItem("auth_user")},i=l=>{if(!e.user)return!1;if(e.user.role==="admin")return!0;const c=e.user.permissions.find(d=>d.page===l);return(c==null?void 0:c.canView)||!1},o=l=>{if(!e.user)return!1;if(e.user.role==="admin")return!0;const c=e.user.permissions.find(d=>d.page===l);return(c==null?void 0:c.canEdit)||!1};return s.jsx(Eh.Provider,{value:{...e,login:n,logout:a,hasPageAccess:i,canEditPage:o},children:t})},hn=()=>{const t=T.useContext(Eh);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),F=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>T.createElement("svg",{ref:u,...zp,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Up(t)}`,l].join(" "),...d},[...e.map(([h,m])=>T.createElement(h,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=F("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=F("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=F("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=F("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=F("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=F("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=F("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=F("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=F("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=F("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=F("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=F("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=F("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=F("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=F("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=F("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=F("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=F("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=F("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=F("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=F("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=F("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=F("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=F("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=F("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=F("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=F("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=F("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=F("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=F("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=F("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=F("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=F("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=F("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=F("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=F("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=F("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=F("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=F("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=F("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=F("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=F("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),a0=()=>{const{login:t}=hn(),[e,r]=T.useState({email:"",password:""}),[n,a]=T.useState(!1),[i,o]=T.useState(!1),[l,c]=T.useState(""),d=async u=>{u.preventDefault(),o(!0),c("");try{await t(e)||c("Email ou palavra-passe incorretos")}catch{c("Erro ao fazer login. Tente novamente.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(Eo,{className:"w-8 h-8 text-white"})})}),s.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Sistema de Gestão de Produções"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Faça login para aceder ao sistema"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:u=>r(h=>({...h,email:u.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Introduza o seu email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Palavra-passe"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:e.password,onChange:u=>r(h=>({...h,password:u.target.value})),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Introduza a sua palavra-passe"}),s.jsx("button",{type:"button",onClick:()=>a(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:n?s.jsx(Qp,{className:"h-5 w-5 text-gray-400"}):s.jsx(Jt,{className:"h-5 w-5 text-gray-400"})})]})]})]}),l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-red-600",children:l})}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Zp,{className:"w-5 h-5 mr-2"}),"Entrar"]})})}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-xs text-gray-500",children:"Contacte o administrador para obter acesso"})})]})]})})},lt=({children:t,page:e,requireEdit:r=!1})=>{const{user:n,hasPageAccess:a,canEditPage:i}=hn();if(!n)return null;const o=a(e),l=i(e);return o?r&&!l?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full text-center",children:[s.jsx(vr,{className:"w-16 h-16 text-yellow-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Permissão Insuficiente"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Tem acesso de leitura, mas não pode editar esta página."}),s.jsx("p",{className:"text-sm text-gray-500",children:"Contacte o administrador para obter permissões de edição."})]})}):s.jsx(s.Fragment,{children:t}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full text-center",children:[s.jsx(Yp,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Negado"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Não tem permissão para aceder a esta página."}),s.jsx("p",{className:"text-sm text-gray-500",children:"Contacte o administrador para obter acesso."})]})})},i0=({isOpen:t,onToggle:e,currentPage:r,onPageChange:n})=>{const{hasPageAccess:a}=hn(),o=[{id:"producoes",label:"Produções",icon:Eo,description:"Gestão de produções"},{id:"preparar-componentes",label:"A preparar componentes",icon:On,description:"Componentes pendentes"},{id:"gantt",label:"Planeamento",icon:Bn,description:"Planeamento e timeline"},{id:"registos",label:"Registos",icon:Hn,description:"Gestão de dados"},{id:"historico",label:"Histórico",icon:Ir,description:"Eliminados e completos"},{id:"apps-lomartex",label:"Apps Lomartex",icon:Ch,description:"Ferramentas auxiliares"},{id:"controlo-qualidade",label:"Controlo de Qualidade",icon:vr,description:"Gestão de qualidade"},{id:"financeiro",label:"Financeiro",icon:qn,description:"Gestão financeira"},{id:"users",label:"Utilizadores",icon:Gt,description:"Gestão de utilizadores"}].filter(l=>a(l.id));return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:e}),s.jsxs("div",{className:`
        fixed left-0 top-0 h-full bg-white border-r border-gray-200 z-30 transition-all duration-300 ease-in-out
        ${t?"w-56":"w-14"}
        shadow-lg lg:shadow-none
      `,children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-100",children:[s.jsxs("div",{className:`flex items-center space-x-3 ${t?"opacity-100":"opacity-0"} transition-opacity duration-200`,children:[s.jsx(Eo,{className:"w-6 h-6 text-blue-600"}),s.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"ProduTech"})]}),s.jsx("button",{onClick:e,className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:t?s.jsx(Me,{className:"w-4 h-4"}):s.jsx(e0,{className:"w-4 h-4"})})]}),s.jsx("nav",{className:"p-2 space-y-1",children:o.map(l=>{const c=l.icon,d=r===l.id;return s.jsxs("button",{onClick:()=>n(l.id),title:t?"":l.label,className:`
                  w-full flex items-center space-x-2 p-2 rounded-lg transition-all duration-200 relative
                  ${d?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"}
                  ${t?"justify-start":"justify-center"}
                `,children:[d&&s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-600 rounded-r"}),s.jsx(c,{className:`w-4 h-4 ${d?"text-blue-600":""}`}),t&&s.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[s.jsx("span",{className:"font-medium text-sm truncate",children:l.label}),s.jsx("span",{className:"text-xs opacity-70 truncate",children:l.description})]})]},l.id)})})]})]})},o0=()=>s.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-6 py-3 z-10",children:s.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Criado por Rui Guimarães 2025"})}),l0=()=>{const{user:t,logout:e}=hn();if(!t)return null;const r=()=>{confirm("Tem certeza que deseja sair?")&&e()};return s.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 font-medium text-sm",children:t.name.split(" ").map(n=>n[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:t.email}),t.role==="admin"&&s.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded-full",children:[s.jsx(vr,{className:"w-3 h-3"}),s.jsx("span",{children:"Admin"})]})]})]})]}),s.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Sair do sistema",children:[s.jsx(Xp,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Sair"})]})]})})},c0=({children:t,currentPage:e,onPageChange:r})=>{const[n,a]=T.useState(!0);return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(i0,{isOpen:n,onToggle:()=>a(!n),currentPage:e,onPageChange:r}),s.jsxs("div",{className:`
        flex-1 transition-all duration-300 ease-in-out
        ${n?"ml-56":"ml-14"}
        pb-16
      `,children:[s.jsx(l0,{}),s.jsx("main",{className:"p-6 max-w-full",children:t})]}),s.jsx(o0,{})]})},wr=["Desenvolvimento","1º proto","2º proto","Size-Set","PPS","Produção","Pronto","Enviado"],ms=["Modelagem","Aguarda Componentes","FALTA COMPONENTES","Aguarda Malha","Com Defeito","Aguarda Comentários","Corte","Confecção","Transfers","Serviços Externos","Embalamento"],Ga=({isOpen:t,onClose:e,producao:r,onUpdateFlags:n})=>{if(!t||!r)return null;const a=()=>{const l=r.variantes.reduce((h,m)=>h+Object.values(m.tamanhos).reduce((x,v)=>x+v,0),0),c=Array.from(new Set(r.variantes.flatMap(h=>Object.keys(h.tamanhos)))).sort(),d=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Resumo de Produção - ${r.referenciaInterna}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
            .company { font-size: 24px; font-weight: bold; color: #333; }
            .contact { font-size: 14px; color: #666; margin-top: 5px; }
            .date { font-size: 12px; color: #666; margin-top: 5px; }
            .content { margin-top: 20px; }
            .section { margin-bottom: 20px; }
            .section-title { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
            .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
            .info-item { margin-bottom: 10px; }
            .label { font-weight: bold; color: #555; }
            .value { color: #333; }
            table { width: 100%; border-collapse: collapse; margin-top: 10px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f5f5f5; font-weight: bold; }
            .total { font-weight: bold; background-color: #f0f8ff; }
            .status { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
            .status-green { background-color: #d4edda; color: #155724; }
            .status-red { background-color: #f8d7da; color: #721c24; }
            .status-yellow { background-color: #fff3cd; color: #856404; }
            .status-blue { background-color: #d1ecf1; color: #0c5460; }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company">LOMARTEX</div>
            <div class="contact">info@lomartex.pt</div>
            <div class="date">${new Date().toLocaleDateString("pt-PT")} - ${new Date().toLocaleTimeString("pt-PT")}</div>
          </div>
          
          <div class="content">
            <div class="section">
              <div class="section-title">Resumo de Produção</div>
              <div class="info-grid">
                <div>
                  <div class="info-item">
                    <span class="label">Referência Interna:</span>
                    <span class="value">${r.referenciaInterna}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Referência Cliente:</span>
                    <span class="value">${r.referenciaCliente}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Marca:</span>
                    <span class="value">${r.marca}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Cliente:</span>
                    <span class="value">${r.cliente}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Tipo de Peça:</span>
                    <span class="value">${r.tipoPeca}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Género:</span>
                    <span class="value">${r.genero}</span>
                  </div>
                </div>
                <div>
                  <div class="info-item">
                    <span class="label">Etapa:</span>
                    <span class="value status status-blue">${r.etapa}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Estado:</span>
                    <span class="value status ${r.estado==="FALTA COMPONENTES"?"status-yellow":"status-green"}">${r.estado}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Data Início:</span>
                    <span class="value">${new Date(r.dataInicio).toLocaleDateString("pt-PT")}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Data Entrega:</span>
                    <span class="value">${new Date(r.dataEstimadaEntrega).toLocaleDateString("pt-PT")}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Local Produção:</span>
                    <span class="value">${r.localProducao==="Interno"?"Interno":r.empresaExterna||"Externo"}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Quantidade Total:</span>
                    <span class="value">${l} unidades</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-title">Descrição</div>
              <p>${r.descricao}</p>
            </div>

            <div class="section">
              <div class="section-title">Grelha de Quantidades</div>
              <table>
                <thead>
                  <tr>
                    <th>Cor</th>
                    ${c.map(h=>`<th>${h}</th>`).join("")}
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  ${r.variantes.map(h=>{const m=Object.values(h.tamanhos).reduce((x,v)=>x+v,0);return`
                      <tr>
                        <td>${h.cor}</td>
                        ${c.map(x=>`<td>${h.tamanhos[x]||"-"}</td>`).join("")}
                        <td class="total">${m}</td>
                      </tr>
                    `}).join("")}
                </tbody>
                <tfoot>
                  <tr class="total">
                    <td><strong>Total</strong></td>
                    ${c.map(h=>`<td><strong>${r.variantes.reduce((x,v)=>x+(v.tamanhos[h]||0),0)||"-"}</strong></td>`).join("")}
                    <td class="total"><strong>${l}</strong></td>
                  </tr>
                </tfoot>
              </table>
            </div>

            ${r.comments?`
              <div class="section">
                <div class="section-title">Comentários</div>
                <p style="white-space: pre-wrap;">${r.comments}</p>
              </div>
            `:""}

            ${r.linkOdoo?`
              <div class="section">
                <div class="section-title">Link Odoo</div>
                <p>${r.linkOdoo}</p>
              </div>
            `:""}
          </div>
        </body>
      </html>
    `,u=window.open("","_blank");u&&(u.document.write(d),u.document.close(),u.focus(),u.print())},i=r.variantes.reduce((l,c)=>l+Object.values(c.tamanhos).reduce((d,u)=>d+u,0),0),o=Array.from(new Set(r.variantes.flatMap(l=>Object.keys(l.tamanhos)))).sort();return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Yt,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Registo Completo - ",r.referenciaInterna]}),s.jsxs("p",{className:"text-gray-600",children:[r.marca," • ",r.cliente]})]})]}),s.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Imprimir resumo",children:[s.jsx(Ph,{className:"w-4 h-4"}),s.jsx("span",{children:"Imprimir"})]}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Estado Rápido"}),s.jsxs("div",{className:"flex items-center space-x-4 flex-wrap gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"problemas-detail",checked:r.problemas||!1,onChange:l=>{n==null||n({problemas:l.target.checked}),r&&(r.problemas=l.target.checked)},className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),s.jsxs("label",{htmlFor:"problemas-detail",className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[s.jsx(hs,{className:"w-4 h-4 text-red-600"}),s.jsx("span",{children:"Com Problemas"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"producao-detail",checked:r.emProducao||!1,onChange:l=>{n==null||n({emProducao:l.target.checked}),r&&(r.emProducao=l.target.checked)},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsxs("label",{htmlFor:"producao-detail",className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[s.jsx(Yt,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Em Produção"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"falta-componentes-detail",checked:r.estado==="FALTA COMPONENTES",onChange:l=>{n==null||n({faltaComponentes:l.target.checked})},className:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),s.jsxs("label",{htmlFor:"falta-componentes-detail",className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[s.jsx(Nt,{className:"w-4 h-4 text-yellow-600"}),s.jsx("span",{children:"Falta Componentes"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Peça"}),s.jsx("p",{className:"text-gray-900",children:r.tipoPeca})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Género"}),s.jsx("p",{className:"text-gray-900",children:r.genero})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),s.jsx("p",{className:"text-gray-900",children:r.descricao})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referência Cliente"}),s.jsx("p",{className:"text-gray-900",children:r.referenciaCliente})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade Total"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[i," unidades"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local de Produção"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[r.localProducao==="Interno"?s.jsx(Ha,{className:"w-4 h-4 text-blue-600"}):s.jsx(Il,{className:"w-4 h-4 text-orange-600"}),s.jsx("span",{className:"text-gray-900",children:r.localProducao==="Interno"?"Interno":r.empresaExterna||"Externo"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grelha de Quantidades por Cor/Tamanho"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 border-b border-gray-200",children:"Cor"}),o.map(l=>s.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 border-b border-gray-200",children:l},l)),s.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 border-b border-gray-200",children:"Total"})]})}),s.jsx("tbody",{children:r.variantes.map((l,c)=>{const d=Object.values(l.tamanhos).reduce((u,h)=>u+h,0);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:d0(l.cor)}}),s.jsx("span",{children:l.cor})]})}),o.map(u=>s.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-900 border-b border-gray-200",children:l.tamanhos[u]||"-"},u)),s.jsx("td",{className:"px-4 py-3 text-center text-sm font-bold text-blue-600 border-b border-gray-200",children:d})]},c)})}),s.jsx("tfoot",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:"Total"}),o.map(l=>{const c=r.variantes.reduce((d,u)=>d+(u.tamanhos[l]||0),0);return s.jsx("td",{className:"px-4 py-3 text-center text-sm font-bold text-gray-900",children:c||"-"},l)}),s.jsx("td",{className:"px-4 py-3 text-center text-sm font-bold text-blue-600",children:i})]})})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Odoo"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"url",value:r.linkOdoo||"",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700",placeholder:"Nenhum link configurado"}),r.linkOdoo&&s.jsxs("a",{href:r.linkOdoo,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(So,{className:"w-4 h-4"}),s.jsx("span",{children:"Abrir"})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:s.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fechar"})})]})]})})},d0=t=>({Preto:"#000000",Branco:"#FFFFFF","Azul Marinho":"#1e3a8a",Rosa:"#ec4899","Rosa Claro":"#f9a8d4",Cinzento:"#6b7280",Azul:"#3b82f6",Verde:"#10b981",Vermelho:"#ef4444",Amarelo:"#f59e0b"})[t]||"#6b7280",u0=({producoes:t,onEdit:e,onDelete:r,onUpdateFlags:n,showActions:a=!1})=>{const[i,o]=T.useState("all"),[l,c]=T.useState("all"),[d,u]=T.useState(""),[h,m]=T.useState({isOpen:!1,producao:null}),x=g=>({Desenvolvimento:"bg-yellow-100 text-yellow-800","1º proto":"bg-orange-100 text-orange-800","2º proto":"bg-orange-100 text-orange-800","Size-Set":"bg-blue-100 text-blue-800",PPS:"bg-purple-100 text-purple-800",Produção:"bg-indigo-100 text-indigo-800",Pronto:"bg-green-100 text-green-800",Enviado:"bg-gray-100 text-gray-800"})[g],v=g=>({Modelagem:"bg-yellow-100 text-yellow-700","Aguarda Componentes":"bg-orange-100 text-orange-700","Aguarda Malha":"bg-orange-100 text-orange-700","Com Defeito":"bg-red-100 text-red-700","Aguarda Comentários":"bg-amber-100 text-amber-700",Corte:"bg-blue-100 text-blue-700",Confecção:"bg-indigo-100 text-indigo-700",Transfers:"bg-purple-100 text-purple-700","Serviços Externos":"bg-teal-100 text-teal-700",Embalamento:"bg-green-100 text-green-700"})[g],b=g=>{const k=new Date,j=new Date(g).getTime()-k.getTime(),E=Math.ceil(j/(1e3*60*60*24));return E<=3&&E>=0},C=g=>g.variantes.reduce((k,S)=>k+Object.values(S.tamanhos).reduce((j,E)=>j+E,0),0),y=g=>Array.from(new Set(g.variantes.flatMap(S=>Object.keys(S.tamanhos)))).sort().join(", "),p=(g,k,S)=>{k==="faltaComponentes"?n==null||n(g,{faltaComponentes:S}):n==null||n(g,{[k]:S})},f=T.useMemo(()=>t.filter(g=>{const k=i==="all"||g.etapa===i,S=l==="all"||g.estado===l,j=d===""||g.marca.toLowerCase().includes(d.toLowerCase())||g.cliente.toLowerCase().includes(d.toLowerCase())||g.referenciaInterna.toLowerCase().includes(d.toLowerCase())||g.referenciaCliente.toLowerCase().includes(d.toLowerCase())||g.descricao.toLowerCase().includes(d.toLowerCase());return k&&S&&j}).sort((g,k)=>new Date(g.dataInicio).getTime()-new Date(k.dataInicio).getTime()),[i,l,d,t]);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Wa,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar por marca, cliente, referência...",value:d,onChange:g=>u(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yr,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:i,onChange:g=>o(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todas as etapas"}),wr.map(g=>s.jsx("option",{value:g,children:g},g))]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yr,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:l,onChange:g=>c(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todos os estados"}),ms.map(g=>s.jsx("option",{value:g,children:g},g))]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4",children:f.map(g=>s.jsxs("div",{className:`
              rounded-lg border p-4 hover:shadow-md transition-all duration-200 relative overflow-hidden
              ${g.problemas?"blink-problems":g.estado==="FALTA COMPONENTES"?"bg-yellow-100 border-yellow-300":b(g.dataEstimadaEntrega)?"bg-red-50 border-red-300 border-l-4 border-l-red-500":"bg-white border-gray-200"}
            `,children:[s.jsxs("div",{className:"absolute top-2 right-2 flex flex-col space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("input",{type:"checkbox",id:`problemas-${g.id}`,checked:g.problemas||!1,onChange:k=>p(g.id,"problemas",k.target.checked),className:"w-3 h-3 text-red-600 border-gray-300 rounded focus:ring-red-500",title:"Marcar como tendo problemas"}),s.jsx(hs,{className:`w-3 h-3 ${g.problemas?"text-red-600":"text-gray-300"}`})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("input",{type:"checkbox",id:`producao-${g.id}`,checked:g.emProducao||!1,onChange:k=>p(g.id,"emProducao",k.target.checked),className:"w-3 h-3 text-green-600 border-gray-300 rounded focus:ring-green-500",title:"Marcar como em produção"}),s.jsx(Yt,{className:`w-3 h-3 ${g.emProducao?"text-green-600":"text-gray-300"}`})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("input",{type:"checkbox",id:`falta-componentes-${g.id}`,checked:g.estado==="FALTA COMPONENTES",onChange:k=>p(g.id,"faltaComponentes",k.target.checked),className:"w-3 h-3 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500",title:"Marcar como falta componentes"}),s.jsx(Nt,{className:`w-3 h-3 ${g.estado==="FALTA COMPONENTES"?"text-yellow-600":"text-gray-300"}`})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("input",{type:"checkbox",id:`faturado-${g.id}`,checked:g.faturado||!1,onChange:k=>p(g.id,"faturado",k.target.checked),className:"w-3 h-3 text-blue-600 border-gray-300 rounded focus:ring-blue-500",title:"Marcar como faturado"}),s.jsx(Jp,{className:`w-3 h-3 ${g.faturado?"text-blue-600":"text-gray-300"}`,title:"Faturado"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("input",{type:"checkbox",id:`pago-${g.id}`,checked:g.pago||!1,onChange:k=>p(g.id,"pago",k.target.checked),className:"w-3 h-3 text-green-600 border-gray-300 rounded focus:ring-green-500",title:"Marcar como pago"}),s.jsx(qn,{className:`w-3 h-3 ${g.pago?"text-green-600":"text-gray-300"}`,title:"Pago"})]})]}),s.jsx("div",{className:"flex items-start justify-between mb-3 pr-16",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight mb-1",children:g.referenciaInterna}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${x(g.etapa)}`,children:g.etapa}),s.jsx("br",{}),s.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${v(g.estado)}`,children:g.estado})]})]})}),s.jsxs("div",{className:"space-y-1.5 text-xs text-gray-600 mb-3",children:[s.jsx("p",{className:"font-medium text-gray-900 text-sm leading-tight",children:g.descricao}),s.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Tamanhos:"}),s.jsx("span",{className:"ml-1 text-gray-900 font-medium",children:y(g)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Qtd Total:"}),s.jsx("span",{className:"ml-1 font-bold text-blue-600 text-sm",children:C(g)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Início:"}),s.jsx("span",{className:"ml-1 text-gray-900 font-medium",children:new Date(g.dataInicio).toLocaleDateString("pt-PT")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Entrega:"}),s.jsx("span",{className:"ml-1 font-bold text-red-700",children:new Date(g.dataEstimadaEntrega).toLocaleDateString("pt-PT")})]})]}),s.jsxs("div",{className:"flex items-center space-x-1 pt-1",children:[g.localProducao==="Interno"?s.jsx(Ha,{className:"w-3 h-3 text-blue-600"}):s.jsx(Il,{className:"w-3 h-3 text-orange-600"}),s.jsx("span",{className:"text-gray-500",children:"Local:"}),s.jsx("span",{className:"text-gray-900 font-medium",children:g.localProducao==="Interno"?"Interno":g.empresaExterna||"Externo"})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[s.jsxs("button",{onClick:()=>m({isOpen:!0,producao:g}),className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-medium",children:[s.jsx(Jt,{className:"w-3 h-3"}),s.jsx("span",{className:"text-xs",children:"Resumo"})]}),a&&s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>e==null?void 0:e(g),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar registo completo",children:s.jsx(rt,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>r==null?void 0:r(g.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(_e,{className:"w-3 h-3"})})]})]}),s.jsx("div",{className:`
              absolute bottom-0 left-0 right-0 py-0.5 px-2 text-center text-xs font-bold tracking-wide
              ${g.emProducao?"bg-green-600 text-white":g.problemas?"bg-red-600 text-white":"bg-gray-400 text-white"}
            `,children:g.emProducao?"EM PRODUÇÃO":g.problemas?"COM PROBLEMAS":"PARADO"})]},g.id))}),f.length===0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 text-center py-8",children:[s.jsx(Yt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Nenhuma produção encontrada"})]}),s.jsx(Ga,{isOpen:h.isOpen,onClose:()=>m({isOpen:!1,producao:null}),producao:h.producao,onUpdateFlags:g=>{h.producao&&n&&n(h.producao.id,g)}})]})},h0="modulepreload",f0=function(t){return"/"+t},Jc={},bs=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=f0(c),c in Jc)return;Jc[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":h0,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,x)=>{h.addEventListener("load",m),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},m0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>bs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class $l extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class p0 extends $l{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yc extends $l{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zc extends $l{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Co;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Co||(Co={}));var g0=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class x0{constructor(e,{headers:r={},customFetch:n,region:a=Co.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=m0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return g0(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(b=>{throw new p0(b)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new Yc(h);if(!h.ok)throw new Zc(h);let x=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return x==="application/json"?v=yield h.json():x==="application/octet-stream"?v=yield h.blob():x==="text/event-stream"?v=h:x==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof Zc||a instanceof Yc?a.context:void 0}}})}}var Pe={},Dl={},Ka={},js={},Qa={},Ja={},y0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ln=y0();const v0=ln.fetch,Ah=ln.fetch.bind(ln),Ih=ln.Headers,w0=ln.Request,b0=ln.Response,fn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ih,Request:w0,Response:b0,default:Ah,fetch:v0},Symbol.toStringTag,{value:"Module"})),j0=df(fn);var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});let N0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ya.default=N0;var $h=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ja,"__esModule",{value:!0});const _0=$h(j0),k0=$h(Ya);let S0=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=_0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,h=null,m=null,x=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=p:h=JSON.parse(p))}const C=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");C&&y&&y.length>1&&(m=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,x=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const C=await i.text();try{u=JSON.parse(C),Array.isArray(u)&&i.status===404&&(h=[],u=null,x=200,v="OK")}catch{i.status===404&&C===""?(x=204,v="No Content"):u={message:C}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,x=200,v="OK"),u&&this.shouldThrowOnError)throw new k0.default(u)}return{error:u,data:h,count:m,status:x,statusText:v}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};Ja.default=S0;var E0=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qa,"__esModule",{value:!0});const C0=E0(Ja);let P0=class extends C0.default{select(e){let r=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Qa.default=P0;var T0=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(js,"__esModule",{value:!0});const O0=T0(Qa);let A0=class extends O0.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};js.default=A0;var I0=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ka,"__esModule",{value:!0});const Sn=I0(js);let $0=class{constructor(e,{headers:r={},schema:n,fetch:a}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(e,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Sn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Sn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Sn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Sn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Sn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ka.default=$0;var Dh=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dl,"__esModule",{value:!0});const D0=Dh(Ka),L0=Dh(js);let R0=class Lh{constructor(e,{headers:r={},schema:n,fetch:a}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new D0.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Lh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",d=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new L0.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Dl.default=R0;var mn=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.PostgrestError=Pe.PostgrestBuilder=Pe.PostgrestTransformBuilder=Pe.PostgrestFilterBuilder=Pe.PostgrestQueryBuilder=Pe.PostgrestClient=void 0;const Rh=mn(Dl);Pe.PostgrestClient=Rh.default;const Mh=mn(Ka);Pe.PostgrestQueryBuilder=Mh.default;const Fh=mn(js);Pe.PostgrestFilterBuilder=Fh.default;const zh=mn(Qa);Pe.PostgrestTransformBuilder=zh.default;const Uh=mn(Ja);Pe.PostgrestBuilder=Uh.default;const Bh=mn(Ya);Pe.PostgrestError=Bh.default;var M0=Pe.default={PostgrestClient:Rh.default,PostgrestQueryBuilder:Mh.default,PostgrestFilterBuilder:Fh.default,PostgrestTransformBuilder:zh.default,PostgrestBuilder:Uh.default,PostgrestError:Bh.default};const{PostgrestClient:F0,PostgrestQueryBuilder:iy,PostgrestFilterBuilder:oy,PostgrestTransformBuilder:ly,PostgrestBuilder:cy,PostgrestError:dy}=M0;class z0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const U0="2.15.4",B0=`realtime-js/${U0}`,V0="1.0.0",Po=1e4,q0=1e3,H0=100;var Wn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wn||(Wn={}));var ce;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ce||(ce={}));var et;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(et||(et={}));var To;(function(t){t.websocket="websocket"})(To||(To={}));var or;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(or||(or={}));class W0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+a));o=o+a;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Vh{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Q||(Q={}));const Xc=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=G0(o,t,e,a),i),{})},G0=(t,e,r,n)=>{const a=e.find(l=>l.name===t),i=a==null?void 0:a.type,o=r[t];return i&&!n.includes(i)?qh(i,o):Oo(o)},qh=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Y0(e,r)}switch(t){case Q.bool:return K0(e);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return Q0(e);case Q.json:case Q.jsonb:return J0(e);case Q.timestamp:return Z0(e);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return Oo(e);default:return Oo(e)}},Oo=t=>t,K0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Q0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},J0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Y0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>qh(e,l))}return t},Z0=t=>typeof t=="string"?t.replace(" ","T"):t,Hh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ki{constructor(e,r,n={},a=Po){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ed;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ed||(ed={}));class Gn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gn.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Gn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Gn.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(C=>C.presence_ref),x=h.map(C=>C.presence_ref),v=u.filter(C=>x.indexOf(C.presence_ref)<0),b=h.filter(C=>m.indexOf(C.presence_ref)<0);v.length>0&&(l[d]=v),b.length>0&&(c[d]=b)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(e,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(x=>x.presence_ref),m=u.filter(x=>h.indexOf(x.presence_ref)<0);e[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var td;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(td||(td={}));var Kn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Kn||(Kn={}));var yt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class Ll{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ki(this,et.join,this.params,this.timeout),this.rejoinTimer=new Vh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(et.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Gn(this),this.broadcastEndpointURL=Hh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ce.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Kn.PRESENCE]&&this.bindings[Kn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(yt.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(yt.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var v;if(this.socket.setAuth(),x===void 0){e==null||e(yt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,C=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,y=[];for(let p=0;p<C;p++){const f=b[p],{filter:{event:g,schema:k,table:S,filter:j}}=f,E=x&&x[p];if(E&&E.event===g&&E.schema===k&&E.table===S&&E.filter===j)y.push(Object.assign(Object.assign({},f),{id:E.id}));else{this.unsubscribe(),this.state=ce.errored,e==null||e(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(yt.SUBSCRIBED);return}}).receive("error",x=>{this.state=ce.errored,e==null||e(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===ce.joined&&e===Kn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ce.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(et.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new ki(this,et.leave,{},e),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ce.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ki(this,e,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>H0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=et;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var v,b,C;return((v=x.filter)===null||v===void 0?void 0:v.event)==="*"||((C=(b=x.filter)===null||b===void 0?void 0:b.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(x=>x.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var v,b,C,y,p,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const g=x.id,k=(v=x.filter)===null||v===void 0?void 0:v.event;return g&&((b=r.ids)===null||b===void 0?void 0:b.includes(g))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const g=(p=(y=x==null?void 0:x.filter)===null||y===void 0?void 0:y.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return g==="*"||g===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:b,table:C,commit_timestamp:y,type:p,errors:f}=v;m=Object.assign(Object.assign({},{schema:b,table:C,commit_timestamp:y,eventType:p,new:{},old:{},errors:f}),this._getPayloadRecords(v))}x.callback(m,n)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Ll.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(et.close,{},e)}_onError(e){this._on(et.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Xc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Xc(e.columns,e.old_record)),r}}const Si=()=>{},Us={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},X0=[1e3,2e3,5e3,1e4],eg=1e4,tg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rg{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Po,this.transport=null,this.heartbeatIntervalMs=Us.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Si,this.ref=0,this.reconnectTimer=null,this.logger=Si,this.conn=null,this.sendBuffer=[],this.serializer=new W0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>bs(async()=>{const{default:l}=await Promise.resolve().then(()=>fn);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${To.websocket}`,this.httpEndpoint=Hh(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=z0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:V0}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wn.connecting:return or.Connecting;case Wn.open:return or.Open;case Wn.closing:return or.Closing;default:return or.Closed}}isConnected(){return this.connectionState()===or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Ll(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(q0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Us.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(et.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([tg],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:B0};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(et.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Vh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Us.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,a,i,o,l,c,d,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Po,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Us.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Si,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>X0[h-1]||eg,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(h,m)=>m(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Rl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function de(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ng extends Rl{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ao extends Rl{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var sg=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Wh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>bs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ag=()=>sg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield bs(()=>Promise.resolve().then(()=>fn),void 0)).Response:Response}),Io=t=>{if(Array.isArray(t))return t.map(r=>Io(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=Io(n)}),e},ig=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var _r=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Ei=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),og=(t,e,r)=>_r(void 0,void 0,void 0,function*(){const n=yield ag();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const i=t.status||500,o=(a==null?void 0:a.statusCode)||i+"";e(new ng(Ei(a),i,o))}).catch(a=>{e(new Ao(Ei(a),a))}):e(new Ao(Ei(t),t))}),lg=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?a:(ig(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function Ns(t,e,r,n,a,i){return _r(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,lg(e,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>og(c,l,n))})})}function Ea(t,e,r,n){return _r(this,void 0,void 0,function*(){return Ns(t,"GET",e,r,n)})}function dt(t,e,r,n,a){return _r(this,void 0,void 0,function*(){return Ns(t,"POST",e,n,a,r)})}function $o(t,e,r,n,a){return _r(this,void 0,void 0,function*(){return Ns(t,"PUT",e,n,a,r)})}function cg(t,e,r,n){return _r(this,void 0,void 0,function*(){return Ns(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Gh(t,e,r,n,a){return _r(this,void 0,void 0,function*(){return Ns(t,"DELETE",e,n,a,r)})}var je=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const dg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ug{constructor(e,r={},n,a){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Wh(a)}uploadOrUpdate(e,r,n,a){return je(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},rd),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(e=="PUT"?$o:dt)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(de(i))return{data:null,error:i};throw i}})}upload(e,r,n){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return je(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:rd.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield $o(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(de(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return je(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield dt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Rl("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}update(e,r,n){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return je(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}})}copy(e,r,n){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return je(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield dt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return je(this,void 0,void 0,function*(){try{const a=yield dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}})}download(e,r){return je(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ea(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(de(l))return{data:null,error:l};throw l}})}info(e){return je(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ea(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Io(n),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}exists(e){return je(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield cg(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(de(n)&&n instanceof Ao){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return je(this,void 0,void 0,function*(){try{return{data:yield Gh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}list(e,r,n){return je(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},dg),r),{prefix:e||""});return{data:yield dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}})}listV2(e,r){return je(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield dt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const hg="2.11.0",fg={"X-Client-Info":`storage-js/${hg}`};var Cr=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class mg{constructor(e,r={},n,a){const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},fg),r),this.fetch=Wh(n)}listBuckets(){return Cr(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(de(e))return{data:null,error:e};throw e}})}getBucket(e){return Cr(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Cr(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Cr(this,void 0,void 0,function*(){try{return{data:yield $o(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Cr(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Cr(this,void 0,void 0,function*(){try{return{data:yield Gh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}}class pg extends mg{constructor(e,r={},n,a){super(e,r,n,a)}from(e){return new ug(this.url,this.headers,e,this.fetch)}}const gg="2.57.0";let An="";typeof Deno<"u"?An="deno":typeof document<"u"?An="web":typeof navigator<"u"&&navigator.product==="ReactNative"?An="react-native":An="node";const xg={"X-Client-Info":`supabase-js-${An}/${gg}`},yg={headers:xg},vg={schema:"public"},wg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bg={};var jg=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Ng=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ah:e=fetch,(...r)=>e(...r)},_g=()=>typeof Headers>"u"?Ih:Headers,kg=(t,e,r)=>{const n=Ng(r),a=_g();return(i,o)=>jg(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var Sg=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function Eg(t){return t.endsWith("/")?t:t+"/"}function Cg(t,e){var r,n;const{db:a,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Sg(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const Kh="2.71.1",$r=30*1e3,Do=3,Ci=Do*$r,Pg="http://localhost:9999",Tg="supabase.auth.token",Og={"X-Client-Info":`gotrue-js/${Kh}`},Lo="X-Supabase-Api-Version",Qh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ag=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ig=10*60*1e3;class Ml extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function U(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class $g extends Ml{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Dg(t){return U(t)&&t.name==="AuthApiError"}class Jh extends Ml{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class tr extends Ml{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}}class Ot extends tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Lg(t){return U(t)&&t.name==="AuthSessionMissingError"}class Bs extends tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vs extends tr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qs extends tr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rg(t){return U(t)&&t.name==="AuthImplicitGrantRedirectError"}class nd extends tr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ro extends tr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Pi(t){return U(t)&&t.name==="AuthRetryableFetchError"}class sd extends tr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Mo extends tr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ca="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ad=` 	
\r=`.split(""),Mg=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ad.length;e+=1)t[ad[e].charCodeAt(0)]=-2;for(let e=0;e<Ca.length;e+=1)t[Ca[e].charCodeAt(0)]=e;return t})();function id(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ca[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ca[n]),e.queuedBits-=6}}function Yh(t,e,r){const n=Mg[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function od(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Ug(o,n,r)};for(let o=0;o<t.length;o+=1)Yh(t.charCodeAt(o),a,i);return e.join("")}function Fg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function zg(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Fg(n,e)}}function Ug(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Bg(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Yh(t.charCodeAt(a),r,n);return new Uint8Array(e)}function Vg(t){const e=[];return zg(t,r=>e.push(r)),new Uint8Array(e)}function qg(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>id(a,r,n)),id(null,r,n),e.join("")}function Hg(t){return Math.round(Date.now()/1e3)+t}function Wg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ye=()=>typeof window<"u"&&typeof document<"u",rr={tested:!1,writable:!1},Zh=()=>{if(!Ye())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rr.tested)return rr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),rr.tested=!0,rr.writable=!0}catch{rr.tested=!0,rr.writable=!1}return rr.writable};function Gg(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const Xh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>bs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Kg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Dr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},nr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Tt=async(t,e)=>{await t.removeItem(e)};class Za{constructor(){this.promise=new Za.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Za.promiseConstructor=Promise;function Ti(t){const e=t.split(".");if(e.length!==3)throw new Mo("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Ag.test(e[n]))throw new Mo("JWT not in base64url format");return{header:JSON.parse(od(e[0])),payload:JSON.parse(od(e[1])),signature:Bg(e[2]),raw:{header:e[0],payload:e[1]}}}async function Qg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Jg(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function Yg(t){return("0"+t.toString(16)).substr(-2)}function Zg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,Yg).join("")}async function Xg(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function ex(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Xg(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pr(t,e,r=!1){const n=Zg();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Dr(t,`${e}-code-verifier`,a);const i=await ex(n);return[i,n===i?"plain":"s256"]}const tx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rx(t){const e=t.headers.get(Lo);if(!e||!e.match(tx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function sx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ax=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tr(t){if(!ax.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Oi(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ld(t){return JSON.parse(JSON.stringify(t))}var ix=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};const ir=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ox=[502,503,504];async function cd(t){var e;if(!Kg(t))throw new Ro(ir(t),0);if(ox.includes(t.status))throw new Ro(ir(t),t.status);let r;try{r=await t.json()}catch(i){throw new Jh(ir(i),i)}let n;const a=rx(t);if(a&&a.getTime()>=Qh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new sd(ir(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ot}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new sd(ir(r),t.status,r.weak_password.reasons);throw new $g(ir(r),t.status||500,n)}const lx=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function q(t,e,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Lo]||(i[Lo]=Qh["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await cx(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function cx(t,e,r,n,a,i){const o=lx(e,n,a,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Ro(ir(c),0)}if(l.ok||await cd(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await cd(c)}}function gt(t){var e;let r=null;fx(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Hg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function dd(t){const e=gt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function dx(t){return{data:t,error:null}}function ux(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=t,o=ix(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function hx(t){return t}function fx(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ai=["global","local","others"];var mx=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};class px{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Xh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Ai[0]){if(Ai.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ai.join(", ")}`);try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Lt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=mx(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:ux,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(U(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:hx});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(v.split(";")[1].split("=")[1]);d[`${C}Page`]=b}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(U(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Tr(e);try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Tr(e);try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Lt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Tr(e);try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Lt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Tr(e.userId);try{const{data:r,error:n}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(U(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Tr(e.userId),Tr(e.id);try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}}function ud(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function gx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Or={debug:!!(globalThis&&Zh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ef extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xx extends ef{}async function yx(t,e,r){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Or.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Or.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}gx();const vx={url:Pg,storageKey:Tg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Og,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hd(t,e,r){return await r()}const Ar={};class ps{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ps.nextInstanceID,ps.nextInstanceID+=1,this.instanceID>0&&Ye()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},vx),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new px({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Xh(a.fetch),this.lock=a.lock||hd,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ye()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=yx:this.lock=hd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Zh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ud(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=ud(this.memoryStorage)),Ye()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Ar[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ar[this.storageKey]=Object.assign(Object.assign({},Ar[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ar[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ar[this.storageKey]=Object.assign(Object.assign({},Ar[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Gg(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ye()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Rg(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return U(r)?{error:r}:{error:new Jh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:gt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,a;try{let i;if("email"in e){const{email:u,password:h,options:m}=e;let x=null,v=null;this.flowType==="pkce"&&([x,v]=await Pr(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:v},xform:gt})}else if("phone"in e){const{phone:u,password:h,options:m}=e;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:gt})}else throw new Vs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dd})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dd})}else throw new Vs("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Bs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(U(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,a,i,o,l,c,d,u,h,m,x;let v,b;if("message"in e)v=e.message,b=e.signature;else{const{chain:C,wallet:y,statement:p,options:f}=e;let g;if(Ye())if(typeof y=="object")g=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))g=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=y}const k=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in g&&g.signIn){const S=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),p?{statement:p}:null));let j;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")j=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)j=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)v=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),b=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in g)||typeof g.signMessage!="function"||!("publicKey"in g)||typeof g!="object"||!g.publicKey||!("toBase58"in g.publicKey)||typeof g.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(u=f==null?void 0:f.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const S=await g.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=S}}try{const{data:C,error:y}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:qg(b)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:gt});if(y)throw y;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Bs}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:y})}catch(C){if(U(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const r=await nr(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:gt});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Bs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(U(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=e,l=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:gt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Bs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(U(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Pr(this.storage,this.storageKey));const{error:h}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Vs("You must provide either an email or phone number.")}catch(l){if(U(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:gt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(U(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Pr(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:dx})}catch(i){if(U(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ot;const{error:a}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(U(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:o}=await q(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:o,error:l}=await q(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Vs("You must provide either an email or phone number and a type")}catch(r){if(U(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await nr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ci:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await nr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Oi()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lt}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ot}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Lt})})}catch(r){if(U(r))return Lg(r)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Ot;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Pr(this.storage,this.storageKey));const{data:d,error:u}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Lt});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ot;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Ti(e.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(U(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ot;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(U(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ye())throw new qs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new nd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new nd("No code detected.");const{data:p,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const g=new URL(window.location.href);return g.searchParams.delete("code"),window.history.replaceState(window.history.state,"",g.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new qs("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const x=m-u;x*1e3<=$r&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const v=m-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,u);const{data:b,error:C}=await this._getUser(i);if(C)throw C;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(U(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await nr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Dg(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Wg(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Pr(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(U(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:m}=i;if(m)throw m;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Ye()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(U(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(U(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Jg(async a=>(a>0&&await Qg(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gt})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Pi(i)&&Date.now()+o-n<$r})}catch(n){if(this._debug(r,"error",n),U(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ye()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await nr(this.storage,this.storageKey);if(a&&this.userStorage){let o=await nr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Dr(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Oi()}else if(a&&!a.user&&!a.user){const o=await nr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Tt(this.storage,this.storageKey+"-user"),await Dr(this.storage,this.storageKey,a)):a.user=Oi()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ci;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ci}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Pi(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ot;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Za;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ot;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),U(i)){const o={session:null,error:i};return Pi(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Dr(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=ld(a);await Dr(this.storage,this.storageKey,i)}else{const a=ld(r);await Dr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ye()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$r);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/$r);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${$r}ms, refresh threshold is ${Do} ticks`),a<=Do&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ef)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ye()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Pr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(U(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await q(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(U(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(U(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(U(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ti(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+Ig>a)return n;const{data:i,error:o}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:x,error:v}=await this.getSession();if(v||!x.session)return{data:null,error:v};n=x.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Ti(n);r!=null&&r.allowExpired||nx(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:a,signature:o},error:null}}const u=sx(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Vg(`${l}.${c}`)))throw new Mo("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}}ps.nextInstanceID=0;const wx=ps;class bx extends wx{constructor(e){super(e)}}var jx=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Nx{constructor(e,r,n){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Eg(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:vg,realtime:bg,auth:Object.assign(Object.assign({},wg),{storageKey:d}),global:yg},h=Cg(n??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=kg(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new F0(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new pg(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new x0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return jx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},u,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bx({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),u),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new rg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _x=(t,e,r)=>new Nx(t,e,r);function kx(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}kx()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Sx="https://lwjpgpgcbpkorntsjcpk.supabase.co",Ex="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx3anBncGdjYnBrb3JudHNqY3BrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3Mzc3MDEsImV4cCI6MjA3MjMxMzcwMX0.HqROR3YI2G9BPVv-lJcFN1ZgIaVvyBetrOeghPICiQQ",ie=_x(Sx,Ex),Cx=(t,e,r=[])=>{var a,i;const n=e.reduce((o,l)=>{const c=o.find(d=>d.cor===l.cor);return c?c.tamanhos[l.tamanho]=l.quantidade:o.push({cor:l.cor,tamanhos:{[l.tamanho]:l.quantidade}}),o},[]);return{id:t.id,marca:((a=t.marcas)==null?void 0:a.nome)||"",cliente:((i=t.clientes)==null?void 0:i.nome)||"",referenciaInterna:t.referencia_interna,referenciaCliente:t.referencia_cliente,descricao:t.descricao,tipoPeca:t.tipo_peca,genero:t.genero,variantes:n,etapa:t.etapa,estado:t.estado,dataInicio:t.data_inicio,dataPrevisao:t.data_previsao,dataEstimadaEntrega:t.data_estimada_entrega,emProducao:t.em_producao,problemas:t.problemas,localProducao:t.local_producao,empresaExterna:t.empresa_externa,linkOdoo:t.link_odoo,comments:t.comments,pago:t.pago,fastprod:t.fastprod,pagoParcial:t.pago_parcial,pagamentos:t.pagamentos||[],valorPago:t.valor_pago,valorRestante:t.valor_restante,observacoesFinanceiras:t.observacoes_financeiras,numeroFatura:t.numero_fatura,dataFatura:t.data_fatura,valorFatura:t.valor_fatura,bomFiles:r.map(o=>({id:o.id,name:o.nome,url:o.url,uploadDate:o.upload_date}))}},Px=async()=>{try{const{data:t,error:e}=await ie.from("clientes").select("*").order("nome");if(e)throw e;const{data:r,error:n}=await ie.from("marcas").select("*");if(n)throw n;return t.map(a=>({id:a.id,nome:a.nome,marcas:r.filter(i=>i.cliente_id===a.id).map(i=>i.nome)}))}catch(t){return console.error("Error fetching clientes:",t),[]}},Tx=async t=>{try{const{data:e,error:r}=await ie.from("clientes").insert({nome:t.nome}).select().single();if(r)throw r;const n=t.marcas.map(i=>({nome:i,cliente_id:e.id})),{error:a}=await ie.from("marcas").insert(n);if(a)throw a;return{id:e.id,nome:e.nome,marcas:t.marcas}}catch(e){throw console.error("Error creating cliente:",e),e}},Ox=async(t,e)=>{try{const{error:r}=await ie.from("clientes").update({nome:e.nome}).eq("id",t);if(r)throw r;const{error:n}=await ie.from("marcas").delete().eq("cliente_id",t);if(n)throw n;const a=e.marcas.map(o=>({nome:o,cliente_id:t})),{error:i}=await ie.from("marcas").insert(a);if(i)throw i;return{id:t,nome:e.nome,marcas:e.marcas}}catch(r){throw console.error("Error updating cliente:",r),r}},Ax=async t=>{try{const{error:e}=await ie.from("clientes").delete().eq("id",t);if(e)throw e}catch(e){throw console.error("Error deleting cliente:",e),e}},Ix=async()=>{try{const{data:t,error:e}=await ie.from("producoes").select(`
        *,
        clientes:cliente_id(nome),
        marcas:marca_id(nome)
      `).order("data_inicio",{ascending:!1});if(e)throw e;const{data:r,error:n}=await ie.from("producao_variantes").select("*");if(n)throw n;const{data:a,error:i}=await ie.from("bom_files").select("*");if(i)throw i;return t.map(o=>{const l=r.filter(d=>d.producao_id===o.id),c=a.filter(d=>d.producao_id===o.id);return Cx(o,l,c)})}catch(t){return console.error("Error fetching producoes:",t),[]}},$x=async t=>{try{const{data:e,error:r}=await ie.from("marcas").select("id, cliente_id, clientes!inner(nome)").eq("nome",t.marca).eq("clientes.nome",t.cliente);if(r||!e||e.length===0)throw new Error(`Marca "${t.marca}" não encontrada para o cliente "${t.cliente}"`);const n=e[0],{data:a,error:i}=await ie.from("producoes").insert({marca_id:n.id,cliente_id:n.cliente_id,referencia_interna:t.referenciaInterna,referencia_cliente:t.referenciaCliente,descricao:t.descricao,tipo_peca:t.tipoPeca,genero:t.genero,etapa:t.etapa,estado:t.estado,data_inicio:t.dataInicio,data_previsao:t.dataPrevisao,data_estimada_entrega:t.dataEstimadaEntrega,em_producao:t.emProducao,problemas:t.problemas,local_producao:t.localProducao,empresa_externa:t.empresaExterna,link_odoo:t.linkOdoo,comments:t.comments,pago:t.pago,pago_parcial:t.pagoParcial,pagamentos:t.pagamentos,valor_pago:t.valorPago,valor_restante:t.valorRestante,fastprod:t.fastprod,observacoes_financeiras:t.observacoesFinanceiras,numero_fatura:t.numeroFatura,data_fatura:t.dataFatura,valor_fatura:t.valorFatura}).select().single();if(i)throw i;const o=[];if(t.variantes.forEach(l=>{Object.entries(l.tamanhos).forEach(([c,d])=>{d>0&&o.push({producao_id:a.id,cor:l.cor,tamanho:c,quantidade:d})})}),o.length>0){const{error:l}=await ie.from("producao_variantes").insert(o);if(l)throw l}return{...t,id:a.id}}catch(e){throw console.error("Error creating producao:",e),e}},Dx=async(t,e)=>{try{const{data:r,error:n}=await ie.from("marcas").select("id, cliente_id, clientes!inner(nome)").eq("nome",e.marca).eq("clientes.nome",e.cliente);if(n||!r||r.length===0)throw new Error(`Marca "${e.marca}" não encontrada para o cliente "${e.cliente}"`);const a=r[0],{error:i}=await ie.from("producoes").update({marca_id:a.id,cliente_id:a.cliente_id,referencia_interna:e.referenciaInterna,referencia_cliente:e.referenciaCliente,descricao:e.descricao,tipo_peca:e.tipoPeca,genero:e.genero,etapa:e.etapa,estado:e.estado,data_inicio:e.dataInicio,data_previsao:e.dataPrevisao,data_estimada_entrega:e.dataEstimadaEntrega,em_producao:e.emProducao,problemas:e.problemas,local_producao:e.localProducao,empresa_externa:e.empresaExterna,link_odoo:e.linkOdoo,comments:e.comments,pago:e.pago,pago_parcial:e.pagoParcial,pagamentos:e.pagamentos,valor_pago:e.valorPago,valor_restante:e.valorRestante,fastprod:e.fastprod,observacoes_financeiras:e.observacoesFinanceiras,numero_fatura:e.numeroFatura,data_fatura:e.dataFatura,valor_fatura:e.valorFatura}).eq("id",t);if(i)throw i;const{error:o}=await ie.from("producao_variantes").delete().eq("producao_id",t);if(o)throw o;const l=[];if(e.variantes.forEach(c=>{Object.entries(c.tamanhos).forEach(([d,u])=>{u>0&&l.push({producao_id:t,cor:c.cor,tamanho:d,quantidade:u})})}),l.length>0){const{error:c}=await ie.from("producao_variantes").insert(l);if(c)throw c}return{...e,id:t}}catch(r){throw console.error("Error updating producao:",r),r}},Lx=async t=>{try{const{error:e}=await ie.from("producoes").delete().eq("id",t);if(e)throw e}catch(e){throw console.error("Error deleting producao:",e),e}},Rx=async(t,e)=>{try{const r={};e.problemas!==void 0&&(r.problemas=e.problemas),e.emProducao!==void 0&&(r.em_producao=e.emProducao),e.pago!==void 0&&(r.pago=e.pago),e.faltaComponentes!==void 0&&(r.estado=e.faltaComponentes?"FALTA COMPONENTES":"Aguarda Componentes");const{error:n}=await ie.from("producoes").update(r).eq("id",t);if(n)throw n}catch(r){throw console.error("Error updating producao flags:",r),r}},Mx=async(t,e)=>{try{const{error:r}=await ie.from("producoes").update({comments:e}).eq("id",t);if(r)throw r}catch(r){throw console.error("Error updating producao comments:",r),r}};const pn=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[a,i]=T.useState(null),o=async()=>{try{n(!0);const m=await Ix();e(m),i(null)}catch(m){i("Erro ao carregar produções"),console.error(m)}finally{n(!1)}};return T.useEffect(()=>{o()},[]),{producoes:t,loading:r,error:a,createProducao:async m=>{try{const x=await $x(m);return e(v=>[...v,x]),x}catch(x){throw i("Erro ao criar produção"),x}},updateProducao:async(m,x)=>{try{const v=await Dx(m,x);return e(b=>b.map(C=>C.id===m?{...v,id:m}:C)),v}catch(v){throw i("Erro ao atualizar produção"),console.error("Update error:",v),v}},deleteProducao:async m=>{try{await Lx(m),e(x=>x.filter(v=>v.id!==m))}catch(x){throw i("Erro ao remover produção"),x}},updateFlags:async(m,x)=>{try{await Rx(m,x),e(v=>v.map(b=>b.id===m?{...b,problemas:x.problemas!==void 0?x.problemas:b.problemas,emProducao:x.emProducao!==void 0?x.emProducao:b.emProducao,pago:x.pago!==void 0?x.pago:b.pago,estado:x.faltaComponentes!==void 0?x.faltaComponentes?"FALTA COMPONENTES":"Aguarda Componentes":b.estado}:b))}catch(v){throw i("Erro ao atualizar flags"),v}},updateComments:async(m,x)=>{try{await Mx(m,x),e(v=>v.map(b=>b.id===m?{...b,comments:x}:b))}catch(v){throw i("Erro ao atualizar comentários"),v}},refetch:o}},tf=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[a,i]=T.useState(null),o=async()=>{try{n(!0);const u=await Px();e(u),i(null)}catch(u){i("Erro ao carregar clientes"),console.error(u)}finally{n(!1)}};return T.useEffect(()=>{o()},[]),{clientes:t,loading:r,error:a,createCliente:async u=>{try{const h=await Tx(u);return e(m=>[...m,h]),h}catch(h){throw i("Erro ao criar cliente"),h}},updateCliente:async(u,h)=>{try{const m=await Ox(u,h);return e(x=>x.map(v=>v.id===u?m:v)),m}catch(m){throw i("Erro ao atualizar cliente"),m}},deleteCliente:async u=>{try{await Ax(u),e(h=>h.filter(m=>m.id!==u))}catch(h){throw i("Erro ao remover cliente"),h}},refetch:o}},rf=({isOpen:t,onClose:e,onSave:r,producao:n})=>{const{clientes:a,loading:i}=tf(),o=w=>{const A=[];return w.forEach(I=>{Object.entries(I.tamanhos).forEach(([$,M])=>{A.push({id:`${I.cor}-${$}`,cor:I.cor,tamanho:$,quantidade:M})})}),A},l=w=>{const A=new Map;return w.forEach(I=>{A.has(I.cor)||A.set(I.cor,{cor:I.cor,tamanhos:{}}),I.quantidade>0&&(A.get(I.cor).tamanhos[I.tamanho]=I.quantidade)}),Array.from(A.values()).filter(I=>Object.keys(I.tamanhos).length>0)},[c,d]=T.useState({marca:"",cliente:"",referenciaInterna:"",referenciaCliente:"",descricao:"",tipoPeca:"",genero:"Unissexo",etapa:"Desenvolvimento",estado:"Modelagem",dataInicio:new Date().toISOString().split("T")[0],dataPrevisao:"",dataEstimadaEntrega:"",emProducao:!1,problemas:!1,faltaComponentes:!1,localProducao:"Interno",empresaExterna:"",linkOdoo:"",comments:""}),[u,h]=T.useState([]),[m,x]=T.useState(""),[v,b]=T.useState("");T.useEffect(()=>{n&&t?(d({marca:n.marca||"",cliente:n.cliente||"",referenciaInterna:n.referenciaInterna||"",referenciaCliente:n.referenciaCliente||"",descricao:n.descricao||"",tipoPeca:n.tipoPeca||"",genero:n.genero||"Unissexo",etapa:n.etapa||"Desenvolvimento",estado:n.estado||"Modelagem",dataInicio:n.dataInicio||new Date().toISOString().split("T")[0],dataPrevisao:n.dataPrevisao||"",dataEstimadaEntrega:n.dataEstimadaEntrega||"",emProducao:n.emProducao||!1,problemas:n.problemas||!1,faltaComponentes:n.estado==="FALTA COMPONENTES"||!1,localProducao:n.localProducao||"Interno",empresaExterna:n.empresaExterna||"",linkOdoo:n.linkOdoo||"",comments:n.comments||""}),h(o(n.variantes||[]))):!n&&t&&(d({marca:"",cliente:"",referenciaInterna:"",referenciaCliente:"",descricao:"",tipoPeca:"",genero:"Unissexo",etapa:"Desenvolvimento",estado:"Modelagem",dataInicio:new Date().toISOString().split("T")[0],dataPrevisao:"",dataEstimadaEntrega:"",emProducao:!1,problemas:!1,faltaComponentes:!1,localProducao:"Interno",empresaExterna:"",linkOdoo:"",comments:""}),h([]))},[n,t]);const C=a==null?void 0:a.find(w=>w.nome===c.cliente),y=(C==null?void 0:C.marcas)||[],p=Array.from(new Set(u.map(w=>w.cor))).filter(Boolean),f=Array.from(new Set(u.map(w=>w.tamanho))).filter(Boolean),g=(w,A)=>{d(I=>({...I,[w]:A}))},k=w=>{d(A=>({...A,cliente:w,marca:""}))},S=w=>{w.preventDefault();const A=l(u),I={...c,variantes:A,estado:c.faltaComponentes?"FALTA COMPONENTES":c.estado};n!=null&&n.id&&(I.id=n.id),delete I.faltaComponentes,r(I),e()},j=()=>{if(!m.trim()||p.includes(m.trim()))return;const w=m.trim(),A=f.length>0?f.map(I=>({id:`${w}-${I}`,cor:w,tamanho:I,quantidade:0})):["XS","S","M","L","XL"].map(I=>({id:`${w}-${I}`,cor:w,tamanho:I,quantidade:0}));h(I=>[...I,...A]),x("")},E=()=>{if(!v.trim()||f.includes(v.trim().toUpperCase()))return;const w=v.trim().toUpperCase(),A=p.length>0?p.map(I=>({id:`${I}-${w}`,cor:I,tamanho:w,quantidade:0})):[{id:`Nova Cor-${w}`,cor:"Nova Cor",tamanho:w,quantidade:0}];h(I=>[...I,...A]),b("")},D=w=>{confirm(`Remover todas as entradas da cor "${w}"?`)&&h(A=>A.filter(I=>I.cor!==w))},N=w=>{confirm(`Remover todas as entradas do tamanho "${w}"?`)&&h(A=>A.filter(I=>I.tamanho!==w))},R=w=>h(A=>A.filter(I=>I.id!==w)),V=w=>{h(A=>[...A,{...w,id:`${w.cor}-${w.tamanho}-${Date.now()}`}])},K=(w,A,I)=>{h($=>$.map(M=>M.id===w?{...M,[A]:I,id:A==="cor"||A==="tamanho"?`${A==="cor"?I:M.cor}-${A==="tamanho"?I:M.tamanho}`:M.id}:M))},_=()=>{h(w=>[...w,{id:`nova-${Date.now()}`,cor:"",tamanho:"",quantidade:0}])};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Yt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n?"Editar Produção":"Nova Produção"})]}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente"}),s.jsxs("select",{value:c.cliente,onChange:w=>k(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Selecionar cliente"}),a.map(w=>s.jsx("option",{value:w.nome,children:w.nome},w.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marca"}),s.jsxs("select",{value:c.marca,onChange:w=>g("marca",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:!c.cliente,children:[s.jsx("option",{value:"",children:"Selecionar marca"}),y.map(w=>s.jsx("option",{value:w,children:w},w))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referência Interna"}),s.jsx("input",{type:"text",value:c.referenciaInterna,onChange:w=>g("referenciaInterna",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referência Cliente"}),s.jsx("input",{type:"text",value:c.referenciaCliente,onChange:w=>g("referenciaCliente",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),s.jsx("input",{type:"text",value:c.descricao,onChange:w=>g("descricao",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Peça"}),s.jsx("input",{type:"text",value:c.tipoPeca,onChange:w=>g("tipoPeca",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Género"}),s.jsxs("select",{value:c.genero,onChange:w=>g("genero",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"Masculino",children:"Masculino"}),s.jsx("option",{value:"Feminino",children:"Feminino"}),s.jsx("option",{value:"Unissexo",children:"Unissexo"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etapa"}),s.jsx("select",{value:c.etapa,onChange:w=>g("etapa",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:wr.map(w=>s.jsx("option",{value:w,children:w},w))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsx("select",{value:c.faltaComponentes?"FALTA COMPONENTES":c.estado,onChange:w=>{w.target.value==="FALTA COMPONENTES"?(g("faltaComponentes",!0),g("estado","Aguarda Componentes")):(g("faltaComponentes",!1),g("estado",w.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:ms.map(w=>s.jsx("option",{value:w,children:w},w))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Início"}),s.jsx("input",{type:"date",value:c.dataInicio,onChange:w=>g("dataInicio",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Previsão"}),s.jsx("input",{type:"date",value:c.dataPrevisao,onChange:w=>g("dataPrevisao",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Estimada de Entrega"}),s.jsx("input",{type:"date",value:c.dataEstimadaEntrega,onChange:w=>g("dataEstimadaEntrega",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cores e Tamanhos"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:m,onChange:w=>x(w.target.value),placeholder:"Nova cor",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:s.jsx(Le,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:v,onChange:w=>b(w.target.value),placeholder:"Novo tamanho",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:s.jsx(Le,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cor"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tamanho"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Quantidade"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map((w,A)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"text",value:w.cor,onChange:I=>K(w.id,"cor",I.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"text",value:w.tamanho,onChange:I=>K(w.id,"tamanho",I.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",min:"0",value:w.quantidade,onChange:I=>K(w.id,"quantidade",parseInt(I.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center"})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[s.jsx("button",{type:"button",onClick:()=>V(w),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Duplicar linha",children:s.jsx(Gp,{className:"w-3 h-3"})}),s.jsx("button",{type:"button",onClick:()=>R(w.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remover linha",children:s.jsx(_e,{className:"w-3 h-3"})})]})})]},w.id))})]}),s.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:s.jsxs("button",{type:"button",onClick:_,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Adicionar Linha"})]})})]}),(p.length>0||f.length>0)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[p.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cores Disponíveis"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(w=>s.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-2 py-1 rounded",children:[s.jsx("span",{className:"text-sm text-blue-800",children:w}),s.jsx("button",{type:"button",onClick:()=>D(w),className:"text-red-600 hover:text-red-800",children:s.jsx(_e,{className:"w-3 h-3"})})]},w))})]}),f.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tamanhos Disponíveis"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(w=>s.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 px-2 py-1 rounded",children:[s.jsx("span",{className:"text-sm text-green-800",children:w}),s.jsx("button",{type:"button",onClick:()=>N(w),className:"text-red-600 hover:text-red-800",children:s.jsx(_e,{className:"w-3 h-3"})})]},w))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Local de Produção"}),s.jsxs("select",{value:c.localProducao,onChange:w=>g("localProducao",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"Interno",children:"Interno"}),s.jsx("option",{value:"Externo",children:"Externo"})]})]}),c.localProducao==="Externo"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empresa Externa"}),s.jsx("input",{type:"text",value:c.empresaExterna,onChange:w=>g("empresaExterna",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Odoo"}),s.jsx("input",{type:"url",value:c.linkOdoo,onChange:w=>g("linkOdoo",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://odoo.example.com/production/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentários"}),s.jsx("textarea",{value:c.comments,onChange:w=>g("comments",w.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Comentários sobre a produção..."})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"emProducao",checked:c.emProducao,onChange:w=>g("emProducao",w.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("label",{htmlFor:"emProducao",className:"text-sm font-medium text-gray-700",children:"Em Produção"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"problemas",checked:c.problemas,onChange:w=>g("problemas",w.target.checked),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),s.jsx("label",{htmlFor:"problemas",className:"text-sm font-medium text-gray-700",children:"Com Problemas"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"faltaComponentes",checked:c.faltaComponentes,onChange:w=>{g("faltaComponentes",w.target.checked),w.target.checked&&g("estado","Aguarda Componentes")},className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),s.jsx("label",{htmlFor:"faltaComponentes",className:"text-sm font-medium text-gray-700",children:"Falta Componentes"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Nr,{className:"w-4 h-4"}),s.jsxs("span",{children:[n?"Atualizar":"Criar"," Produção"]})]})]})]})]})}):null},fd=()=>{const{producoes:t,loading:e,error:r,createProducao:n,updateProducao:a,deleteProducao:i,updateFlags:o}=pn(),[l,c]=T.useState({isOpen:!1}),[d,u]=T.useState(!1),h=async p=>{try{await n(p)}catch{alert("Erro ao criar produção")}c({isOpen:!1})},m=async p=>{try{await a(p.id,p)}catch{alert("Erro ao atualizar produção")}c({isOpen:!1})},x=async p=>{if(confirm("Tem certeza que deseja remover esta produção?"))try{await i(p)}catch{alert("Erro ao remover produção")}},v=p=>({Desenvolvimento:"bg-yellow-100 text-yellow-800","1º proto":"bg-orange-100 text-orange-800","2º proto":"bg-orange-100 text-orange-800","Size-Set":"bg-blue-100 text-blue-800",PPS:"bg-purple-100 text-purple-800",Produção:"bg-indigo-100 text-indigo-800",Pronto:"bg-green-100 text-green-800",Enviado:"bg-gray-100 text-gray-800"})[p],b=p=>{const f=new Date,k=new Date(p).getTime()-f.getTime(),S=Math.ceil(k/(1e3*60*60*24));return S<=3&&S>=0},C=T.useMemo(()=>{const p=t.length,f=t.filter(E=>E.emProducao||!1).length,g=t.filter(E=>E.problemas||!1).length,k=t.filter(E=>E.estado==="FALTA COMPONENTES").length,S=t.filter(E=>{const D=new Date,R=new Date(E.dataEstimadaEntrega).getTime()-D.getTime();return Math.ceil(R/(1e3*60*60*24))<=2}).length,j=wr.reduce((E,D)=>(E[D]=t.filter(N=>N.etapa===D).length,E),{});return{total:p,emProducao:f,comProblemas:g,faltaComponentes:k,atrasado:S,porEtapa:j}},[t]),y=T.useMemo(()=>[...t].sort((p,f)=>{const g=b(p.dataEstimadaEntrega),k=b(f.dataEstimadaEntrega);return g&&!k?-1:!g&&k?1:new Date(f.dataInicio).getTime()-new Date(p.dataInicio).getTime()}),[t]);return e?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando produções..."})]})}):r?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(hs,{className:"w-6 h-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),s.jsx("p",{className:"text-red-700",children:r})]})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard de Produções"}),s.jsx("p",{className:"text-gray-600",children:"Visão geral e acompanhamento em tempo real"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-bold text-blue-600",children:C.total}),s.jsx("div",{className:"text-sm text-gray-500",children:"Total de produções"})]}),s.jsxs("button",{onClick:()=>c({isOpen:!0}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Nova Produção"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(t0,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-green-700",children:C.emProducao}),s.jsx("div",{className:"text-sm text-green-600",children:"Em Produção"})]})]})}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(hs,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-red-700",children:C.comProblemas}),s.jsx("div",{className:"text-sm text-red-600",children:"Com Problemas"})]})]})}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Nt,{className:"w-5 h-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-yellow-700",children:C.faltaComponentes}),s.jsx("div",{className:"text-sm text-yellow-600",children:"Falta Componentes"})]})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Nt,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-blue-700",children:C.atrasado}),s.jsx("div",{className:"text-sm text-blue-600",children:"Atrasado"})]})]})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Distribuição por Etapas"}),s.jsxs("button",{onClick:()=>u(!d),className:"flex items-center space-x-1 px-2 py-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:[s.jsx("span",{className:"text-xs",children:d?"Expandir":"Comprimir"}),d?s.jsx(Hp,{className:"w-4 h-4"}):s.jsx(Wp,{className:"w-4 h-4"})]})]}),!d&&s.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-1",children:wr.map(p=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${v(p)} mb-1`,children:C.porEtapa[p]}),s.jsx("div",{className:"text-xs text-gray-600 truncate",children:p})]},p))})]})]}),s.jsx(u0,{producoes:y,onUpdateFlags:o,onEdit:p=>c({isOpen:!0,producao:p}),onDelete:x,showActions:!0}),s.jsx(rf,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1}),onSave:l.producao?m:h,producao:l.producao})]})},Fx=({isOpen:t,onClose:e,onSave:r,title:n,value:a,color:i="#3B82F6",showColorPicker:o=!1})=>{const[l,c]=T.useState(a),[d,u]=T.useState(i);T.useEffect(()=>{t&&(c(a||""),u(i||"#3B82F6"))},[t,a,i]);const h=m=>{m.preventDefault(),l.trim()&&(r(l.trim(),o?d:void 0),e())};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(rt,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n})]}),s.jsx("button",{onClick:e,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"}),s.jsx("input",{type:"text",value:l,onChange:m=>c(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,autoFocus:!0})]}),o&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"color",value:d,onChange:m=>u(m.target.value),className:"w-12 h-10 border border-gray-300 rounded-lg cursor-pointer"}),s.jsx("input",{type:"text",value:d,onChange:m=>u(m.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"#3B82F6"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Nr,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar"})]})]})]})]})}):null},zx=({isOpen:t,onClose:e,onSave:r,cliente:n})=>{const[a,i]=T.useState({nome:(n==null?void 0:n.nome)||"",marcas:(n==null?void 0:n.marcas)||[""]});T.useEffect(()=>{t&&n?i({nome:n.nome||"",marcas:n.marcas.length>0?n.marcas:[""]}):t&&!n&&i({nome:"",marcas:[""]})},[t,n]);const o=u=>{u.preventDefault();const h=a.marcas.filter(m=>m.trim()!=="");a.nome.trim()&&h.length>0&&(r({nome:a.nome.trim(),marcas:h}),e())},l=()=>{i(u=>({...u,marcas:[...u.marcas,""]}))},c=u=>{i(h=>({...h,marcas:h.marcas.filter((m,x)=>x!==u)}))},d=(u,h)=>{i(m=>({...m,marcas:m.marcas.map((x,v)=>v===u?h:x)}))};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Gt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n?"Editar Cliente":"Novo Cliente"})]}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Cliente"}),s.jsx("input",{type:"text",value:a.nome,onChange:u=>i(h=>({...h,nome:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,autoFocus:!0})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marcas"}),s.jsxs("button",{type:"button",onClick:l,className:"flex items-center space-x-1 px-2 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Adicionar"})]})]}),s.jsx("div",{className:"space-y-2",children:a.marcas.map((u,h)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:u,onChange:m=>d(h,m.target.value),placeholder:"Nome da marca",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:h===0}),a.marcas.length>1&&s.jsx("button",{type:"button",onClick:()=>c(h),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(_e,{className:"w-4 h-4"})})]},h))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Nr,{className:"w-4 h-4"}),s.jsxs("span",{children:[n?"Atualizar":"Criar"," Cliente"]})]})]})]})]})}):null},Ux=()=>{const[t,e]=T.useState("producoes"),{producoes:r,loading:n,createProducao:a,updateProducao:i,deleteProducao:o,updateFlags:l}=pn(),{clientes:c,loading:d,createCliente:u,updateCliente:h,deleteCliente:m}=tf(),[x,v]=T.useState(wr),[b,C]=T.useState(ms),[y,p]=T.useState("all"),[f,g]=T.useState("all"),[k,S]=T.useState(""),[j,E]=T.useState({isOpen:!1,type:"etapa"}),[D,N]=T.useState({isOpen:!1}),[R,V]=T.useState({isOpen:!1}),[K,_]=T.useState({isOpen:!1}),w=Sf.useMemo(()=>r.filter(P=>{const B=y==="all"||P.etapa===y,Be=f==="all"||P.estado===f,pt=k===""||P.marca.toLowerCase().includes(k.toLowerCase())||P.cliente.toLowerCase().includes(k.toLowerCase())||P.referenciaInterna.toLowerCase().includes(k.toLowerCase())||P.referenciaCliente.toLowerCase().includes(k.toLowerCase())||P.descricao.toLowerCase().includes(k.toLowerCase());return B&&Be&&pt}).sort((P,B)=>new Date(B.dataInicio).getTime()-new Date(P.dataInicio).getTime()),[r,y,f,k]),A=async P=>{try{await a(P)}catch{alert("Erro ao criar produção")}},I=async P=>{try{await i(P.id,P)}catch{alert("Erro ao atualizar produção")}},$=async(P,B)=>{try{await l(P,B)}catch{alert("Erro ao atualizar flags")}},M=async P=>{if(confirm("Tem certeza que deseja remover esta produção?"))try{await o(P)}catch{alert("Erro ao remover produção")}},z=async P=>{if(K.cliente)try{await h(K.cliente.id,P)}catch{alert("Erro ao atualizar cliente")}else try{await u(P)}catch{alert("Erro ao criar cliente")}_({isOpen:!1})},ee=async P=>{if(confirm("Tem certeza que deseja remover este cliente?"))try{await m(P)}catch{alert("Erro ao remover cliente")}},oe=P=>{j.type==="new"?v(B=>[...B,P]):j.index!==void 0&&v(B=>B.map((Be,pt)=>pt===j.index?P:Be)),E({isOpen:!1,type:"etapa"})},kr=P=>{j.type==="new"?C(B=>[...B,P]):j.index!==void 0&&C(B=>B.map((Be,pt)=>pt===j.index?P:Be)),E({isOpen:!1,type:"estado"})},it=(P,B)=>{if(confirm("Tem certeza que deseja remover este item?"))switch(P){case"etapa":v(Be=>Be.filter((pt,xn)=>xn!==B));break;case"estado":C(Be=>Be.filter((pt,xn)=>xn!==B));break}},gn=P=>({Desenvolvimento:"bg-yellow-100 text-yellow-800","1º proto":"bg-orange-100 text-orange-800","2º proto":"bg-orange-100 text-orange-800","Size-Set":"bg-blue-100 text-blue-800",PPS:"bg-purple-100 text-purple-800",Produção:"bg-indigo-100 text-indigo-800",Pronto:"bg-green-100 text-green-800",Enviado:"bg-gray-100 text-gray-800"})[P],mt=P=>({Modelagem:"bg-yellow-100 text-yellow-700","Aguarda Componentes":"bg-orange-100 text-orange-700","FALTA COMPONENTES":"bg-red-100 text-red-700","Aguarda Malha":"bg-orange-100 text-orange-700","Com Defeito":"bg-red-100 text-red-700","Aguarda Comentários":"bg-amber-100 text-amber-700",Corte:"bg-blue-100 text-blue-700",Confecção:"bg-indigo-100 text-indigo-700",Transfers:"bg-purple-100 text-purple-700","Serviços Externos":"bg-teal-100 text-teal-700",Embalamento:"bg-green-100 text-green-700"})[P],Sr=P=>P.variantes.reduce((B,Be)=>B+Object.values(Be.tamanhos).reduce((pt,xn)=>pt+xn,0),0),nf=[{id:"producoes",label:"Produções",icon:Yt},{id:"clientes",label:"Clientes",icon:Gt},{id:"etapas",label:"Etapas",icon:Ha},{id:"estados",label:"Estados",icon:Kc}],sf=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Produções"}),s.jsxs("button",{onClick:()=>N({isOpen:!0}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Nova Produção"})]})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Wa,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar por marca, cliente, referência...",value:k,onChange:P=>S(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yr,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:y,onChange:P=>p(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todas as etapas"}),wr.map(P=>s.jsx("option",{value:P,children:P},P))]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yr,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:f,onChange:P=>g(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todos os estados"}),ms.map(P=>s.jsx("option",{value:P,children:P},P))]})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca / Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrição"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Etapa"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entrega"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(P=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.referenciaInterna}),s.jsx("div",{className:"text-sm text-gray-500",children:P.referenciaCliente})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.marca}),s.jsx("div",{className:"text-sm text-gray-500",children:P.cliente})]}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:P.descricao,children:P.descricao}),s.jsxs("div",{className:"text-sm text-gray-500",children:[P.tipoPeca," • ",P.genero," • ",P.localProducao==="Interno"?"Interno":P.empresaExterna||"Externo"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${gn(P.etapa)}`,children:P.etapa})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${mt(P.estado)}`,children:P.estado})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600",children:Sr(P)}),s.jsx("div",{className:"text-xs text-gray-500",children:"unidades"})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(P.dataEstimadaEntrega).toLocaleDateString("pt-PT")}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Início: ",new Date(P.dataInicio).toLocaleDateString("pt-PT")]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[P.emProducao&&s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Em Produção"}),P.problemas&&s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Com Problemas"}),!P.emProducao&&!P.problemas&&s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:"Parado"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("button",{onClick:()=>V({isOpen:!0,producao:P}),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Ver detalhes completos",children:s.jsx(Jt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>N({isOpen:!0,producao:P}),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Editar produção",children:s.jsx(rt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>M(P.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remover produção",children:s.jsx(_e,{className:"w-4 h-4"})})]})})]},P.id))})]})}),w.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Yt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma produção encontrada"}),s.jsx("p",{className:"text-gray-500",children:k||y!=="all"||f!=="all"?"Tente ajustar os filtros de pesquisa":"Adicione uma nova produção para começar"})]})]})]}),af=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Clientes e Marcas"}),s.jsxs("button",{onClick:()=>_({isOpen:!0}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Novo Cliente"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(P=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Gt,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:P.nome})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>_({isOpen:!0,cliente:P}),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(rt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>ee(P.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(_e,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"Marcas"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:P.marcas.map(B=>s.jsx("span",{className:"inline-flex px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:B},B))})]})]},P.id))})]}),of=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Etapas"}),s.jsxs("button",{onClick:()=>E({isOpen:!0,type:"new"}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Nova Etapa"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:x.map((P,B)=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-bold",children:B+1}),s.jsx("span",{className:"font-medium text-gray-900",children:P})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>E({isOpen:!0,type:"etapa",item:P,index:B}),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(rt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>it("etapa",B),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(_e,{className:"w-4 h-4"})})]})]})},P))})]}),lf=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Estados"}),s.jsxs("button",{onClick:()=>E({isOpen:!0,type:"new"}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Novo Estado"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:b.map((P,B)=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Kc,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"font-medium text-gray-900 text-sm",children:P})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>E({isOpen:!0,type:"estado",item:P,index:B}),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(rt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>it("estado",B),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(_e,{className:"w-4 h-4"})})]})]})},P))})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Registos"}),s.jsx("p",{className:"text-gray-600",children:"Gestão completa de produções, clientes, etapas e estados"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:nf.map(P=>{const B=P.icon;return s.jsxs("button",{onClick:()=>e(P.id),className:`
                    flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors
                    ${t===P.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[s.jsx(B,{className:"w-5 h-5"}),s.jsx("span",{children:P.label})]},P.id)})})}),s.jsxs("div",{className:"p-6",children:[t==="producoes"&&sf(),t==="clientes"&&af(),t==="etapas"&&of(),t==="estados"&&lf()]})]}),s.jsx(Fx,{isOpen:j.isOpen,onClose:()=>E({isOpen:!1,type:"etapa"}),onSave:t==="etapas"?oe:kr,title:j.type==="new"?`Nova ${t.slice(0,-1)}`:`Editar ${t.slice(0,-1)}`,value:j.item||"",showColorPicker:!1}),s.jsx(rf,{isOpen:D.isOpen,onClose:()=>N({isOpen:!1}),onSave:D.producao?I:A,producao:D.producao}),s.jsx(Ga,{isOpen:R.isOpen,onClose:()=>V({isOpen:!1}),producao:R.producao||null,onUpdateFlags:P=>{R.producao&&$(R.producao.id,P)}}),s.jsx(zx,{isOpen:K.isOpen,onClose:()=>_({isOpen:!1}),onSave:z,cliente:K.cliente})]})},Bx=({isOpen:t,onClose:e,producaoRef:r,historico:n})=>{if(!t)return null;const a=l=>{switch(l){case"comentario":return s.jsx(fs,{className:"w-4 h-4 text-blue-600"});case"upload_bom":return s.jsx(Oh,{className:"w-4 h-4 text-green-600"});case"remover_bom":return s.jsx(Hn,{className:"w-4 h-4 text-red-600"});case"marcar_completo":return s.jsx(Vn,{className:"w-4 h-4 text-green-600"});case"estado_alterado":return s.jsx(rt,{className:"w-4 h-4 text-purple-600"});default:return s.jsx(Nt,{className:"w-4 h-4 text-gray-600"})}},i=l=>{switch(l){case"comentario":return"bg-blue-50 border-blue-200";case"upload_bom":return"bg-green-50 border-green-200";case"remover_bom":return"bg-red-50 border-red-200";case"marcar_completo":return"bg-green-50 border-green-200";case"estado_alterado":return"bg-purple-50 border-purple-200";default:return"bg-gray-50 border-gray-200"}},o=l=>new Date(l).toLocaleString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Nt,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Histórico de Componentes"}),s.jsx("p",{className:"text-sm text-gray-600",children:r})]})]}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Nt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum histórico disponível"}),s.jsx("p",{className:"text-gray-500",children:"As ações relacionadas com componentes aparecerão aqui"})]}):s.jsx("div",{className:"space-y-4",children:n.map((l,c)=>s.jsx("div",{className:`border rounded-lg p-4 ${i(l.tipo)}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a(l.tipo)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.descricao}),s.jsx("span",{className:"text-xs text-gray-500",children:o(l.timestamp)})]}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Por: ",l.usuario]}),l.detalhes&&s.jsx("div",{className:"mt-2 p-2 bg-white rounded border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:JSON.stringify(l.detalhes,null,2)})})]})]})},l.id))})}),s.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:s.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fechar"})})]})})},Vx=({isOpen:t,onClose:e,onSave:r,producao:n})=>{const[a,i]=T.useState([]),[o,l]=T.useState(""),[c,d]=T.useState([]),[u,h]=T.useState(null),[m,x]=T.useState(""),[v,b]=T.useState(null),[C,y]=T.useState(!1);T.useEffect(()=>{if(t&&n){const _=n.comments?[{id:"1",text:n.comments,files:n.bomFiles||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]:[];i(_),l(""),d([]),h(null),b(null)}},[t,n]);const p=_=>{if(!_)return;const w=Array.from(_).filter(A=>A.type==="application/pdf"||A.name.toLowerCase().endsWith(".pdf")||A.type.startsWith("image/")||A.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/));d(A=>[...A,...w])},f=_=>{_.preventDefault(),y(!1),p(_.dataTransfer.files)},g=_=>{_.preventDefault(),y(!0)},k=_=>{_.preventDefault(),y(!1)},S=_=>{d(w=>w.filter((A,I)=>I!==_))},j=()=>{if(!o.trim()&&c.length===0)return;const _={id:Date.now().toString(),text:o.trim(),files:c.map(w=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:w.name,url:`https://storage.example.com/comments/${w.name}`,uploadDate:new Date().toISOString()})),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};i(w=>[...w,_]),l(""),d([])},E=_=>{m.trim()&&(i(w=>w.map(A=>A.id===_?{...A,text:m.trim(),updatedAt:new Date().toISOString()}:A)),h(null),x(""))},D=_=>{confirm("Tem certeza que deseja remover este comentário?")&&i(w=>w.filter(A=>A.id!==_))},N=(_,w)=>{confirm("Tem certeza que deseja remover este ficheiro?")&&i(A=>A.map(I=>I.id===_?{...I,files:I.files.filter($=>$.id!==w)}:I))},R=()=>{const _=a.map(w=>`[${new Date(w.createdAt).toLocaleString("pt-PT")}] ${w.text}`).join(`

`);a.flatMap(w=>w.files),r(_),e()},V=_=>{if(_===0)return"0 Bytes";const w=1024,A=["Bytes","KB","MB","GB"],I=Math.floor(Math.log(_)/Math.log(w));return parseFloat((_/Math.pow(w,I)).toFixed(2))+" "+A[I]},K=_=>new Date(_).toLocaleString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return!t||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(fs,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Gestão de Comentários"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[n.referenciaInterna," - ",n.marca]})]})]}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex flex-col h-[calc(90vh-120px)]",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.map(_=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("div",{className:"flex-1",children:u===_.id?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:m,onChange:w=>x(w.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",autoFocus:!0}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>E(_.id),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Guardar"}),s.jsx("button",{onClick:()=>{h(null),x("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):s.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:_.text})}),u!==_.id&&s.jsxs("div",{className:"flex space-x-1 ml-4",children:[s.jsx("button",{onClick:()=>{h(_.id),x(_.text)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar comentário",children:s.jsx(rt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>D(_.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remover comentário",children:s.jsx(_e,{className:"w-4 h-4"})})]})]}),_.files.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Ficheiros Anexos"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:_.files.map(w=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx(Hn,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),s.jsx("span",{className:"text-sm text-gray-900 truncate",children:w.name})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>b(w),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Pré-visualizar",children:s.jsx(Jt,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>N(_.id,w.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remover ficheiro",children:s.jsx(_e,{className:"w-3 h-3"})})]})]},w.id))})]}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Criado: ",K(_.createdAt),_.updatedAt!==_.createdAt&&s.jsxs("span",{children:[" • Editado: ",K(_.updatedAt)]})]})]},_.id)),a.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(fs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum comentário"}),s.jsx("p",{className:"text-gray-500",children:"Adicione o primeiro comentário sobre os componentes"})]})]}),s.jsxs("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Adicionar Novo Comentário"}),s.jsx("div",{className:"mb-4",children:s.jsx("textarea",{value:o,onChange:_=>l(_.target.value),rows:3,placeholder:"Adicione comentários sobre componentes, fornecedores, prazos...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})}),s.jsxs("div",{onDrop:f,onDragOver:g,onDragLeave:k,className:`
                border-2 border-dashed rounded-lg p-4 text-center transition-colors mb-4
                ${C?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}
              `,children:[s.jsx(Oh,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Arraste ficheiros aqui ou"}),s.jsxs("label",{className:"inline-flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer text-sm",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Selecionar Ficheiros"}),s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.gif,application/pdf,image/*",onChange:_=>p(_.target.files),className:"hidden"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG, GIF"})]}),c.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Ficheiros Selecionados (",c.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:c.map((_,w)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx(Hn,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_.name}),s.jsx("p",{className:"text-xs text-gray-500",children:V(_.size)})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>b(_),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Pré-visualizar",children:s.jsx(Jt,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>S(w),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remover",children:s.jsx(_e,{className:"w-3 h-3"})})]})]},w))})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:[o.length," caracteres"]}),s.jsxs("button",{onClick:j,disabled:!o.trim()&&c.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Adicionar Comentário"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-white",children:[s.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:R,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Nr,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar Todos os Comentários"})]})]})]}),v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-60 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pré-visualização: ",v.name]}),s.jsx("button",{onClick:()=>b(null),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-4 h-96 flex items-center justify-center bg-gray-50",children:v.name.toLowerCase().endsWith(".pdf")?s.jsx("div",{className:"w-full h-full",children:s.jsx("iframe",{src:`data:application/pdf;base64,${btoa("PDF preview not available in demo")}`,className:"w-full h-full border-0",title:`Preview of ${v.name}`})}):v.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)?s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("img",{src:"url"in v?v.url:URL.createObjectURL(v),alt:v.name,className:"max-w-full max-h-full object-contain"})}):s.jsxs("div",{className:"text-center",children:[s.jsx(Hn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Pré-visualização de ficheiro"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[v.name,"size"in v&&` (${V(v.size)})`]}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Tipo de ficheiro não suportado para pré-visualização"})]})})]})})]})})},qx=()=>{var S;const{producoes:t,loading:e,error:r,updateProducao:n,updateFlags:a,updateComments:i}=pn(),[o,l]=T.useState({isOpen:!1,producao:null}),[c,d]=T.useState({isOpen:!1,producao:null}),[u,h]=T.useState({isOpen:!1,producao:null}),{producoesPendentes:m,producoesCompletas:x}=T.useMemo(()=>{const j=t.filter(D=>D.estado==="Aguarda Componentes"||D.estado==="FALTA COMPONENTES"||D.etapa==="Desenvolvimento"&&D.estado==="Modelagem"||!D.comments||D.comments.trim()===""),E=t.filter(D=>(D.estado==="Corte"||D.estado==="Confecção"||D.estado==="Transfers"||D.estado==="Serviços Externos"||D.estado==="Embalamento"||D.etapa==="Pronto"||D.etapa==="Enviado")&&D.estado!=="FALTA COMPONENTES"&&D.comments&&D.comments.trim()!=="");return{producoesPendentes:j,producoesCompletas:E}},[t]),v=T.useMemo(()=>{const j=m.length,E=m.filter(N=>N.estado==="Aguarda Componentes").length,D=x.length;return{totalPendentes:j,aguardaComponentes:E,completos:D}},[m,x]),b=async j=>{if(confirm(`Marcar componentes como completos para "${j.referenciaInterna}"?`))try{const E={...j,estado:"Corte",problemas:!1};await n(j.id,E),p(j.id,"marcar_completo",'Componentes marcados como completos - Estado alterado para "Corte"'),alert('Componentes marcados como completos! Estado alterado para "Corte".')}catch{alert("Erro ao marcar componentes como completos")}},C=async(j,E,D)=>{try{await i(j,E),D&&D.length>0,p(j,"comentario","Comentários atualizados",{comments:E}),h({isOpen:!1,producao:null})}catch{alert("Erro ao atualizar comentários")}},y=async j=>{const E=prompt("Para eliminar este registo, introduza a senha:");if(E==="lomartex.24"){if(confirm("Tem certeza que deseja eliminar permanentemente este registo?"))try{alert("Registo movido para o histórico de eliminados.")}catch{alert("Erro ao eliminar registo")}}else E!==null&&alert("Senha incorreta")},p=(j,E,D,N)=>{const R={id:Date.now().toString(),producaoId:j,tipo:E,descricao:D,usuario:"Utilizador Atual",timestamp:new Date().toISOString(),detalhes:N};console.log("Histórico adicionado:",R)},f=j=>[{id:"1",producaoId:j,tipo:"comentario",descricao:"Comentários iniciais sobre componentes",usuario:"João Silva",timestamp:"2025-01-28T10:30:00Z"},{id:"2",producaoId:j,tipo:"upload_bom",descricao:"Upload de 2 ficheiro(s) anexo(s)",usuario:"Maria Santos",timestamp:"2025-01-28T14:15:00Z",detalhes:{files:["Especificacoes.pdf","Lista_Componentes.xlsx"]}}],g=j=>j.variantes.reduce((E,D)=>E+Object.values(D.tamanhos).reduce((N,R)=>N+R,0),0),k=j=>{const E=new Date,N=new Date(j).getTime()-E.getTime(),R=Math.ceil(N/(1e3*60*60*24));return R<=3&&R>=0};return e?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-orange-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando dados..."})]})}):r?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(On,{className:"w-6 h-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),s.jsx("p",{className:"text-red-700",children:r})]})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(On,{className:"w-8 h-8 text-orange-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Preparar Componentes"}),s.jsx("p",{className:"text-gray-600",children:"Gestão de componentes e comentários para produções"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(On,{className:"w-6 h-6 text-orange-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-700",children:v.totalPendentes}),s.jsx("div",{className:"text-sm text-orange-600",children:"Total Pendentes"})]})]})}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Nt,{className:"w-6 h-6 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:v.aguardaComponentes}),s.jsx("div",{className:"text-sm text-yellow-600",children:"Aguarda Componentes"})]})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Vn,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-700",children:v.completos}),s.jsx("div",{className:"text-sm text-green-600",children:"Completos"})]})]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Produções Pendentes"}),s.jsx("p",{className:"text-gray-600",children:"Componentes que necessitam de atenção"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca / Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entrega"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(j=>s.jsxs("tr",{className:`hover:bg-gray-50 ${j.estado==="FALTA COMPONENTES"?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.referenciaInterna}),s.jsx("div",{className:"text-sm text-gray-500",children:j.referenciaCliente})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.marca}),s.jsx("div",{className:"text-sm text-gray-500",children:j.cliente})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j.estado==="FALTA COMPONENTES"?"bg-red-100 text-red-800":j.estado==="Aguarda Componentes"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:j.estado})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600",children:g(j)}),s.jsx("div",{className:"text-xs text-gray-500",children:"unidades"})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:`text-sm font-medium ${k(j.dataEstimadaEntrega)?"text-red-600":"text-gray-900"}`,children:new Date(j.dataEstimadaEntrega).toLocaleDateString("pt-PT")}),s.jsx("div",{className:"text-xs text-gray-500",children:j.etapa})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsxs("button",{onClick:()=>b(j),className:"flex items-center space-x-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",title:"Marcar componentes como completos",children:[s.jsx(Vn,{className:"w-4 h-4"}),s.jsx("span",{children:"Marcar Completo"})]}),s.jsxs("button",{onClick:()=>h({isOpen:!0,producao:j}),className:`flex items-center space-x-1 px-3 py-2 rounded-lg transition-colors text-sm font-medium ${j.comments?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Gerir comentários e ficheiros",children:[s.jsx(fs,{className:"w-4 h-4"}),s.jsx("span",{children:"Comentários"}),j.comments&&s.jsx("span",{className:"bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:"●"})]})]})})]},j.id))})]})}),m.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(On,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma produção pendente"}),s.jsx("p",{className:"text-gray-500",children:"Todas as produções têm os componentes preparados"})]})]}),x.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Componentes Completos"}),s.jsx("p",{className:"text-gray-600",children:"Produções com componentes já preparados"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca / Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado Atual"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(j=>s.jsxs("tr",{className:"hover:bg-gray-50 opacity-50 bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vn,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:j.referenciaInterna}),s.jsx("div",{className:"text-sm text-gray-400",children:j.referenciaCliente})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:j.marca}),s.jsx("div",{className:"text-sm text-gray-400",children:j.cliente})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:j.estado})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:g(j)}),s.jsx("div",{className:"text-xs text-gray-400",children:"unidades"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("button",{onClick:()=>l({isOpen:!0,producao:j}),className:"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",title:"Ver registo completo",children:s.jsx(Jt,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>d({isOpen:!0,producao:j}),className:"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",title:"Ver histórico",children:s.jsx(Nt,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>h({isOpen:!0,producao:j}),className:"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",title:"Ver comentários",children:s.jsx(fs,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>y(j.id),className:"p-1 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Eliminar registo",children:s.jsx(_e,{className:"w-3 h-3"})})]})})]},j.id))})]})})]}),s.jsx(Vx,{isOpen:u.isOpen,onClose:()=>h({isOpen:!1,producao:null}),onSave:j=>{u.producao&&C(u.producao.id,j)},producao:u.producao}),s.jsx(Ga,{isOpen:o.isOpen,onClose:()=>l({isOpen:!1,producao:null}),producao:o.producao,onUpdateFlags:j=>{o.producao&&a(o.producao.id,j)}}),s.jsx(Bx,{isOpen:c.isOpen,onClose:()=>d({isOpen:!1,producao:null}),producaoRef:((S=c.producao)==null?void 0:S.referenciaInterna)||"",historico:c.producao?f(c.producao.id):[]})]})},Hx=({isOpen:t,onClose:e,onSave:r,producao:n})=>{const[a,i]=T.useState({dataInicio:"",dataEstimadaEntrega:""});T.useEffect(()=>{t&&n&&i({dataInicio:n.dataInicio,dataEstimadaEntrega:n.dataEstimadaEntrega})},[t,n]);const o=l=>{l.preventDefault(),n&&a.dataInicio&&a.dataEstimadaEntrega&&r(n,a)};return!t||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Bn,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar Datas"}),s.jsx("p",{className:"text-sm text-gray-600",children:n.referenciaInterna})]})]}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Início"}),s.jsx("input",{type:"date",value:a.dataInicio,onChange:l=>i(c=>({...c,dataInicio:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Estimada de Entrega"}),s.jsx("input",{type:"date",value:a.dataEstimadaEntrega,onChange:l=>i(c=>({...c,dataEstimadaEntrega:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Valores Atuais"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["Início: ",new Date(n.dataInicio).toLocaleDateString("pt-PT")]}),s.jsxs("p",{children:["Entrega: ",new Date(n.dataEstimadaEntrega).toLocaleDateString("pt-PT")]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Nr,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar"})]})]})]})]})})},Wx=()=>{const{producoes:t,loading:e,error:r,updateProducao:n}=pn(),[a,i]=T.useState(1),[o,l]=T.useState(0),[c,d]=T.useState("day"),u=T.useRef(null),[h,m]=T.useState({isOpen:!1,producao:null}),x=T.useMemo(()=>{const _=t.flatMap(I=>[new Date(I.dataInicio),new Date(I.dataPrevisao),new Date(I.dataEstimadaEntrega)]),w=new Date(Math.min(..._.map(I=>I.getTime()))),A=new Date(Math.max(..._.map(I=>I.getTime())));return w.setDate(w.getDate()-7),A.setDate(A.getDate()+7),{minDate:w,maxDate:A}},[t]),v=T.useMemo(()=>{const _=[],w=new Date(x.minDate),A=c==="day"?1:c==="week"?7:30;for(;w<=x.maxDate;)_.push(new Date(w)),w.setDate(w.getDate()+A);return _},[x]),b=c==="day"?30*a:c==="week"?120*a:200*a,C=v.length*b,y=_=>_.variantes.reduce((w,A)=>w+Object.values(A.tamanhos).reduce((I,$)=>I+$,0),0),p=_=>c==="day"?Math.floor((_.getTime()-x.minDate.getTime())/864e5)*(30*a):c==="week"?Math.floor((_.getTime()-x.minDate.getTime())/6048e5)*(120*a):Math.floor((_.getTime()-x.minDate.getTime())/2592e6)*(200*a),f=(_,w)=>{if(c==="day"){const A=Math.floor((w.getTime()-_.getTime())/864e5);return Math.max(A*(30*a),30*a)}else if(c==="week"){const A=Math.floor((w.getTime()-_.getTime())/6048e5);return Math.max(A*(120*a),120*a)}else{const A=Math.floor((w.getTime()-_.getTime())/2592e6);return Math.max(A*(200*a),200*a)}},g=_=>{if(_.estado==="FALTA COMPONENTES")return"bg-red-500";if(_.problemas)return"bg-orange-500";if(_.emProducao)return"bg-green-500";switch(_.etapa){case"Desenvolvimento":return"bg-yellow-500";case"1º proto":return"bg-orange-400";case"2º proto":return"bg-orange-500";case"Size-Set":return"bg-blue-500";case"PPS":return"bg-purple-500";case"Produção":return"bg-indigo-500";case"Pronto":return"bg-green-600";case"Enviado":return"bg-gray-500";default:return"bg-gray-400"}},k=_=>{const w=new Date;return _.toDateString()===w.toDateString()},S=_=>{const w=_.getDay();return w===0||w===6},j=_=>{if(c==="day")return _.toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit"});if(c==="week"){const w=new Date(_);return w.setDate(w.getDate()+6),`${_.getDate()}/${_.getMonth()+1} - ${w.getDate()}/${w.getMonth()+1}`}else return _.toLocaleDateString("pt-PT",{month:"short",year:"2-digit"})},E=_=>_.toLocaleDateString("pt-PT",{month:"long",year:"numeric"}),D=T.useMemo(()=>{const _=[];let w="",A=0,I=0;return v.forEach(($,M)=>{const z=E($);z!==w?(w&&_.push({month:w,startIndex:A,days:I}),w=z,A=M,I=1):I++}),w&&_.push({month:w,startIndex:A,days:I}),_},[v]),N=()=>{i(_=>Math.min(_*1.2,3))},R=()=>{i(_=>Math.max(_/1.2,.3))},V=()=>{i(1),l(0),u.current&&(u.current.scrollLeft=0)};T.useEffect(()=>{u.current&&(u.current.scrollLeft=o)},[a]);const K=async(_,w)=>{try{const A={..._,dataInicio:w.dataInicio,dataEstimadaEntrega:w.dataEstimadaEntrega};await n(_.id,A),m({isOpen:!1,producao:null})}catch{alert("Erro ao atualizar datas")}};return e?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando gráfico de Gantt..."})]})}):r?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Bn,{className:"w-6 h-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),s.jsx("p",{className:"text-red-700",children:r})]})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Bn,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Planeamento"}),s.jsx("p",{className:"text-gray-600",children:"Timeline visual e planeamento das produções"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[s.jsxs("button",{onClick:()=>d("day"),className:`flex items-center space-x-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="day"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[s.jsx(Bn,{className:"w-4 h-4"}),s.jsx("span",{children:"Dia"})]}),s.jsxs("button",{onClick:()=>d("week"),className:`flex items-center space-x-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="week"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[s.jsx(Vp,{className:"w-4 h-4"}),s.jsx("span",{children:"Semana"})]}),s.jsxs("button",{onClick:()=>d("month"),className:`flex items-center space-x-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="month"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[s.jsx(qp,{className:"w-4 h-4"}),s.jsx("span",{children:"Mês"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:R,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Zoom Out",children:s.jsx(s0,{className:"w-5 h-5"})}),s.jsxs("span",{className:"text-sm text-gray-600 min-w-[60px] text-center",children:[Math.round(a*100),"%"]}),s.jsx("button",{onClick:N,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Zoom In",children:s.jsx(n0,{className:"w-5 h-5"})}),s.jsx("button",{onClick:V,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Reset Zoom",children:s.jsx(Th,{className:"w-5 h-5"})})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"w-80 flex-shrink-0 border-r border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"grid grid-cols-4 h-12 text-xs font-medium text-gray-700",children:[s.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:"Ref. Interna"}),s.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:"Quantidade"}),s.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:"Datas"}),s.jsx("div",{className:"flex items-center px-3",children:"Local"})]})}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{ref:u,className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 max-h-[600px]",onScroll:_=>l(_.currentTarget.scrollLeft),children:s.jsxs("div",{style:{width:C},children:[s.jsx("div",{className:"flex border-b border-gray-200 bg-gray-100 h-8",children:D.map((_,w)=>s.jsx("div",{className:"flex items-center justify-center text-xs font-semibold text-gray-700 border-r border-gray-300",style:{width:_.days*b},children:_.month},w))}),s.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50 h-8",children:v.map((_,w)=>s.jsx("div",{className:`
                          flex items-center justify-center text-xs border-r border-gray-200
                          ${k(_)?"bg-blue-100 text-blue-800 font-bold":""}
                          ${S(_)?"bg-gray-100 text-gray-500":"text-gray-600"}
                        `,style:{width:b},children:j(_)},w))})]})})})]})}),s.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:t.map((_,w)=>s.jsxs("div",{className:"flex border-b border-gray-100 hover:bg-gray-50",children:[s.jsx("div",{className:"w-80 flex-shrink-0 border-r border-gray-200 bg-white",children:s.jsxs("div",{className:"grid grid-cols-4 h-16 text-xs",children:[s.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:_.referenciaInterna}),s.jsx("div",{className:"text-gray-500",children:_.marca})]})}),s.jsx("div",{className:"flex items-center justify-center px-3 border-r border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-bold text-blue-600",children:y(_)}),s.jsx("div",{className:"text-gray-500",children:"unidades"})]})}),s.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-600",children:new Date(_.dataInicio).toLocaleDateString("pt-PT")}),s.jsx("div",{className:"text-red-600 font-medium",children:new Date(_.dataEstimadaEntrega).toLocaleDateString("pt-PT")})]})}),s.jsx("div",{className:"flex items-center px-3",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[_.localProducao==="Interno"?s.jsx(Ha,{className:"w-3 h-3 text-blue-600"}):s.jsx(Il,{className:"w-3 h-3 text-orange-600"}),s.jsx("span",{className:"text-gray-700",children:_.localProducao==="Interno"?"Interno":_.empresaExterna||"Externo"})]})})]})}),s.jsx("div",{className:"flex-1 relative",children:s.jsx("div",{className:"overflow-x-auto h-16 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",style:{scrollLeft:o},children:s.jsxs("div",{className:"relative h-16",style:{width:C},children:[v.map((A,I)=>s.jsx("div",{className:`
                          absolute top-0 bottom-0 border-r border-gray-100
                          ${k(A)?"bg-blue-50":""}
                          ${S(A)?"bg-gray-50":""}
                        `,style:{left:I*b,width:b}},I)),v.some(A=>k(A))&&s.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-20",style:{left:p(new Date)+b/2}}),s.jsx("div",{className:`
                        absolute top-2 bottom-2 rounded-md shadow-sm z-10 flex items-center px-2 cursor-pointer
                        ${g(_)} opacity-80 hover:opacity-100 transition-opacity
                      `,style:{left:p(new Date(_.dataInicio)),width:f(new Date(_.dataInicio),new Date(_.dataEstimadaEntrega))},title:`${_.referenciaInterna} - ${_.etapa} - ${_.estado}`,onClick:()=>m({isOpen:!0,producao:_}),children:s.jsxs("div",{className:"text-white text-xs font-medium truncate flex items-center space-x-1",children:[_.etapa,s.jsx(rt,{className:"w-3 h-3 opacity-70"})]})})]})})})]},_.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Legenda"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3 text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-yellow-500 rounded"}),s.jsx("span",{children:"Desenvolvimento"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-orange-400 rounded"}),s.jsx("span",{children:"1º Proto"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-orange-500 rounded"}),s.jsx("span",{children:"2º Proto"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-blue-500 rounded"}),s.jsx("span",{children:"Size-Set"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-purple-500 rounded"}),s.jsx("span",{children:"PPS"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-indigo-500 rounded"}),s.jsx("span",{children:"Produção"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-green-600 rounded"}),s.jsx("span",{children:"Pronto"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-gray-500 rounded"}),s.jsx("span",{children:"Enviado"})]})]}),s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-red-500 rounded"}),s.jsx("span",{children:"Falta Componentes"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-orange-500 rounded"}),s.jsx("span",{children:"Com Problemas"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-3 bg-green-500 rounded"}),s.jsx("span",{children:"Em Produção"})]})]})})]}),s.jsx(Hx,{isOpen:h.isOpen,onClose:()=>m({isOpen:!1,producao:null}),onSave:K,producao:h.producao})]})},Gx=()=>{const{producoes:t,loading:e,error:r,deleteProducao:n}=pn(),[a,i]=T.useState("all"),[o,l]=T.useState("all"),[c,d]=T.useState(""),[u,h]=T.useState({isOpen:!1,producao:null}),m=T.useMemo(()=>t.filter(f=>f.etapa==="Pronto"||f.etapa==="Enviado"||f.estado==="Embalamento"),[t]),x=T.useMemo(()=>m.filter(f=>{const g=a==="all"||f.etapa===a,k=o==="all"||f.estado===o,S=c===""||f.marca.toLowerCase().includes(c.toLowerCase())||f.cliente.toLowerCase().includes(c.toLowerCase())||f.referenciaInterna.toLowerCase().includes(c.toLowerCase())||f.referenciaCliente.toLowerCase().includes(c.toLowerCase())||f.descricao.toLowerCase().includes(c.toLowerCase());return g&&k&&S}).sort((f,g)=>new Date(g.dataInicio).getTime()-new Date(f.dataInicio).getTime()),[m,a,o,c]),v=async f=>{const g=prompt("Para eliminar permanentemente este registo, introduza a senha:");if(g==="lomartex.24"){if(confirm("ATENÇÃO: Esta ação irá eliminar permanentemente o registo. Esta ação não pode ser desfeita. Continuar?"))try{await n(f),alert("Registo eliminado permanentemente.")}catch{alert("Erro ao eliminar registo")}}else g!==null&&alert("Senha incorreta")},b=async f=>{if(confirm(`Restaurar "${f.referenciaInterna}" para a lista ativa?`))try{alert("Funcionalidade de restauro será implementada na versão completa")}catch{alert("Erro ao restaurar registo")}},C=f=>f.variantes.reduce((g,k)=>g+Object.values(k.tamanhos).reduce((S,j)=>S+j,0),0),y=f=>({Desenvolvimento:"bg-yellow-100 text-yellow-800","1º proto":"bg-orange-100 text-orange-800","2º proto":"bg-orange-100 text-orange-800","Size-Set":"bg-blue-100 text-blue-800",PPS:"bg-purple-100 text-purple-800",Produção:"bg-indigo-100 text-indigo-800",Pronto:"bg-green-100 text-green-800",Enviado:"bg-gray-100 text-gray-800"})[f],p=f=>({Modelagem:"bg-yellow-100 text-yellow-700","Aguarda Componentes":"bg-orange-100 text-orange-700","FALTA COMPONENTES":"bg-red-100 text-red-700","Aguarda Malha":"bg-orange-100 text-orange-700","Com Defeito":"bg-red-100 text-red-700","Aguarda Comentários":"bg-amber-100 text-amber-700",Corte:"bg-blue-100 text-blue-700",Confecção:"bg-indigo-100 text-indigo-700",Transfers:"bg-purple-100 text-purple-700","Serviços Externos":"bg-teal-100 text-teal-700",Embalamento:"bg-green-100 text-green-700"})[f];return e?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando histórico..."})]})}):r?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ir,{className:"w-6 h-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),s.jsx("p",{className:"text-red-700",children:r})]})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Ir,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Histórico"}),s.jsx("p",{className:"text-gray-600",children:"Produções completas, enviadas e eliminadas"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ir,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-700",children:m.length}),s.jsx("div",{className:"text-sm text-green-600",children:"Total no Histórico"})]})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Vn,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-700",children:m.filter(f=>f.etapa==="Pronto").length}),s.jsx("div",{className:"text-sm text-blue-600",children:"Prontas"})]})]})}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ir,{className:"w-6 h-6 text-gray-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-700",children:m.filter(f=>f.etapa==="Enviado").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Enviadas"})]})]})})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Wa,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar por marca, cliente, referência...",value:c,onChange:f=>d(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yr,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:a,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todas as etapas"}),wr.map(f=>s.jsx("option",{value:f,children:f},f))]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yr,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:o,onChange:f=>l(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todos os estados"}),ms.map(f=>s.jsx("option",{value:f,children:f},f))]})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Registos Históricos"}),s.jsx("p",{className:"text-gray-600",children:"Produções completas e enviadas"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca / Cliente"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Etapa"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Entrega"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(f=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.referenciaInterna}),s.jsx("div",{className:"text-sm text-gray-500",children:f.referenciaCliente})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.marca}),s.jsx("div",{className:"text-sm text-gray-500",children:f.cliente})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(f.etapa)}`,children:f.etapa})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(f.estado)}`,children:f.estado})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600",children:C(f)}),s.jsx("div",{className:"text-xs text-gray-500",children:"unidades"})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(f.dataEstimadaEntrega).toLocaleDateString("pt-PT")}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Início: ",new Date(f.dataInicio).toLocaleDateString("pt-PT")]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("button",{onClick:()=>h({isOpen:!0,producao:f}),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Ver detalhes",children:s.jsx(Jt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>b(f),className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Restaurar para lista ativa",children:s.jsx(Th,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>v(f.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Eliminar permanentemente (requer senha)",children:s.jsx(_e,{className:"w-4 h-4"})})]})})]},f.id))})]})}),x.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ir,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum registo no histórico"}),s.jsx("p",{className:"text-gray-500",children:c||a!=="all"||o!=="all"?"Tente ajustar os filtros de pesquisa":"Registos completos e enviados aparecerão aqui"})]})]}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(hs,{className:"w-5 h-5 text-amber-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-amber-900 mb-1",children:"Informação Importante"}),s.jsx("p",{className:"text-sm text-amber-800",children:'A eliminação permanente de registos requer a senha "lomartex.24" e não pode ser desfeita. Use esta funcionalidade com cuidado.'})]})]})}),s.jsx(Ga,{isOpen:u.isOpen,onClose:()=>h({isOpen:!1,producao:null}),producao:u.producao})]})},Kx=()=>{const t=[{id:"conversor",title:"Conversor KG/MT",description:"Ferramenta para conversão entre quilogramas e metros",url:"https://luminous-blancmange-b169da.netlify.app/",icon:Bp,color:"bg-blue-500"},{id:"etiquetas",title:"Impressão de Etiquetas",description:"Sistema para impressão de etiquetas de produção",url:"https://dapper-banoffee-6c581f.netlify.app/",icon:Ph,color:"bg-green-500"},{id:"packing",title:"Packing List",description:"Gestão de listas de embalamento e expedição",url:"https://loquacious-tanuki-038afc.netlify.app/",icon:Yt,color:"bg-purple-500"}],e=r=>{window.open(r,"_blank","noopener,noreferrer")};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ch,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Apps Lomartex"}),s.jsx("p",{className:"text-gray-600",children:"Ferramentas auxiliares para produção e gestão"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>{const n=r.icon;return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(r.url),children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("div",{className:`w-12 h-12 ${r.color} rounded-lg flex items-center justify-center`,children:s.jsx(n,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.title}),s.jsx("p",{className:"text-sm text-gray-600",children:r.description})]}),s.jsx(So,{className:"w-5 h-5 text-gray-400"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Clique para abrir"}),s.jsxs("button",{onClick:a=>{a.stopPropagation(),e(r.url)},className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx("span",{children:"Abrir App"}),s.jsx(So,{className:"w-4 h-4"})]})]})]},r.id)})}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Sobre as Aplicações"}),s.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Conversor KG/MT:"})," Converte facilmente entre quilogramas e metros para diferentes tipos de tecidos"]}),s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Impressão de Etiquetas:"})," Gera e imprime etiquetas personalizadas para identificação de produtos"]}),s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Packing List:"})," Cria listas detalhadas de embalamento para expedição e controlo de stock"]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:s.jsxs("p",{className:"text-xs text-blue-700",children:[s.jsx("strong",{children:"Nota:"})," Estas aplicações abrem em novas janelas/separadores do navegador."]})})]})]})},Qx=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(vr,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Controlo de Qualidade"}),s.jsx("p",{className:"text-gray-600",children:"Sistema de gestão e controlo de qualidade"})]})]})}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx(r0,{className:"w-16 h-16 text-yellow-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-yellow-900 mb-2",children:"EM DESENVOLVIMENTO"}),s.jsx("p",{className:"text-yellow-800 text-lg",children:"Esta funcionalidade está atualmente em desenvolvimento e estará disponível em breve."})]})})]}),Jx=()=>{var E,D;const[t,e]=T.useState(null),[r,n]=T.useState({}),[a,i]=T.useState("all"),[o,l]=T.useState(""),[c,d]=T.useState(null),[u,h]=T.useState({valor:0,data:new Date().toISOString().split("T")[0],observacoes:""}),{producoes:m,loading:x,error:v,updateProducao:b}=pn(),C=N=>{e(N.id),n({numeroFatura:N.numeroFatura||"",dataFatura:N.dataFatura||"",valorFatura:N.valorFatura||0,pago:N.pago||!1,pagoParcial:N.pagoParcial||!1,pagamentos:N.pagamentos||[],valorPago:N.valorPago||0,valorRestante:(N.valorFatura||0)-(N.valorPago||0),fastprod:N.fastprod||!1,observacoesFinanceiras:N.observacoesFinanceiras||""})},y=async()=>{var R;if(!t)return;const N=m.find(V=>V.id===t);if(N)try{const V=((R=r.pagamentos)==null?void 0:R.reduce((w,A)=>w+A.valor,0))||0,K=(r.valorFatura||0)-V,_={...N,numeroFatura:r.numeroFatura,dataFatura:r.dataFatura,valorFatura:r.valorFatura,pago:K<=0&&(r.valorFatura||0)>0,pagoParcial:V>0&&K>0,pagamentos:r.pagamentos,valorPago:V,valorRestante:K,fastprod:r.fastprod,observacoesFinanceiras:r.observacoesFinanceiras};await b(t,_),e(null),n({})}catch{alert("Erro ao atualizar dados financeiros")}},p=()=>{e(null),n({})},f=()=>{if(u.valor<=0)return;const N={id:Date.now().toString(),valor:u.valor,data:u.data,observacoes:u.observacoes};n(R=>({...R,pagamentos:[...R.pagamentos||[],N]})),h({valor:0,data:new Date().toISOString().split("T")[0],observacoes:""})},g=N=>{n(R=>{var V;return{...R,pagamentos:((V=R.pagamentos)==null?void 0:V.filter(K=>K.id!==N))||[]}})},k=N=>N.pago&&N.numeroFatura?"bg-green-50 border-green-200":N.pagoParcial?"bg-blue-50 border-blue-200":N.numeroFatura&&!N.pago?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200",S=N=>N.pago&&N.numeroFatura?"Pago":N.pagoParcial?"Pago Parcial":N.numeroFatura&&!N.pago?"Faturado":"Por Faturar",j=T.useMemo(()=>m.filter(N=>{const R=a==="all"||a==="pago"&&N.pago||a==="pago-parcial"&&N.pagoParcial||a==="nao-pago"&&N.numeroFatura&&!N.pago&&!N.pagoParcial||a==="nao-faturado"&&!N.numeroFatura,V=o===""||N.cliente.toLowerCase().includes(o.toLowerCase())||N.referenciaInterna.toLowerCase().includes(o.toLowerCase())||N.numeroFatura&&N.numeroFatura.toLowerCase().includes(o.toLowerCase());return R&&V}).sort((N,R)=>new Date(R.dataInicio).getTime()-new Date(N.dataInicio).getTime()),[m,a,o]);return x?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando dados financeiros..."})]})}):v?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(qn,{className:"w-6 h-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),s.jsx("p",{className:"text-red-700",children:v})]})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(qn,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Módulo Financeiro"}),s.jsx("p",{className:"text-gray-600",children:"Gestão de faturação e pagamentos"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Wa,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente, referência, fatura...",value:o,onChange:N=>l(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yr,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:a,onChange:N=>i(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todos os status"}),s.jsx("option",{value:"pago",children:"Pagos"}),s.jsx("option",{value:"pago-parcial",children:"Pagos Parcialmente"}),s.jsx("option",{value:"nao-pago",children:"Faturados (não pagos)"}),s.jsx("option",{value:"nao-faturado",children:"Por Faturar"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestão Financeira"}),s.jsx("p",{className:"text-gray-600",children:"Faturação e pagamentos das produções"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nº Fatura"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Fatura"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Pago"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Restante"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"FastProd"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(N=>s.jsxs("tr",{className:`hover:bg-gray-50 border-l-4 ${k(N)}`,children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.cliente}),s.jsx("div",{className:"text-sm text-gray-500",children:N.marca})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.referenciaInterna}),s.jsx("div",{className:"text-sm text-gray-500",children:N.referenciaCliente})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t===N.id?s.jsx("input",{type:"text",value:r.numeroFatura||"",onChange:R=>n(V=>({...V,numeroFatura:R.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500",placeholder:"Nº Fatura"}):s.jsx("div",{className:"text-sm text-gray-900",children:N.numeroFatura||"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t===N.id?s.jsx("input",{type:"date",value:r.dataFatura||"",onChange:R=>n(V=>({...V,dataFatura:R.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500"}):s.jsx("div",{className:"text-sm text-gray-900",children:N.dataFatura?new Date(N.dataFatura).toLocaleDateString("pt-PT"):"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:t===N.id?s.jsx("input",{type:"number",step:"0.01",value:r.valorFatura||"",onChange:R=>{var _;const V=parseFloat(R.target.value)||0,K=((_=r.pagamentos)==null?void 0:_.reduce((w,A)=>w+A.valor,0))||0;n(w=>({...w,valorFatura:V,valorRestante:V-K}))},className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500 text-right",placeholder:"0.00"}):s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.valorFatura?`€${N.valorFatura.toFixed(2)}`:"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsxs("div",{className:"text-sm font-medium text-green-700",children:["€",(N.valorPago||0).toFixed(2)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsxs("div",{className:`text-sm font-medium ${(N.valorRestante||0)>0?"text-red-700":"text-green-700"}`,children:["€",(N.valorRestante||0).toFixed(2)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:t===N.id?s.jsx("input",{type:"checkbox",checked:r.fastprod||!1,onChange:R=>n(V=>({...V,fastprod:R.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}):s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N.fastprod?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:N.fastprod?"Sim":"Não"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N.pago&&N.numeroFatura?"bg-green-100 text-green-800":N.pagoParcial?"bg-blue-100 text-blue-800":N.numeroFatura&&!N.pago?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:S(N)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("div",{className:"flex items-center justify-center space-x-2",children:t===N.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>d(N.id),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Gerir pagamentos",children:s.jsx(Qc,{className:"w-4 h-4"})}),s.jsx("button",{onClick:y,className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Guardar",children:s.jsx(Nr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:p,className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Cancelar",children:s.jsx(Me,{className:"w-4 h-4"})})]}):s.jsxs(s.Fragment,{children:[N.pagamentos&&N.pagamentos.length>0&&s.jsx("button",{onClick:()=>d(N.id),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Ver pagamentos",children:s.jsx(Jt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>C(N),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Editar dados financeiros",children:s.jsx(rt,{className:"w-4 h-4"})})]})})})]},N.id))})]})}),t&&s.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações Financeiras"}),s.jsx("textarea",{value:r.observacoesFinanceiras||"",onChange:N=>n(R=>({...R,observacoesFinanceiras:N.target.value})),rows:3,placeholder:"Observações sobre faturação, pagamentos, condições especiais...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),j.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(qn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma produção encontrada"}),s.jsx("p",{className:"text-gray-500",children:o||a!=="all"?"Tente ajustar os filtros de pesquisa":"Não há dados financeiros disponíveis"})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Qc,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Gestão de Pagamentos"})]}),s.jsx("button",{onClick:()=>d(null),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["€",(r.valorFatura||0).toFixed(2)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Valor Total"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-lg font-bold text-green-700",children:["€",(((E=r.pagamentos)==null?void 0:E.reduce((N,R)=>N+R.valor,0))||0).toFixed(2)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Valor Pago"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-lg font-bold text-red-700",children:["€",((r.valorFatura||0)-(((D=r.pagamentos)==null?void 0:D.reduce((N,R)=>N+R.valor,0))||0)).toFixed(2)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Valor Restante"})]})]})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Pagamentos Registados"}),(r.pagamentos||[]).length===0?s.jsx("div",{className:"text-center py-6 text-gray-500",children:"Nenhum pagamento registado"}):s.jsx("div",{className:"space-y-2",children:(r.pagamentos||[]).map(N=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["€",N.valor.toFixed(2)]}),s.jsx("div",{className:"text-sm text-gray-600",children:new Date(N.data).toLocaleDateString("pt-PT")})]}),N.observacoes&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.observacoes})]}),s.jsx("button",{onClick:()=>g(N.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remover pagamento",children:s.jsx(Me,{className:"w-4 h-4"})})]},N.id))})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Adicionar Pagamento"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kp,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"number",step:"0.01",value:u.valor||"",onChange:N=>h(R=>({...R,valor:parseFloat(N.target.value)||0})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data do Pagamento"}),s.jsx("input",{type:"date",value:u.data,onChange:N=>h(R=>({...R,data:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações do Pagamento"}),s.jsx("input",{type:"text",value:u.observacoes,onChange:N=>h(R=>({...R,observacoes:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Transferência bancária, cheque, etc..."})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs("button",{onClick:f,disabled:u.valor<=0,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Adicionar Pagamento"})]})})]})]})]})})]})},Yx=({isOpen:t,onClose:e,onSave:r,user:n,availablePages:a})=>{const[i,o]=T.useState({email:"",name:"",password:"",role:"user",permissions:[]});T.useEffect(()=>{t&&n?o({email:n.email,name:n.name,password:"",role:n.role,permissions:n.permissions}):t&&!n&&o({email:"",name:"",password:"",role:"user",permissions:[]})},[t,n]);const l=u=>{u.preventDefault();const h=i.role==="admin"?a.map(m=>({page:m.id,canView:!0,canEdit:!0})):i.permissions;r({email:i.email,name:i.name,password:i.password,role:i.role,permissions:h})},c=(u,h,m)=>{o(x=>{const v=x.permissions.findIndex(b=>b.page===u);if(v>=0){const b=[...x.permissions];return b[v]={...b[v],[h]:m},h==="canView"&&!m&&(b[v].canEdit=!1),h==="canEdit"&&m&&(b[v].canView=!0),{...x,permissions:b}}else{const b={page:u,canView:h==="canView"?m:!1,canEdit:h==="canEdit"?m:!1};return h==="canEdit"&&m&&(b.canView=!0),{...x,permissions:[...x.permissions,b]}}})},d=u=>i.permissions.find(h=>h.page===u)||{page:u,canView:!1,canEdit:!1};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Gt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n?"Editar Utilizador":"Novo Utilizador"})]}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Me,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"}),s.jsx("input",{type:"text",value:i.name,onChange:u=>o(h=>({...h,name:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:i.email,onChange:u=>o(h=>({...h,email:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n?"Nova Palavra-passe (deixe em branco para manter)":"Palavra-passe"}),s.jsx("input",{type:"password",value:i.password,onChange:u=>o(h=>({...h,password:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!n,placeholder:n?"Deixe em branco para manter a atual":"Introduza a palavra-passe"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Função"}),s.jsxs("select",{value:i.role,onChange:u=>o(h=>({...h,role:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"user",children:"Utilizador"}),s.jsx("option",{value:"admin",children:"Administrador"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Administradores têm acesso total a todas as funcionalidades"})]}),i.role!=="admin"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissões por Página"}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Página"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Visualizar"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Editar"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(u=>{const h=d(u.id);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:u.label})]})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("input",{type:"checkbox",checked:h.canView,onChange:m=>c(u.id,"canView",m.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("input",{type:"checkbox",checked:h.canEdit,onChange:m=>c(u.id,"canEdit",m.target.checked),disabled:!h.canView,className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500 disabled:opacity-50"})})]},u.id)})})]})}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Para editar uma página, o utilizador deve ter permissão de visualização"})]}),i.role==="admin"&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-red-900",children:"Acesso de Administrador"}),s.jsx("p",{className:"text-sm text-red-700",children:"Este utilizador terá acesso total a todas as funcionalidades do sistema"})]})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Nr,{className:"w-4 h-4"}),s.jsxs("span",{children:[n?"Atualizar":"Criar"," Utilizador"]})]})]})]})]})}):null},Zx=()=>{const{user:t}=hn(),[e,r]=T.useState([]),[n,a]=T.useState({isOpen:!1}),[i,o]=T.useState(!0),l=[{id:"producoes",label:"Produções"},{id:"preparar-componentes",label:"Preparar Componentes"},{id:"gantt",label:"Planeamento"},{id:"registos",label:"Registos"},{id:"historico",label:"Histórico"},{id:"apps-lomartex",label:"Apps Lomartex"},{id:"controlo-qualidade",label:"Controlo de Qualidade"},{id:"financeiro",label:"Financeiro"},{id:"users",label:"Utilizadores"}];T.useEffect(()=>{setTimeout(()=>{r([{id:"1",email:"rmegaguimaraes@gmail.com",name:"Rui Guimarães",role:"admin",permissions:l.map(x=>({page:x.id,canView:!0,canEdit:!0})),created_at:"2025-01-01T00:00:00Z",updated_at:new Date().toISOString(),last_login:new Date().toISOString()},{id:"2",email:"operador@lomartex.pt",name:"Operador Produção",role:"user",permissions:[{page:"producoes",canView:!0,canEdit:!1},{page:"preparar-componentes",canView:!0,canEdit:!0},{page:"gantt",canView:!0,canEdit:!1}],created_at:"2025-01-15T00:00:00Z",updated_at:"2025-01-15T00:00:00Z"}]),o(!1)},500)},[]);const c=x=>{if(!x.password){alert("Palavra-passe é obrigatória para novos utilizadores");return}const v={...x,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r(b=>[...b,v]),a({isOpen:!1})},d=x=>{if(!n.user)return;const v={...x,password:x.password||n.user.password,id:n.user.id,created_at:n.user.created_at,updated_at:new Date().toISOString()};r(b=>b.map(C=>C.id===n.user.id?v:C)),a({isOpen:!1})},u=x=>{const v=e.find(b=>b.id===x);if(v){if(v.id===(t==null?void 0:t.id)){alert("Não pode eliminar a sua própria conta");return}confirm(`Tem certeza que deseja eliminar o utilizador "${v.name}"?`)&&r(b=>b.filter(C=>C.id!==x))}},h=x=>x==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800",m=x=>{const v=x.filter(C=>C.canView).length,b=x.filter(C=>C.canEdit).length;return`${v} visualizar, ${b} editar`};return i?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando utilizadores..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Gt,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestão de Utilizadores"}),s.jsx("p",{className:"text-gray-600",children:"Controlo de acesso e permissões do sistema"})]})]}),s.jsxs("button",{onClick:()=>a({isOpen:!0}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Novo Utilizador"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Gt,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-700",children:e.length}),s.jsx("div",{className:"text-sm text-blue-600",children:"Total Utilizadores"})]})]})}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(vr,{className:"w-6 h-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-red-700",children:e.filter(x=>x.role==="admin").length}),s.jsx("div",{className:"text-sm text-red-600",children:"Administradores"})]})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Gt,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-700",children:e.filter(x=>x.role==="user").length}),s.jsx("div",{className:"text-sm text-green-600",children:"Utilizadores"})]})]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Utilizadores"}),s.jsx("p",{className:"text-gray-600",children:"Gerir utilizadores e as suas permissões"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilizador"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Função"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissões"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Último Acesso"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 font-medium text-sm",children:x.name.split(" ").map(v=>v[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name}),s.jsx("div",{className:"text-sm text-gray-500",children:x.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h(x.role)}`,children:x.role==="admin"?"Administrador":"Utilizador"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:x.role==="admin"?"Acesso Total":m(x.permissions)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[x.permissions.length," página(s) configurada(s)"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:x.last_login?new Date(x.last_login).toLocaleString("pt-PT"):"Nunca"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("button",{onClick:()=>a({isOpen:!0,user:x}),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Editar utilizador",children:s.jsx(rt,{className:"w-4 h-4"})}),x.id!==(t==null?void 0:t.id)&&s.jsx("button",{onClick:()=>u(x.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Eliminar utilizador",children:s.jsx(_e,{className:"w-4 h-4"})})]})})]},x.id))})]})})]}),s.jsx(Yx,{isOpen:n.isOpen,onClose:()=>a({isOpen:!1}),onSave:n.user?d:c,user:n.user,availablePages:l})]})},Xx=()=>{const{isAuthenticated:t,loading:e}=hn(),[r,n]=T.useState("producoes");if(e)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando..."})]})});if(!t)return s.jsx(a0,{});const a=()=>{switch(r){case"producoes":return s.jsx(lt,{page:"producoes",children:s.jsx(fd,{})});case"preparar-componentes":return s.jsx(lt,{page:"preparar-componentes",children:s.jsx(qx,{})});case"gantt":return s.jsx(lt,{page:"gantt",children:s.jsx(Wx,{})});case"registos":return s.jsx(lt,{page:"registos",children:s.jsx(Ux,{})});case"historico":return s.jsx(lt,{page:"historico",children:s.jsx(Gx,{})});case"apps-lomartex":return s.jsx(lt,{page:"apps-lomartex",children:s.jsx(Kx,{})});case"controlo-qualidade":return s.jsx(lt,{page:"controlo-qualidade",children:s.jsx(Qx,{})});case"financeiro":return s.jsx(lt,{page:"financeiro",children:s.jsx(Jx,{})});case"users":return s.jsx(lt,{page:"users",children:s.jsx(Zx,{})});default:return s.jsx(lt,{page:"producoes",children:s.jsx(fd,{})})}};return s.jsx(c0,{currentPage:r,onPageChange:n,children:a()})};function ey(){return s.jsx(Fp,{children:s.jsx(Xx,{})})}Sh(document.getElementById("root")).render(s.jsx(T.StrictMode,{children:s.jsx(ey,{})}));
