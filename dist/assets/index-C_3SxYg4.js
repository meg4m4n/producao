(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var cu={exports:{}},ki={},uu={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cs=Symbol.for("react.element"),af=Symbol.for("react.portal"),of=Symbol.for("react.fragment"),lf=Symbol.for("react.strict_mode"),cf=Symbol.for("react.profiler"),uf=Symbol.for("react.provider"),df=Symbol.for("react.context"),hf=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),mf=Symbol.for("react.memo"),pf=Symbol.for("react.lazy"),Il=Symbol.iterator;function gf(t){return t===null||typeof t!="object"?null:(t=Il&&t[Il]||t["@@iterator"],typeof t=="function"?t:null)}var du={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hu=Object.assign,fu={};function sn(t,e,r){this.props=t,this.context=e,this.refs=fu,this.updater=r||du}sn.prototype.isReactComponent={};sn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mu(){}mu.prototype=sn.prototype;function $o(t,e,r){this.props=t,this.context=e,this.refs=fu,this.updater=r||du}var Io=$o.prototype=new mu;Io.constructor=$o;hu(Io,sn.prototype);Io.isPureReactComponent=!0;var Ll=Array.isArray,pu=Object.prototype.hasOwnProperty,Lo={current:null},gu={key:!0,ref:!0,__self:!0,__source:!0};function xu(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)pu.call(e,n)&&!gu.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:cs,type:t,key:i,ref:o,props:s,_owner:Lo.current}}function xf(t,e){return{$$typeof:cs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Do(t){return typeof t=="object"&&t!==null&&t.$$typeof===cs}function yf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Dl=/\/+/g;function Ki(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yf(""+t.key):e.toString(36)}function Us(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cs:case af:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Ki(o,0):n,Ll(s)?(r="",t!=null&&(r=t.replace(Dl,"$&/")+"/"),Us(s,e,r,"",function(u){return u})):s!=null&&(Do(s)&&(s=xf(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dl,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Ll(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Ki(i,l);o+=Us(i,e,r,c,s)}else if(c=gf(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Ki(i,l++),o+=Us(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vs(t,e,r){if(t==null)return t;var n=[],s=0;return Us(t,n,"","",function(i){return e.call(r,i,s++)}),n}function vf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ne={current:null},Fs={transition:null},wf={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:Fs,ReactCurrentOwner:Lo};function yu(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:vs,forEach:function(t,e,r){vs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vs(t,function(){e++}),e},toArray:function(t){return vs(t,function(e){return e})||[]},only:function(t){if(!Do(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=sn;q.Fragment=of;q.Profiler=cf;q.PureComponent=$o;q.StrictMode=lf;q.Suspense=ff;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wf;q.act=yu;q.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=hu({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Lo.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)pu.call(e,c)&&!gu.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:cs,type:t.type,key:s,ref:i,props:n,_owner:o}};q.createContext=function(t){return t={$$typeof:df,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uf,_context:t},t.Consumer=t};q.createElement=xu;q.createFactory=function(t){var e=xu.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:hf,render:t}};q.isValidElement=Do;q.lazy=function(t){return{$$typeof:pf,_payload:{_status:-1,_result:t},_init:vf}};q.memo=function(t,e){return{$$typeof:mf,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=Fs.transition;Fs.transition={};try{t()}finally{Fs.transition=e}};q.unstable_act=yu;q.useCallback=function(t,e){return Ne.current.useCallback(t,e)};q.useContext=function(t){return Ne.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Ne.current.useDeferredValue(t)};q.useEffect=function(t,e){return Ne.current.useEffect(t,e)};q.useId=function(){return Ne.current.useId()};q.useImperativeHandle=function(t,e,r){return Ne.current.useImperativeHandle(t,e,r)};q.useInsertionEffect=function(t,e){return Ne.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Ne.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Ne.current.useMemo(t,e)};q.useReducer=function(t,e,r){return Ne.current.useReducer(t,e,r)};q.useRef=function(t){return Ne.current.useRef(t)};q.useState=function(t){return Ne.current.useState(t)};q.useSyncExternalStore=function(t,e,r){return Ne.current.useSyncExternalStore(t,e,r)};q.useTransition=function(){return Ne.current.useTransition()};q.version="18.3.1";uu.exports=q;var $=uu.exports;const bf=nf($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf=$,_f=Symbol.for("react.element"),kf=Symbol.for("react.fragment"),Nf=Object.prototype.hasOwnProperty,Sf=jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ef={key:!0,ref:!0,__self:!0,__source:!0};function vu(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Nf.call(e,n)&&!Ef.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:_f,type:t,key:i,ref:o,props:s,_owner:Sf.current}}ki.Fragment=kf;ki.jsx=vu;ki.jsxs=vu;cu.exports=ki;var a=cu.exports,wu={exports:{}},Me={},bu={exports:{}},ju={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,R){var M=A.length;A.push(R);e:for(;0<M;){var X=M-1>>>1,ie=A[X];if(0<s(ie,R))A[X]=R,A[M]=ie,M=X;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var R=A[0],M=A.pop();if(M!==R){A[0]=M;e:for(var X=0,ie=A.length,vr=ie>>>1;X<vr;){var st=2*(X+1)-1,un=A[st],dt=st+1,wr=A[dt];if(0>s(un,M))dt<ie&&0>s(wr,un)?(A[X]=wr,A[dt]=M,X=dt):(A[X]=un,A[st]=M,X=st);else if(dt<ie&&0>s(wr,M))A[X]=wr,A[dt]=M,X=dt;else break e}}return R}function s(A,R){var M=A.sortIndex-R.sortIndex;return M!==0?M:A.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,y=!1,w=!1,j=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(A){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=A)n(u),R.sortIndex=R.expirationTime,e(c,R);else break;R=r(u)}}function g(A){if(j=!1,f(A),!w)if(r(c)!==null)w=!0,T(k);else{var R=r(u);R!==null&&O(g,R.startTime-A)}}function k(A,R){w=!1,j&&(j=!1,x(S),S=-1),y=!0;var M=m;try{for(f(R),h=r(c);h!==null&&(!(h.expirationTime>R)||A&&!H());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var ie=X(h.expirationTime<=R);R=t.unstable_now(),typeof ie=="function"?h.callback=ie:h===r(c)&&n(c),f(R)}else n(c);h=r(c)}if(h!==null)var vr=!0;else{var st=r(u);st!==null&&O(g,st.startTime-R),vr=!1}return vr}finally{h=null,m=M,y=!1}}var N=!1,b=null,S=-1,L=5,D=-1;function H(){return!(t.unstable_now()-D<L)}function xe(){if(b!==null){var A=t.unstable_now();D=A;var R=!0;try{R=b(!0,A)}finally{R?oe():(N=!1,b=null)}}else N=!1}var oe;if(typeof p=="function")oe=function(){p(xe)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,v=_.port2;_.port1.onmessage=xe,oe=function(){v.postMessage(null)}}else oe=function(){C(xe,0)};function T(A){b=A,N||(N=!0,oe())}function O(A,R){S=C(function(){A(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,T(k))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(A){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var M=m;m=R;try{return A()}finally{m=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,R){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var M=m;m=A;try{return R()}finally{m=M}},t.unstable_scheduleCallback=function(A,R,M){var X=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?X+M:X):M=X,A){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=M+ie,A={id:d++,callback:R,priorityLevel:A,startTime:M,expirationTime:ie,sortIndex:-1},M>X?(A.sortIndex=M,e(u,A),r(c)===null&&A===r(u)&&(j?(x(S),S=-1):j=!0,O(g,M-X))):(A.sortIndex=ie,e(c,A),w||y||(w=!0,T(k))),A},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(A){var R=m;return function(){var M=m;m=R;try{return A.apply(this,arguments)}finally{m=M}}}})(ju);bu.exports=ju;var Cf=bu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=$,Re=Cf;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _u=new Set,Bn={};function gr(t,e){Gr(t,e),Gr(t+"Capture",e)}function Gr(t,e){for(Bn[t]=e,t=0;t<e.length;t++)_u.add(e[t])}var jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=Object.prototype.hasOwnProperty,Tf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rl={},Ml={};function Of(t){return Ea.call(Ml,t)?!0:Ea.call(Rl,t)?!1:Tf.test(t)?Ml[t]=!0:(Rl[t]=!0,!1)}function Af(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $f(t,e,r,n){if(e===null||typeof e>"u"||Af(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Se(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ge[t]=new Se(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ge[e]=new Se(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ge[t]=new Se(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ge[t]=new Se(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ge[t]=new Se(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ge[t]=new Se(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ge[t]=new Se(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ge[t]=new Se(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ge[t]=new Se(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ro=/[\-:]([a-z])/g;function Mo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ro,Mo);ge[e]=new Se(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ro,Mo);ge[e]=new Se(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ro,Mo);ge[e]=new Se(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ge[t]=new Se(t,1,!1,t.toLowerCase(),null,!1,!1)});ge.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ge[t]=new Se(t,1,!1,t.toLowerCase(),null,!0,!0)});function zo(t,e,r,n){var s=ge.hasOwnProperty(e)?ge[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($f(e,r,s,n)&&(r=null),n||s===null?Of(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Et=Pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ws=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Or=Symbol.for("react.fragment"),Uo=Symbol.for("react.strict_mode"),Ca=Symbol.for("react.profiler"),ku=Symbol.for("react.provider"),Nu=Symbol.for("react.context"),Fo=Symbol.for("react.forward_ref"),Pa=Symbol.for("react.suspense"),Ta=Symbol.for("react.suspense_list"),Bo=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),Su=Symbol.for("react.offscreen"),zl=Symbol.iterator;function hn(t){return t===null||typeof t!="object"?null:(t=zl&&t[zl]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,Gi;function bn(t){if(Gi===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Gi=e&&e[1]||""}return`
`+Gi+t}var Qi=!1;function Ji(t,e){if(!t||Qi)return"";Qi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Qi=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?bn(t):""}function If(t){switch(t.tag){case 5:return bn(t.type);case 16:return bn("Lazy");case 13:return bn("Suspense");case 19:return bn("SuspenseList");case 0:case 2:case 15:return t=Ji(t.type,!1),t;case 11:return t=Ji(t.type.render,!1),t;case 1:return t=Ji(t.type,!0),t;default:return""}}function Oa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Or:return"Fragment";case Tr:return"Portal";case Ca:return"Profiler";case Uo:return"StrictMode";case Pa:return"Suspense";case Ta:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nu:return(t.displayName||"Context")+".Consumer";case ku:return(t._context.displayName||"Context")+".Provider";case Fo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bo:return e=t.displayName||null,e!==null?e:Oa(t.type)||"Memo";case Ot:e=t._payload,t=t._init;try{return Oa(t(e))}catch{}}return null}function Lf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oa(e);case 8:return e===Uo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Df(t){var e=Eu(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bs(t){t._valueTracker||(t._valueTracker=Df(t))}function Cu(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Eu(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Xs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Aa(t,e){var r=e.checked;return te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ul(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Vt(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pu(t,e){e=e.checked,e!=null&&zo(t,"checked",e,!1)}function $a(t,e){Pu(t,e);var r=Vt(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ia(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ia(t,e.type,Vt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fl(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ia(t,e,r){(e!=="number"||Xs(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var jn=Array.isArray;function Br(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Vt(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function La(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bl(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(P(92));if(jn(r)){if(1<r.length)throw Error(P(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Vt(r)}}function Tu(t,e){var r=Vt(e.value),n=Vt(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function ql(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ou(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Da(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ou(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var js,Au=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(js=js||document.createElement("div"),js.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=js.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var En={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rf=["Webkit","ms","Moz","O"];Object.keys(En).forEach(function(t){Rf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),En[e]=En[t]})});function $u(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||En.hasOwnProperty(t)&&En[t]?(""+e).trim():e+"px"}function Iu(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=$u(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Mf=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ra(t,e){if(e){if(Mf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function Ma(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var za=null;function qo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ua=null,qr=null,Wr=null;function Wl(t){if(t=hs(t)){if(typeof Ua!="function")throw Error(P(280));var e=t.stateNode;e&&(e=Pi(e),Ua(t.stateNode,t.type,e))}}function Lu(t){qr?Wr?Wr.push(t):Wr=[t]:qr=t}function Du(){if(qr){var t=qr,e=Wr;if(Wr=qr=null,Wl(t),e)for(t=0;t<e.length;t++)Wl(e[t])}}function Ru(t,e){return t(e)}function Mu(){}var Yi=!1;function zu(t,e,r){if(Yi)return t(e,r);Yi=!0;try{return Ru(t,e,r)}finally{Yi=!1,(qr!==null||Wr!==null)&&(Mu(),Du())}}function Wn(t,e){var r=t.stateNode;if(r===null)return null;var n=Pi(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(P(231,e,typeof r));return r}var Fa=!1;if(jt)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){Fa=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{Fa=!1}function zf(t,e,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Cn=!1,Zs=null,ei=!1,Ba=null,Uf={onError:function(t){Cn=!0,Zs=t}};function Ff(t,e,r,n,s,i,o,l,c){Cn=!1,Zs=null,zf.apply(Uf,arguments)}function Bf(t,e,r,n,s,i,o,l,c){if(Ff.apply(this,arguments),Cn){if(Cn){var u=Zs;Cn=!1,Zs=null}else throw Error(P(198));ei||(ei=!0,Ba=u)}}function xr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Uu(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hl(t){if(xr(t)!==t)throw Error(P(188))}function qf(t){var e=t.alternate;if(!e){if(e=xr(t),e===null)throw Error(P(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Hl(s),t;if(i===n)return Hl(s),e;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?t:e}function Fu(t){return t=qf(t),t!==null?Bu(t):null}function Bu(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bu(t);if(e!==null)return e;t=t.sibling}return null}var qu=Re.unstable_scheduleCallback,Vl=Re.unstable_cancelCallback,Wf=Re.unstable_shouldYield,Hf=Re.unstable_requestPaint,ne=Re.unstable_now,Vf=Re.unstable_getCurrentPriorityLevel,Wo=Re.unstable_ImmediatePriority,Wu=Re.unstable_UserBlockingPriority,ti=Re.unstable_NormalPriority,Kf=Re.unstable_LowPriority,Hu=Re.unstable_IdlePriority,Ni=null,ct=null;function Gf(t){if(ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Ni,t,void 0,(t.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:Yf,Qf=Math.log,Jf=Math.LN2;function Yf(t){return t>>>=0,t===0?32:31-(Qf(t)/Jf|0)|0}var _s=64,ks=4194304;function _n(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ri(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=_n(l):(i&=o,i!==0&&(n=_n(i)))}else o=r&~s,o!==0?n=_n(o):i!==0&&(n=_n(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-tt(e),s=1<<r,n|=t[r],e&=~s;return n}function Xf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zf(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tt(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Xf(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function qa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vu(){var t=_s;return _s<<=1,!(_s&4194240)&&(_s=64),t}function Xi(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function us(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tt(e),t[e]=r}function em(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-tt(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Ho(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-tt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var V=0;function Ku(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gu,Vo,Qu,Ju,Yu,Wa=!1,Ns=[],Mt=null,zt=null,Ut=null,Hn=new Map,Vn=new Map,$t=[],tm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kl(t,e){switch(t){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Hn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vn.delete(e.pointerId)}}function mn(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=hs(e),e!==null&&Vo(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function rm(t,e,r,n,s){switch(e){case"focusin":return Mt=mn(Mt,t,e,r,n,s),!0;case"dragenter":return zt=mn(zt,t,e,r,n,s),!0;case"mouseover":return Ut=mn(Ut,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Hn.set(i,mn(Hn.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Vn.set(i,mn(Vn.get(i)||null,t,e,r,n,s)),!0}return!1}function Xu(t){var e=ir(t.target);if(e!==null){var r=xr(e);if(r!==null){if(e=r.tag,e===13){if(e=Uu(r),e!==null){t.blockedOn=e,Yu(t.priority,function(){Qu(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ha(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);za=n,r.target.dispatchEvent(n),za=null}else return e=hs(r),e!==null&&Vo(e),t.blockedOn=r,!1;e.shift()}return!0}function Gl(t,e,r){Bs(t)&&r.delete(e)}function nm(){Wa=!1,Mt!==null&&Bs(Mt)&&(Mt=null),zt!==null&&Bs(zt)&&(zt=null),Ut!==null&&Bs(Ut)&&(Ut=null),Hn.forEach(Gl),Vn.forEach(Gl)}function pn(t,e){t.blockedOn===e&&(t.blockedOn=null,Wa||(Wa=!0,Re.unstable_scheduleCallback(Re.unstable_NormalPriority,nm)))}function Kn(t){function e(s){return pn(s,t)}if(0<Ns.length){pn(Ns[0],t);for(var r=1;r<Ns.length;r++){var n=Ns[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Mt!==null&&pn(Mt,t),zt!==null&&pn(zt,t),Ut!==null&&pn(Ut,t),Hn.forEach(e),Vn.forEach(e),r=0;r<$t.length;r++)n=$t[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<$t.length&&(r=$t[0],r.blockedOn===null);)Xu(r),r.blockedOn===null&&$t.shift()}var Hr=Et.ReactCurrentBatchConfig,ni=!0;function sm(t,e,r,n){var s=V,i=Hr.transition;Hr.transition=null;try{V=1,Ko(t,e,r,n)}finally{V=s,Hr.transition=i}}function im(t,e,r,n){var s=V,i=Hr.transition;Hr.transition=null;try{V=4,Ko(t,e,r,n)}finally{V=s,Hr.transition=i}}function Ko(t,e,r,n){if(ni){var s=Ha(t,e,r,n);if(s===null)la(t,e,n,si,r),Kl(t,n);else if(rm(s,t,e,r,n))n.stopPropagation();else if(Kl(t,n),e&4&&-1<tm.indexOf(t)){for(;s!==null;){var i=hs(s);if(i!==null&&Gu(i),i=Ha(t,e,r,n),i===null&&la(t,e,n,si,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else la(t,e,n,null,r)}}var si=null;function Ha(t,e,r,n){if(si=null,t=qo(n),t=ir(t),t!==null)if(e=xr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Uu(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return si=t,null}function Zu(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vf()){case Wo:return 1;case Wu:return 4;case ti:case Kf:return 16;case Hu:return 536870912;default:return 16}default:return 16}}var Dt=null,Go=null,qs=null;function ed(){if(qs)return qs;var t,e=Go,r=e.length,n,s="value"in Dt?Dt.value:Dt.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return qs=s.slice(t,1<n?1-n:void 0)}function Ws(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ss(){return!0}function Ql(){return!1}function ze(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ss:Ql,this.isPropagationStopped=Ql,this}return te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),e}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=ze(an),ds=te({},an,{view:0,detail:0}),am=ze(ds),Zi,ea,gn,Si=te({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gn&&(gn&&t.type==="mousemove"?(Zi=t.screenX-gn.screenX,ea=t.screenY-gn.screenY):ea=Zi=0,gn=t),Zi)},movementY:function(t){return"movementY"in t?t.movementY:ea}}),Jl=ze(Si),om=te({},Si,{dataTransfer:0}),lm=ze(om),cm=te({},ds,{relatedTarget:0}),ta=ze(cm),um=te({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),dm=ze(um),hm=te({},an,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fm=ze(hm),mm=te({},an,{data:0}),Yl=ze(mm),pm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ym(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xm[t])?!!e[t]:!1}function Jo(){return ym}var vm=te({},ds,{key:function(t){if(t.key){var e=pm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ws(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jo,charCode:function(t){return t.type==="keypress"?Ws(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ws(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wm=ze(vm),bm=te({},Si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xl=ze(bm),jm=te({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jo}),_m=ze(jm),km=te({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nm=ze(km),Sm=te({},Si,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Em=ze(Sm),Cm=[9,13,27,32],Yo=jt&&"CompositionEvent"in window,Pn=null;jt&&"documentMode"in document&&(Pn=document.documentMode);var Pm=jt&&"TextEvent"in window&&!Pn,td=jt&&(!Yo||Pn&&8<Pn&&11>=Pn),Zl=" ",ec=!1;function rd(t,e){switch(t){case"keyup":return Cm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ar=!1;function Tm(t,e){switch(t){case"compositionend":return nd(e);case"keypress":return e.which!==32?null:(ec=!0,Zl);case"textInput":return t=e.data,t===Zl&&ec?null:t;default:return null}}function Om(t,e){if(Ar)return t==="compositionend"||!Yo&&rd(t,e)?(t=ed(),qs=Go=Dt=null,Ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return td&&e.locale!=="ko"?null:e.data;default:return null}}var Am={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Am[t.type]:e==="textarea"}function sd(t,e,r,n){Lu(n),e=ii(e,"onChange"),0<e.length&&(r=new Qo("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Tn=null,Gn=null;function $m(t){pd(t,0)}function Ei(t){var e=Lr(t);if(Cu(e))return t}function Im(t,e){if(t==="change")return e}var id=!1;if(jt){var ra;if(jt){var na="oninput"in document;if(!na){var rc=document.createElement("div");rc.setAttribute("oninput","return;"),na=typeof rc.oninput=="function"}ra=na}else ra=!1;id=ra&&(!document.documentMode||9<document.documentMode)}function nc(){Tn&&(Tn.detachEvent("onpropertychange",ad),Gn=Tn=null)}function ad(t){if(t.propertyName==="value"&&Ei(Gn)){var e=[];sd(e,Gn,t,qo(t)),zu($m,e)}}function Lm(t,e,r){t==="focusin"?(nc(),Tn=e,Gn=r,Tn.attachEvent("onpropertychange",ad)):t==="focusout"&&nc()}function Dm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ei(Gn)}function Rm(t,e){if(t==="click")return Ei(e)}function Mm(t,e){if(t==="input"||t==="change")return Ei(e)}function zm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nt=typeof Object.is=="function"?Object.is:zm;function Qn(t,e){if(nt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ea.call(e,s)||!nt(t[s],e[s]))return!1}return!0}function sc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ic(t,e){var r=sc(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sc(r)}}function od(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?od(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ld(){for(var t=window,e=Xs();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Xs(t.document)}return e}function Xo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Um(t){var e=ld(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&od(r.ownerDocument.documentElement,r)){if(n!==null&&Xo(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=ic(r,i);var o=ic(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fm=jt&&"documentMode"in document&&11>=document.documentMode,$r=null,Va=null,On=null,Ka=!1;function ac(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ka||$r==null||$r!==Xs(n)||(n=$r,"selectionStart"in n&&Xo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),On&&Qn(On,n)||(On=n,n=ii(Va,"onSelect"),0<n.length&&(e=new Qo("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=$r)))}function Es(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ir={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionend:Es("Transition","TransitionEnd")},sa={},cd={};jt&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Ci(t){if(sa[t])return sa[t];if(!Ir[t])return t;var e=Ir[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cd)return sa[t]=e[r];return t}var ud=Ci("animationend"),dd=Ci("animationiteration"),hd=Ci("animationstart"),fd=Ci("transitionend"),md=new Map,oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qt(t,e){md.set(t,e),gr(e,[t])}for(var ia=0;ia<oc.length;ia++){var aa=oc[ia],Bm=aa.toLowerCase(),qm=aa[0].toUpperCase()+aa.slice(1);Qt(Bm,"on"+qm)}Qt(ud,"onAnimationEnd");Qt(dd,"onAnimationIteration");Qt(hd,"onAnimationStart");Qt("dblclick","onDoubleClick");Qt("focusin","onFocus");Qt("focusout","onBlur");Qt(fd,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wm=new Set("cancel close invalid load scroll toggle".split(" ").concat(kn));function lc(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Bf(n,e,void 0,t),t.currentTarget=null}function pd(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;lc(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;lc(s,l,u),i=c}}}if(ei)throw t=Ba,ei=!1,Ba=null,t}function Q(t,e){var r=e[Xa];r===void 0&&(r=e[Xa]=new Set);var n=t+"__bubble";r.has(n)||(gd(e,t,2,!1),r.add(n))}function oa(t,e,r){var n=0;e&&(n|=4),gd(r,t,n,e)}var Cs="_reactListening"+Math.random().toString(36).slice(2);function Jn(t){if(!t[Cs]){t[Cs]=!0,_u.forEach(function(r){r!=="selectionchange"&&(Wm.has(r)||oa(r,!1,t),oa(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cs]||(e[Cs]=!0,oa("selectionchange",!1,e))}}function gd(t,e,r,n){switch(Zu(e)){case 1:var s=sm;break;case 4:s=im;break;default:s=Ko}r=s.bind(null,e,r,t),s=void 0,!Fa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function la(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ir(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}zu(function(){var u=i,d=qo(r),h=[];e:{var m=md.get(t);if(m!==void 0){var y=Qo,w=t;switch(t){case"keypress":if(Ws(r)===0)break e;case"keydown":case"keyup":y=wm;break;case"focusin":w="focus",y=ta;break;case"focusout":w="blur",y=ta;break;case"beforeblur":case"afterblur":y=ta;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_m;break;case ud:case dd:case hd:y=dm;break;case fd:y=Nm;break;case"scroll":y=am;break;case"wheel":y=Em;break;case"copy":case"cut":case"paste":y=fm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Xl}var j=(e&4)!==0,C=!j&&t==="scroll",x=j?m!==null?m+"Capture":null:m;j=[];for(var p=u,f;p!==null;){f=p;var g=f.stateNode;if(f.tag===5&&g!==null&&(f=g,x!==null&&(g=Wn(p,x),g!=null&&j.push(Yn(p,g,f)))),C)break;p=p.return}0<j.length&&(m=new y(m,w,null,r,d),h.push({event:m,listeners:j}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&r!==za&&(w=r.relatedTarget||r.fromElement)&&(ir(w)||w[_t]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(w=r.relatedTarget||r.toElement,y=u,w=w?ir(w):null,w!==null&&(C=xr(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=u),y!==w)){if(j=Jl,g="onMouseLeave",x="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(j=Xl,g="onPointerLeave",x="onPointerEnter",p="pointer"),C=y==null?m:Lr(y),f=w==null?m:Lr(w),m=new j(g,p+"leave",y,r,d),m.target=C,m.relatedTarget=f,g=null,ir(d)===u&&(j=new j(x,p+"enter",w,r,d),j.target=f,j.relatedTarget=C,g=j),C=g,y&&w)t:{for(j=y,x=w,p=0,f=j;f;f=br(f))p++;for(f=0,g=x;g;g=br(g))f++;for(;0<p-f;)j=br(j),p--;for(;0<f-p;)x=br(x),f--;for(;p--;){if(j===x||x!==null&&j===x.alternate)break t;j=br(j),x=br(x)}j=null}else j=null;y!==null&&cc(h,m,y,j,!1),w!==null&&C!==null&&cc(h,C,w,j,!0)}}e:{if(m=u?Lr(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var k=Im;else if(tc(m))if(id)k=Mm;else{k=Dm;var N=Lm}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=Rm);if(k&&(k=k(t,u))){sd(h,k,r,d);break e}N&&N(t,m,u),t==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Ia(m,"number",m.value)}switch(N=u?Lr(u):window,t){case"focusin":(tc(N)||N.contentEditable==="true")&&($r=N,Va=u,On=null);break;case"focusout":On=Va=$r=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,ac(h,r,d);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":ac(h,r,d)}var b;if(Yo)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ar?rd(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(td&&r.locale!=="ko"&&(Ar||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ar&&(b=ed()):(Dt=d,Go="value"in Dt?Dt.value:Dt.textContent,Ar=!0)),N=ii(u,S),0<N.length&&(S=new Yl(S,t,null,r,d),h.push({event:S,listeners:N}),b?S.data=b:(b=nd(r),b!==null&&(S.data=b)))),(b=Pm?Tm(t,r):Om(t,r))&&(u=ii(u,"onBeforeInput"),0<u.length&&(d=new Yl("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=b))}pd(h,e)})}function Yn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ii(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wn(t,r),i!=null&&n.unshift(Yn(t,i,s)),i=Wn(t,e),i!=null&&n.push(Yn(t,i,s))),t=t.return}return n}function br(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cc(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Wn(r,i),c!=null&&o.unshift(Yn(r,c,l))):s||(c=Wn(r,i),c!=null&&o.push(Yn(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Hm=/\r\n?/g,Vm=/\u0000|\uFFFD/g;function uc(t){return(typeof t=="string"?t:""+t).replace(Hm,`
`).replace(Vm,"")}function Ps(t,e,r){if(e=uc(e),uc(t)!==e&&r)throw Error(P(425))}function ai(){}var Ga=null,Qa=null;function Ja(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ya=typeof setTimeout=="function"?setTimeout:void 0,Km=typeof clearTimeout=="function"?clearTimeout:void 0,dc=typeof Promise=="function"?Promise:void 0,Gm=typeof queueMicrotask=="function"?queueMicrotask:typeof dc<"u"?function(t){return dc.resolve(null).then(t).catch(Qm)}:Ya;function Qm(t){setTimeout(function(){throw t})}function ca(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Kn(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Kn(e)}function Ft(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var on=Math.random().toString(36).slice(2),lt="__reactFiber$"+on,Xn="__reactProps$"+on,_t="__reactContainer$"+on,Xa="__reactEvents$"+on,Jm="__reactListeners$"+on,Ym="__reactHandles$"+on;function ir(t){var e=t[lt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[_t]||r[lt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=hc(t);t!==null;){if(r=t[lt])return r;t=hc(t)}return e}t=r,r=t.parentNode}return null}function hs(t){return t=t[lt]||t[_t],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function Pi(t){return t[Xn]||null}var Za=[],Dr=-1;function Jt(t){return{current:t}}function J(t){0>Dr||(t.current=Za[Dr],Za[Dr]=null,Dr--)}function G(t,e){Dr++,Za[Dr]=t.current,t.current=e}var Kt={},be=Jt(Kt),Oe=Jt(!1),ur=Kt;function Qr(t,e){var r=t.type.contextTypes;if(!r)return Kt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ae(t){return t=t.childContextTypes,t!=null}function oi(){J(Oe),J(be)}function fc(t,e,r){if(be.current!==Kt)throw Error(P(168));G(be,e),G(Oe,r)}function xd(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(P(108,Lf(t)||"Unknown",s));return te({},r,n)}function li(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kt,ur=be.current,G(be,t),G(Oe,Oe.current),!0}function mc(t,e,r){var n=t.stateNode;if(!n)throw Error(P(169));r?(t=xd(t,e,ur),n.__reactInternalMemoizedMergedChildContext=t,J(Oe),J(be),G(be,t)):J(Oe),G(Oe,r)}var gt=null,Ti=!1,ua=!1;function yd(t){gt===null?gt=[t]:gt.push(t)}function Xm(t){Ti=!0,yd(t)}function Yt(){if(!ua&&gt!==null){ua=!0;var t=0,e=V;try{var r=gt;for(V=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}gt=null,Ti=!1}catch(s){throw gt!==null&&(gt=gt.slice(t+1)),qu(Wo,Yt),s}finally{V=e,ua=!1}}return null}var Rr=[],Mr=0,ci=null,ui=0,Fe=[],Be=0,dr=null,xt=1,yt="";function tr(t,e){Rr[Mr++]=ui,Rr[Mr++]=ci,ci=t,ui=e}function vd(t,e,r){Fe[Be++]=xt,Fe[Be++]=yt,Fe[Be++]=dr,dr=t;var n=xt;t=yt;var s=32-tt(n)-1;n&=~(1<<s),r+=1;var i=32-tt(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,xt=1<<32-tt(e)+s|r<<s|n,yt=i+t}else xt=1<<i|r<<s|n,yt=t}function Zo(t){t.return!==null&&(tr(t,1),vd(t,1,0))}function el(t){for(;t===ci;)ci=Rr[--Mr],Rr[Mr]=null,ui=Rr[--Mr],Rr[Mr]=null;for(;t===dr;)dr=Fe[--Be],Fe[Be]=null,yt=Fe[--Be],Fe[Be]=null,xt=Fe[--Be],Fe[Be]=null}var De=null,Le=null,Y=!1,Ze=null;function wd(t,e){var r=qe(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function pc(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,De=t,Le=Ft(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,De=t,Le=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=dr!==null?{id:xt,overflow:yt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=qe(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,De=t,Le=null,!0):!1;default:return!1}}function eo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function to(t){if(Y){var e=Le;if(e){var r=e;if(!pc(t,e)){if(eo(t))throw Error(P(418));e=Ft(r.nextSibling);var n=De;e&&pc(t,e)?wd(n,r):(t.flags=t.flags&-4097|2,Y=!1,De=t)}}else{if(eo(t))throw Error(P(418));t.flags=t.flags&-4097|2,Y=!1,De=t}}}function gc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;De=t}function Ts(t){if(t!==De)return!1;if(!Y)return gc(t),Y=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ja(t.type,t.memoizedProps)),e&&(e=Le)){if(eo(t))throw bd(),Error(P(418));for(;e;)wd(t,e),e=Ft(e.nextSibling)}if(gc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Le=Ft(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Le=null}}else Le=De?Ft(t.stateNode.nextSibling):null;return!0}function bd(){for(var t=Le;t;)t=Ft(t.nextSibling)}function Jr(){Le=De=null,Y=!1}function tl(t){Ze===null?Ze=[t]:Ze.push(t)}var Zm=Et.ReactCurrentBatchConfig;function xn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,t))}return t}function Os(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xc(t){var e=t._init;return e(t._payload)}function jd(t){function e(x,p){if(t){var f=x.deletions;f===null?(x.deletions=[p],x.flags|=16):f.push(p)}}function r(x,p){if(!t)return null;for(;p!==null;)e(x,p),p=p.sibling;return null}function n(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function s(x,p){return x=Ht(x,p),x.index=0,x.sibling=null,x}function i(x,p,f){return x.index=f,t?(f=x.alternate,f!==null?(f=f.index,f<p?(x.flags|=2,p):f):(x.flags|=2,p)):(x.flags|=1048576,p)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,p,f,g){return p===null||p.tag!==6?(p=xa(f,x.mode,g),p.return=x,p):(p=s(p,f),p.return=x,p)}function c(x,p,f,g){var k=f.type;return k===Or?d(x,p,f.props.children,g,f.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ot&&xc(k)===p.type)?(g=s(p,f.props),g.ref=xn(x,p,f),g.return=x,g):(g=Ys(f.type,f.key,f.props,null,x.mode,g),g.ref=xn(x,p,f),g.return=x,g)}function u(x,p,f,g){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=ya(f,x.mode,g),p.return=x,p):(p=s(p,f.children||[]),p.return=x,p)}function d(x,p,f,g,k){return p===null||p.tag!==7?(p=cr(f,x.mode,g,k),p.return=x,p):(p=s(p,f),p.return=x,p)}function h(x,p,f){if(typeof p=="string"&&p!==""||typeof p=="number")return p=xa(""+p,x.mode,f),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ws:return f=Ys(p.type,p.key,p.props,null,x.mode,f),f.ref=xn(x,null,p),f.return=x,f;case Tr:return p=ya(p,x.mode,f),p.return=x,p;case Ot:var g=p._init;return h(x,g(p._payload),f)}if(jn(p)||hn(p))return p=cr(p,x.mode,f,null),p.return=x,p;Os(x,p)}return null}function m(x,p,f,g){var k=p!==null?p.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return k!==null?null:l(x,p,""+f,g);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ws:return f.key===k?c(x,p,f,g):null;case Tr:return f.key===k?u(x,p,f,g):null;case Ot:return k=f._init,m(x,p,k(f._payload),g)}if(jn(f)||hn(f))return k!==null?null:d(x,p,f,g,null);Os(x,f)}return null}function y(x,p,f,g,k){if(typeof g=="string"&&g!==""||typeof g=="number")return x=x.get(f)||null,l(p,x,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ws:return x=x.get(g.key===null?f:g.key)||null,c(p,x,g,k);case Tr:return x=x.get(g.key===null?f:g.key)||null,u(p,x,g,k);case Ot:var N=g._init;return y(x,p,f,N(g._payload),k)}if(jn(g)||hn(g))return x=x.get(f)||null,d(p,x,g,k,null);Os(p,g)}return null}function w(x,p,f,g){for(var k=null,N=null,b=p,S=p=0,L=null;b!==null&&S<f.length;S++){b.index>S?(L=b,b=null):L=b.sibling;var D=m(x,b,f[S],g);if(D===null){b===null&&(b=L);break}t&&b&&D.alternate===null&&e(x,b),p=i(D,p,S),N===null?k=D:N.sibling=D,N=D,b=L}if(S===f.length)return r(x,b),Y&&tr(x,S),k;if(b===null){for(;S<f.length;S++)b=h(x,f[S],g),b!==null&&(p=i(b,p,S),N===null?k=b:N.sibling=b,N=b);return Y&&tr(x,S),k}for(b=n(x,b);S<f.length;S++)L=y(b,x,S,f[S],g),L!==null&&(t&&L.alternate!==null&&b.delete(L.key===null?S:L.key),p=i(L,p,S),N===null?k=L:N.sibling=L,N=L);return t&&b.forEach(function(H){return e(x,H)}),Y&&tr(x,S),k}function j(x,p,f,g){var k=hn(f);if(typeof k!="function")throw Error(P(150));if(f=k.call(f),f==null)throw Error(P(151));for(var N=k=null,b=p,S=p=0,L=null,D=f.next();b!==null&&!D.done;S++,D=f.next()){b.index>S?(L=b,b=null):L=b.sibling;var H=m(x,b,D.value,g);if(H===null){b===null&&(b=L);break}t&&b&&H.alternate===null&&e(x,b),p=i(H,p,S),N===null?k=H:N.sibling=H,N=H,b=L}if(D.done)return r(x,b),Y&&tr(x,S),k;if(b===null){for(;!D.done;S++,D=f.next())D=h(x,D.value,g),D!==null&&(p=i(D,p,S),N===null?k=D:N.sibling=D,N=D);return Y&&tr(x,S),k}for(b=n(x,b);!D.done;S++,D=f.next())D=y(b,x,S,D.value,g),D!==null&&(t&&D.alternate!==null&&b.delete(D.key===null?S:D.key),p=i(D,p,S),N===null?k=D:N.sibling=D,N=D);return t&&b.forEach(function(xe){return e(x,xe)}),Y&&tr(x,S),k}function C(x,p,f,g){if(typeof f=="object"&&f!==null&&f.type===Or&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case ws:e:{for(var k=f.key,N=p;N!==null;){if(N.key===k){if(k=f.type,k===Or){if(N.tag===7){r(x,N.sibling),p=s(N,f.props.children),p.return=x,x=p;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ot&&xc(k)===N.type){r(x,N.sibling),p=s(N,f.props),p.ref=xn(x,N,f),p.return=x,x=p;break e}r(x,N);break}else e(x,N);N=N.sibling}f.type===Or?(p=cr(f.props.children,x.mode,g,f.key),p.return=x,x=p):(g=Ys(f.type,f.key,f.props,null,x.mode,g),g.ref=xn(x,p,f),g.return=x,x=g)}return o(x);case Tr:e:{for(N=f.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){r(x,p.sibling),p=s(p,f.children||[]),p.return=x,x=p;break e}else{r(x,p);break}else e(x,p);p=p.sibling}p=ya(f,x.mode,g),p.return=x,x=p}return o(x);case Ot:return N=f._init,C(x,p,N(f._payload),g)}if(jn(f))return w(x,p,f,g);if(hn(f))return j(x,p,f,g);Os(x,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,p!==null&&p.tag===6?(r(x,p.sibling),p=s(p,f),p.return=x,x=p):(r(x,p),p=xa(f,x.mode,g),p.return=x,x=p),o(x)):r(x,p)}return C}var Yr=jd(!0),_d=jd(!1),di=Jt(null),hi=null,zr=null,rl=null;function nl(){rl=zr=hi=null}function sl(t){var e=di.current;J(di),t._currentValue=e}function ro(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Vr(t,e){hi=t,rl=zr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pe=!0),t.firstContext=null)}function Ve(t){var e=t._currentValue;if(rl!==t)if(t={context:t,memoizedValue:e,next:null},zr===null){if(hi===null)throw Error(P(308));zr=t,hi.dependencies={lanes:0,firstContext:t}}else zr=zr.next=t;return e}var ar=null;function il(t){ar===null?ar=[t]:ar.push(t)}function kd(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,il(e)):(r.next=s.next,s.next=r),e.interleaved=r,kt(t,n)}function kt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var At=!1;function al(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,W&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,kt(t,r)}return s=n.interleaved,s===null?(e.next=e,il(n)):(e.next=s.next,s.next=e),n.interleaved=e,kt(t,r)}function Hs(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ho(t,r)}}function yc(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function fi(t,e,r,n){var s=t.updateQueue;At=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,j=l;switch(m=e,y=r,j.tag){case 1:if(w=j.payload,typeof w=="function"){h=w.call(y,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=j.payload,m=typeof w=="function"?w.call(y,h,m):w,m==null)break e;h=te({},h,m);break e;case 2:At=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fr|=o,t.lanes=o,t.memoizedState=h}}function vc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var fs={},ut=Jt(fs),Zn=Jt(fs),es=Jt(fs);function or(t){if(t===fs)throw Error(P(174));return t}function ol(t,e){switch(G(es,e),G(Zn,t),G(ut,fs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Da(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Da(e,t)}J(ut),G(ut,e)}function Xr(){J(ut),J(Zn),J(es)}function Sd(t){or(es.current);var e=or(ut.current),r=Da(e,t.type);e!==r&&(G(Zn,t),G(ut,r))}function ll(t){Zn.current===t&&(J(ut),J(Zn))}var Z=Jt(0);function mi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var da=[];function cl(){for(var t=0;t<da.length;t++)da[t]._workInProgressVersionPrimary=null;da.length=0}var Vs=Et.ReactCurrentDispatcher,ha=Et.ReactCurrentBatchConfig,hr=0,ee=null,ue=null,he=null,pi=!1,An=!1,ts=0,ep=0;function ye(){throw Error(P(321))}function ul(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!nt(t[r],e[r]))return!1;return!0}function dl(t,e,r,n,s,i){if(hr=i,ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vs.current=t===null||t.memoizedState===null?sp:ip,t=r(n,s),An){i=0;do{if(An=!1,ts=0,25<=i)throw Error(P(301));i+=1,he=ue=null,e.updateQueue=null,Vs.current=ap,t=r(n,s)}while(An)}if(Vs.current=gi,e=ue!==null&&ue.next!==null,hr=0,he=ue=ee=null,pi=!1,e)throw Error(P(300));return t}function hl(){var t=ts!==0;return ts=0,t}function at(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?ee.memoizedState=he=t:he=he.next=t,he}function Ke(){if(ue===null){var t=ee.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=he===null?ee.memoizedState:he.next;if(e!==null)he=e,ue=t;else{if(t===null)throw Error(P(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},he===null?ee.memoizedState=he=t:he=he.next=t}return he}function rs(t,e){return typeof e=="function"?e(t):e}function fa(t){var e=Ke(),r=e.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=t;var n=ue,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((hr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,ee.lanes|=d,fr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,nt(n,e.memoizedState)||(Pe=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,ee.lanes|=i,fr|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ma(t){var e=Ke(),r=e.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);nt(i,e.memoizedState)||(Pe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Ed(){}function Cd(t,e){var r=ee,n=Ke(),s=e(),i=!nt(n.memoizedState,s);if(i&&(n.memoizedState=s,Pe=!0),n=n.queue,fl(Od.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||he!==null&&he.memoizedState.tag&1){if(r.flags|=2048,ns(9,Td.bind(null,r,n,s,e),void 0,null),fe===null)throw Error(P(349));hr&30||Pd(r,e,s)}return s}function Pd(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Td(t,e,r,n){e.value=r,e.getSnapshot=n,Ad(e)&&$d(t)}function Od(t,e,r){return r(function(){Ad(e)&&$d(t)})}function Ad(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!nt(t,r)}catch{return!0}}function $d(t){var e=kt(t,1);e!==null&&rt(e,t,1,-1)}function wc(t){var e=at();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:t},e.queue=t,t=t.dispatch=np.bind(null,ee,t),[e.memoizedState,t]}function ns(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Id(){return Ke().memoizedState}function Ks(t,e,r,n){var s=at();ee.flags|=t,s.memoizedState=ns(1|e,r,void 0,n===void 0?null:n)}function Oi(t,e,r,n){var s=Ke();n=n===void 0?null:n;var i=void 0;if(ue!==null){var o=ue.memoizedState;if(i=o.destroy,n!==null&&ul(n,o.deps)){s.memoizedState=ns(e,r,i,n);return}}ee.flags|=t,s.memoizedState=ns(1|e,r,i,n)}function bc(t,e){return Ks(8390656,8,t,e)}function fl(t,e){return Oi(2048,8,t,e)}function Ld(t,e){return Oi(4,2,t,e)}function Dd(t,e){return Oi(4,4,t,e)}function Rd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Md(t,e,r){return r=r!=null?r.concat([t]):null,Oi(4,4,Rd.bind(null,e,t),r)}function ml(){}function zd(t,e){var r=Ke();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ul(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Ud(t,e){var r=Ke();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ul(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Fd(t,e,r){return hr&21?(nt(r,e)||(r=Vu(),ee.lanes|=r,fr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pe=!0),t.memoizedState=r)}function tp(t,e){var r=V;V=r!==0&&4>r?r:4,t(!0);var n=ha.transition;ha.transition={};try{t(!1),e()}finally{V=r,ha.transition=n}}function Bd(){return Ke().memoizedState}function rp(t,e,r){var n=Wt(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qd(t))Wd(e,r);else if(r=kd(t,e,r,n),r!==null){var s=ke();rt(r,t,n,s),Hd(r,e,n)}}function np(t,e,r){var n=Wt(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qd(t))Wd(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,nt(l,o)){var c=e.interleaved;c===null?(s.next=s,il(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=kd(t,e,s,n),r!==null&&(s=ke(),rt(r,t,n,s),Hd(r,e,n))}}function qd(t){var e=t.alternate;return t===ee||e!==null&&e===ee}function Wd(t,e){An=pi=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Hd(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ho(t,r)}}var gi={readContext:Ve,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},sp={readContext:Ve,useCallback:function(t,e){return at().memoizedState=[t,e===void 0?null:e],t},useContext:Ve,useEffect:bc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ks(4194308,4,Rd.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ks(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ks(4,2,t,e)},useMemo:function(t,e){var r=at();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=at();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=rp.bind(null,ee,t),[n.memoizedState,t]},useRef:function(t){var e=at();return t={current:t},e.memoizedState=t},useState:wc,useDebugValue:ml,useDeferredValue:function(t){return at().memoizedState=t},useTransition:function(){var t=wc(!1),e=t[0];return t=tp.bind(null,t[1]),at().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ee,s=at();if(Y){if(r===void 0)throw Error(P(407));r=r()}else{if(r=e(),fe===null)throw Error(P(349));hr&30||Pd(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,bc(Od.bind(null,n,i,t),[t]),n.flags|=2048,ns(9,Td.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=at(),e=fe.identifierPrefix;if(Y){var r=yt,n=xt;r=(n&~(1<<32-tt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ts++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ep++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ip={readContext:Ve,useCallback:zd,useContext:Ve,useEffect:fl,useImperativeHandle:Md,useInsertionEffect:Ld,useLayoutEffect:Dd,useMemo:Ud,useReducer:fa,useRef:Id,useState:function(){return fa(rs)},useDebugValue:ml,useDeferredValue:function(t){var e=Ke();return Fd(e,ue.memoizedState,t)},useTransition:function(){var t=fa(rs)[0],e=Ke().memoizedState;return[t,e]},useMutableSource:Ed,useSyncExternalStore:Cd,useId:Bd,unstable_isNewReconciler:!1},ap={readContext:Ve,useCallback:zd,useContext:Ve,useEffect:fl,useImperativeHandle:Md,useInsertionEffect:Ld,useLayoutEffect:Dd,useMemo:Ud,useReducer:ma,useRef:Id,useState:function(){return ma(rs)},useDebugValue:ml,useDeferredValue:function(t){var e=Ke();return ue===null?e.memoizedState=t:Fd(e,ue.memoizedState,t)},useTransition:function(){var t=ma(rs)[0],e=Ke().memoizedState;return[t,e]},useMutableSource:Ed,useSyncExternalStore:Cd,useId:Bd,unstable_isNewReconciler:!1};function Je(t,e){if(t&&t.defaultProps){e=te({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function no(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:te({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ai={isMounted:function(t){return(t=t._reactInternals)?xr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ke(),s=Wt(t),i=wt(n,s);i.payload=e,r!=null&&(i.callback=r),e=Bt(t,i,s),e!==null&&(rt(e,t,s,n),Hs(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ke(),s=Wt(t),i=wt(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Bt(t,i,s),e!==null&&(rt(e,t,s,n),Hs(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ke(),n=Wt(t),s=wt(r,n);s.tag=2,e!=null&&(s.callback=e),e=Bt(t,s,n),e!==null&&(rt(e,t,n,r),Hs(e,t,n))}};function jc(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Qn(r,n)||!Qn(s,i):!0}function Vd(t,e,r){var n=!1,s=Kt,i=e.contextType;return typeof i=="object"&&i!==null?i=Ve(i):(s=Ae(e)?ur:be.current,n=e.contextTypes,i=(n=n!=null)?Qr(t,s):Kt),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ai,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _c(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ai.enqueueReplaceState(e,e.state,null)}function so(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},al(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ve(i):(i=Ae(e)?ur:be.current,s.context=Qr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(no(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ai.enqueueReplaceState(s,s.state,null),fi(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zr(t,e){try{var r="",n=e;do r+=If(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pa(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function io(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var op=typeof WeakMap=="function"?WeakMap:Map;function Kd(t,e,r){r=wt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){yi||(yi=!0,go=n),io(t,e)},r}function Gd(t,e,r){r=wt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){io(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){io(t,e),typeof n!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function kc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new op;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=bp.bind(null,t,e,r),e.then(t,t))}function Nc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sc(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=wt(-1,1),e.tag=2,Bt(r,e,1))),r.lanes|=1),t)}var lp=Et.ReactCurrentOwner,Pe=!1;function _e(t,e,r,n){e.child=t===null?_d(e,null,r,n):Yr(e,t.child,r,n)}function Ec(t,e,r,n,s){r=r.render;var i=e.ref;return Vr(e,s),n=dl(t,e,r,n,i,s),r=hl(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nt(t,e,s)):(Y&&r&&Zo(e),e.flags|=1,_e(t,e,n,s),e.child)}function Cc(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!jl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Qd(t,e,i,n,s)):(t=Ys(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Qn,r(o,n)&&t.ref===e.ref)return Nt(t,e,s)}return e.flags|=1,t=Ht(i,n),t.ref=e.ref,t.return=e,e.child=t}function Qd(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Qn(i,n)&&t.ref===e.ref)if(Pe=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Pe=!0);else return e.lanes=t.lanes,Nt(t,e,s)}return ao(t,e,r,n,s)}function Jd(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(Fr,Ie),Ie|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(Fr,Ie),Ie|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,G(Fr,Ie),Ie|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,G(Fr,Ie),Ie|=n;return _e(t,e,s,r),e.child}function Yd(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ao(t,e,r,n,s){var i=Ae(r)?ur:be.current;return i=Qr(e,i),Vr(e,s),r=dl(t,e,r,n,i,s),n=hl(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nt(t,e,s)):(Y&&n&&Zo(e),e.flags|=1,_e(t,e,r,s),e.child)}function Pc(t,e,r,n,s){if(Ae(r)){var i=!0;li(e)}else i=!1;if(Vr(e,s),e.stateNode===null)Gs(t,e),Vd(e,r,n),so(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ve(u):(u=Ae(r)?ur:be.current,u=Qr(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&_c(e,o,n,u),At=!1;var m=e.memoizedState;o.state=m,fi(e,n,o,s),c=e.memoizedState,l!==n||m!==c||Oe.current||At?(typeof d=="function"&&(no(e,r,d,n),c=e.memoizedState),(l=At||jc(e,r,l,n,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Nd(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Je(e.type,l),o.props=u,h=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ve(c):(c=Ae(r)?ur:be.current,c=Qr(e,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&_c(e,o,n,c),At=!1,m=e.memoizedState,o.state=m,fi(e,n,o,s);var w=e.memoizedState;l!==h||m!==w||Oe.current||At?(typeof y=="function"&&(no(e,r,y,n),w=e.memoizedState),(u=At||jc(e,r,u,n,m,w,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=w),o.props=n,o.state=w,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return oo(t,e,r,n,i,s)}function oo(t,e,r,n,s,i){Yd(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&mc(e,r,!1),Nt(t,e,i);n=e.stateNode,lp.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Yr(e,t.child,null,i),e.child=Yr(e,null,l,i)):_e(t,e,l,i),e.memoizedState=n.state,s&&mc(e,r,!0),e.child}function Xd(t){var e=t.stateNode;e.pendingContext?fc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fc(t,e.context,!1),ol(t,e.containerInfo)}function Tc(t,e,r,n,s){return Jr(),tl(s),e.flags|=256,_e(t,e,r,n),e.child}var lo={dehydrated:null,treeContext:null,retryLane:0};function co(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zd(t,e,r){var n=e.pendingProps,s=Z.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),G(Z,s&1),t===null)return to(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Li(o,n,0,null),t=cr(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=co(r),e.memoizedState=lo,t):pl(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return cp(t,e,o,n,l,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ht(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ht(l,i):(i=cr(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?co(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=lo,n}return i=t.child,t=i.sibling,n=Ht(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function pl(t,e){return e=Li({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function As(t,e,r,n){return n!==null&&tl(n),Yr(e,t.child,null,r),t=pl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cp(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=pa(Error(P(422))),As(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Li({mode:"visible",children:n.children},s,0,null),i=cr(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Yr(e,t.child,null,o),e.child.memoizedState=co(o),e.memoizedState=lo,i);if(!(e.mode&1))return As(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(P(419)),n=pa(i,n,void 0),As(t,e,o,n)}if(l=(o&t.childLanes)!==0,Pe||l){if(n=fe,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,kt(t,s),rt(n,t,s,-1))}return bl(),n=pa(Error(P(421))),As(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jp.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Le=Ft(s.nextSibling),De=e,Y=!0,Ze=null,t!==null&&(Fe[Be++]=xt,Fe[Be++]=yt,Fe[Be++]=dr,xt=t.id,yt=t.overflow,dr=e),e=pl(e,n.children),e.flags|=4096,e)}function Oc(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ro(t.return,e,r)}function ga(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function eh(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(_e(t,e,n.children,r),n=Z.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Oc(t,r,e);else if(t.tag===19)Oc(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(G(Z,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&mi(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),ga(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&mi(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}ga(e,!0,r,null,i);break;case"together":ga(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),fr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,r=Ht(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ht(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function up(t,e,r){switch(e.tag){case 3:Xd(e),Jr();break;case 5:Sd(e);break;case 1:Ae(e.type)&&li(e);break;case 4:ol(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;G(di,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(G(Z,Z.current&1),e.flags|=128,null):r&e.child.childLanes?Zd(t,e,r):(G(Z,Z.current&1),t=Nt(t,e,r),t!==null?t.sibling:null);G(Z,Z.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),G(Z,Z.current),n)break;return null;case 22:case 23:return e.lanes=0,Jd(t,e,r)}return Nt(t,e,r)}var th,uo,rh,nh;th=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};uo=function(){};rh=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,or(ut.current);var i=null;switch(r){case"input":s=Aa(t,s),n=Aa(t,n),i=[];break;case"select":s=te({},s,{value:void 0}),n=te({},n,{value:void 0}),i=[];break;case"textarea":s=La(t,s),n=La(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ai)}Ra(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Q("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};nh=function(t,e,r,n){r!==n&&(e.flags|=4)};function yn(t,e){if(!Y)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function dp(t,e,r){var n=e.pendingProps;switch(el(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(e),null;case 1:return Ae(e.type)&&oi(),ve(e),null;case 3:return n=e.stateNode,Xr(),J(Oe),J(be),cl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ts(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ze!==null&&(vo(Ze),Ze=null))),uo(t,e),ve(e),null;case 5:ll(e);var s=or(es.current);if(r=e.type,t!==null&&e.stateNode!=null)rh(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(P(166));return ve(e),null}if(t=or(ut.current),Ts(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[lt]=e,n[Xn]=i,t=(e.mode&1)!==0,r){case"dialog":Q("cancel",n),Q("close",n);break;case"iframe":case"object":case"embed":Q("load",n);break;case"video":case"audio":for(s=0;s<kn.length;s++)Q(kn[s],n);break;case"source":Q("error",n);break;case"img":case"image":case"link":Q("error",n),Q("load",n);break;case"details":Q("toggle",n);break;case"input":Ul(n,i),Q("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Q("invalid",n);break;case"textarea":Bl(n,i),Q("invalid",n)}Ra(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ps(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ps(n.textContent,l,t),s=["children",""+l]):Bn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Q("scroll",n)}switch(r){case"input":bs(n),Fl(n,i,!0);break;case"textarea":bs(n),ql(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ai)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ou(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[lt]=e,t[Xn]=n,th(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ma(r,n),r){case"dialog":Q("cancel",t),Q("close",t),s=n;break;case"iframe":case"object":case"embed":Q("load",t),s=n;break;case"video":case"audio":for(s=0;s<kn.length;s++)Q(kn[s],t);s=n;break;case"source":Q("error",t),s=n;break;case"img":case"image":case"link":Q("error",t),Q("load",t),s=n;break;case"details":Q("toggle",t),s=n;break;case"input":Ul(t,n),s=Aa(t,n),Q("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=te({},n,{value:void 0}),Q("invalid",t);break;case"textarea":Bl(t,n),s=La(t,n),Q("invalid",t);break;default:s=n}Ra(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Iu(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Au(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&qn(t,c):typeof c=="number"&&qn(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Q("scroll",t):c!=null&&zo(t,i,c,o))}switch(r){case"input":bs(t),Fl(t,n,!1);break;case"textarea":bs(t),ql(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Vt(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Br(t,!!n.multiple,i,!1):n.defaultValue!=null&&Br(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ai)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ve(e),null;case 6:if(t&&e.stateNode!=null)nh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(P(166));if(r=or(es.current),or(ut.current),Ts(e)){if(n=e.stateNode,r=e.memoizedProps,n[lt]=e,(i=n.nodeValue!==r)&&(t=De,t!==null))switch(t.tag){case 3:Ps(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ps(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[lt]=e,e.stateNode=n}return ve(e),null;case 13:if(J(Z),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Y&&Le!==null&&e.mode&1&&!(e.flags&128))bd(),Jr(),e.flags|=98560,i=!1;else if(i=Ts(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[lt]=e}else Jr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ve(e),i=!1}else Ze!==null&&(vo(Ze),Ze=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Z.current&1?de===0&&(de=3):bl())),e.updateQueue!==null&&(e.flags|=4),ve(e),null);case 4:return Xr(),uo(t,e),t===null&&Jn(e.stateNode.containerInfo),ve(e),null;case 10:return sl(e.type._context),ve(e),null;case 17:return Ae(e.type)&&oi(),ve(e),null;case 19:if(J(Z),i=e.memoizedState,i===null)return ve(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)yn(i,!1);else{if(de!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mi(t),o!==null){for(e.flags|=128,yn(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return G(Z,Z.current&1|2),e.child}t=t.sibling}i.tail!==null&&ne()>en&&(e.flags|=128,n=!0,yn(i,!1),e.lanes=4194304)}else{if(!n)if(t=mi(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),yn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Y)return ve(e),null}else 2*ne()-i.renderingStartTime>en&&r!==1073741824&&(e.flags|=128,n=!0,yn(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ne(),e.sibling=null,r=Z.current,G(Z,n?r&1|2:r&1),e):(ve(e),null);case 22:case 23:return wl(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ie&1073741824&&(ve(e),e.subtreeFlags&6&&(e.flags|=8192)):ve(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function hp(t,e){switch(el(e),e.tag){case 1:return Ae(e.type)&&oi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xr(),J(Oe),J(be),cl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ll(e),null;case 13:if(J(Z),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Jr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return J(Z),null;case 4:return Xr(),null;case 10:return sl(e.type._context),null;case 22:case 23:return wl(),null;case 24:return null;default:return null}}var $s=!1,we=!1,fp=typeof WeakSet=="function"?WeakSet:Set,I=null;function Ur(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){re(t,e,n)}else r.current=null}function ho(t,e,r){try{r()}catch(n){re(t,e,n)}}var Ac=!1;function mp(t,e){if(Ga=ni,t=ld(),Xo(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var y;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===t)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qa={focusedElem:t,selectionRange:r},ni=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var j=w.memoizedProps,C=w.memoizedState,x=e.stateNode,p=x.getSnapshotBeforeUpdate(e.elementType===e.type?j:Je(e.type,j),C);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(g){re(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return w=Ac,Ac=!1,w}function $n(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ho(e,r,i)}s=s.next}while(s!==n)}}function $i(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function fo(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function sh(t){var e=t.alternate;e!==null&&(t.alternate=null,sh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lt],delete e[Xn],delete e[Xa],delete e[Jm],delete e[Ym])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ih(t){return t.tag===5||t.tag===3||t.tag===4}function $c(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ih(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mo(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ai));else if(n!==4&&(t=t.child,t!==null))for(mo(t,e,r),t=t.sibling;t!==null;)mo(t,e,r),t=t.sibling}function po(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(po(t,e,r),t=t.sibling;t!==null;)po(t,e,r),t=t.sibling}var me=null,Ye=!1;function Ct(t,e,r){for(r=r.child;r!==null;)ah(t,e,r),r=r.sibling}function ah(t,e,r){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Ni,r)}catch{}switch(r.tag){case 5:we||Ur(r,e);case 6:var n=me,s=Ye;me=null,Ct(t,e,r),me=n,Ye=s,me!==null&&(Ye?(t=me,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):me.removeChild(r.stateNode));break;case 18:me!==null&&(Ye?(t=me,r=r.stateNode,t.nodeType===8?ca(t.parentNode,r):t.nodeType===1&&ca(t,r),Kn(t)):ca(me,r.stateNode));break;case 4:n=me,s=Ye,me=r.stateNode.containerInfo,Ye=!0,Ct(t,e,r),me=n,Ye=s;break;case 0:case 11:case 14:case 15:if(!we&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ho(r,e,o),s=s.next}while(s!==n)}Ct(t,e,r);break;case 1:if(!we&&(Ur(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){re(r,e,l)}Ct(t,e,r);break;case 21:Ct(t,e,r);break;case 22:r.mode&1?(we=(n=we)||r.memoizedState!==null,Ct(t,e,r),we=n):Ct(t,e,r);break;default:Ct(t,e,r)}}function Ic(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new fp),e.forEach(function(n){var s=_p.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ge(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,Ye=!1;break e;case 3:me=l.stateNode.containerInfo,Ye=!0;break e;case 4:me=l.stateNode.containerInfo,Ye=!0;break e}l=l.return}if(me===null)throw Error(P(160));ah(i,o,s),me=null,Ye=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){re(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oh(e,t),e=e.sibling}function oh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ge(e,t),it(t),n&4){try{$n(3,t,t.return),$i(3,t)}catch(j){re(t,t.return,j)}try{$n(5,t,t.return)}catch(j){re(t,t.return,j)}}break;case 1:Ge(e,t),it(t),n&512&&r!==null&&Ur(r,r.return);break;case 5:if(Ge(e,t),it(t),n&512&&r!==null&&Ur(r,r.return),t.flags&32){var s=t.stateNode;try{qn(s,"")}catch(j){re(t,t.return,j)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Pu(s,i),Ma(l,o);var u=Ma(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Iu(s,h):d==="dangerouslySetInnerHTML"?Au(s,h):d==="children"?qn(s,h):zo(s,d,h,u)}switch(l){case"input":$a(s,i);break;case"textarea":Tu(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Br(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Br(s,!!i.multiple,i.defaultValue,!0):Br(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xn]=i}catch(j){re(t,t.return,j)}}break;case 6:if(Ge(e,t),it(t),n&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){re(t,t.return,j)}}break;case 3:if(Ge(e,t),it(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kn(e.containerInfo)}catch(j){re(t,t.return,j)}break;case 4:Ge(e,t),it(t);break;case 13:Ge(e,t),it(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yl=ne())),n&4&&Ic(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(we=(u=we)||d,Ge(e,t),we=u):Ge(e,t),it(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(I=t,d=t.child;d!==null;){for(h=I=d;I!==null;){switch(m=I,y=m.child,m.tag){case 0:case 11:case 14:case 15:$n(4,m,m.return);break;case 1:Ur(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(j){re(n,r,j)}}break;case 5:Ur(m,m.return);break;case 22:if(m.memoizedState!==null){Dc(h);continue}}y!==null?(y.return=m,I=y):Dc(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$u("display",o))}catch(j){re(t,t.return,j)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(j){re(t,t.return,j)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ge(e,t),it(t),n&4&&Ic(t);break;case 21:break;default:Ge(e,t),it(t)}}function it(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ih(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(qn(s,""),n.flags&=-33);var i=$c(t);po(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=$c(t);mo(t,l,o);break;default:throw Error(P(161))}}catch(c){re(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pp(t,e,r){I=t,lh(t)}function lh(t,e,r){for(var n=(t.mode&1)!==0;I!==null;){var s=I,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||$s;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||we;l=$s;var u=we;if($s=o,(we=c)&&!u)for(I=s;I!==null;)o=I,c=o.child,o.tag===22&&o.memoizedState!==null?Rc(s):c!==null?(c.return=o,I=c):Rc(s);for(;i!==null;)I=i,lh(i),i=i.sibling;I=s,$s=l,we=u}Lc(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,I=i):Lc(t)}}function Lc(t){for(;I!==null;){var e=I;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:we||$i(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!we)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Je(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&vc(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}vc(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Kn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}we||e.flags&512&&fo(e)}catch(m){re(e,e.return,m)}}if(e===t){I=null;break}if(r=e.sibling,r!==null){r.return=e.return,I=r;break}I=e.return}}function Dc(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var r=e.sibling;if(r!==null){r.return=e.return,I=r;break}I=e.return}}function Rc(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{$i(4,e)}catch(c){re(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){re(e,s,c)}}var i=e.return;try{fo(e)}catch(c){re(e,i,c)}break;case 5:var o=e.return;try{fo(e)}catch(c){re(e,o,c)}}}catch(c){re(e,e.return,c)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var gp=Math.ceil,xi=Et.ReactCurrentDispatcher,gl=Et.ReactCurrentOwner,We=Et.ReactCurrentBatchConfig,W=0,fe=null,ae=null,pe=0,Ie=0,Fr=Jt(0),de=0,ss=null,fr=0,Ii=0,xl=0,In=null,Ee=null,yl=0,en=1/0,mt=null,yi=!1,go=null,qt=null,Is=!1,Rt=null,vi=0,Ln=0,xo=null,Qs=-1,Js=0;function ke(){return W&6?ne():Qs!==-1?Qs:Qs=ne()}function Wt(t){return t.mode&1?W&2&&pe!==0?pe&-pe:Zm.transition!==null?(Js===0&&(Js=Vu()),Js):(t=V,t!==0||(t=window.event,t=t===void 0?16:Zu(t.type)),t):1}function rt(t,e,r,n){if(50<Ln)throw Ln=0,xo=null,Error(P(185));us(t,r,n),(!(W&2)||t!==fe)&&(t===fe&&(!(W&2)&&(Ii|=r),de===4&&It(t,pe)),$e(t,n),r===1&&W===0&&!(e.mode&1)&&(en=ne()+500,Ti&&Yt()))}function $e(t,e){var r=t.callbackNode;Zf(t,e);var n=ri(t,t===fe?pe:0);if(n===0)r!==null&&Vl(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Vl(r),e===1)t.tag===0?Xm(Mc.bind(null,t)):yd(Mc.bind(null,t)),Gm(function(){!(W&6)&&Yt()}),r=null;else{switch(Ku(n)){case 1:r=Wo;break;case 4:r=Wu;break;case 16:r=ti;break;case 536870912:r=Hu;break;default:r=ti}r=gh(r,ch.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ch(t,e){if(Qs=-1,Js=0,W&6)throw Error(P(327));var r=t.callbackNode;if(Kr()&&t.callbackNode!==r)return null;var n=ri(t,t===fe?pe:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=wi(t,n);else{e=n;var s=W;W|=2;var i=dh();(fe!==t||pe!==e)&&(mt=null,en=ne()+500,lr(t,e));do try{vp();break}catch(l){uh(t,l)}while(!0);nl(),xi.current=i,W=s,ae!==null?e=0:(fe=null,pe=0,e=de)}if(e!==0){if(e===2&&(s=qa(t),s!==0&&(n=s,e=yo(t,s))),e===1)throw r=ss,lr(t,0),It(t,n),$e(t,ne()),r;if(e===6)It(t,n);else{if(s=t.current.alternate,!(n&30)&&!xp(s)&&(e=wi(t,n),e===2&&(i=qa(t),i!==0&&(n=i,e=yo(t,i))),e===1))throw r=ss,lr(t,0),It(t,n),$e(t,ne()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(P(345));case 2:rr(t,Ee,mt);break;case 3:if(It(t,n),(n&130023424)===n&&(e=yl+500-ne(),10<e)){if(ri(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){ke(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ya(rr.bind(null,t,Ee,mt),e);break}rr(t,Ee,mt);break;case 4:if(It(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-tt(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=ne()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gp(n/1960))-n,10<n){t.timeoutHandle=Ya(rr.bind(null,t,Ee,mt),n);break}rr(t,Ee,mt);break;case 5:rr(t,Ee,mt);break;default:throw Error(P(329))}}}return $e(t,ne()),t.callbackNode===r?ch.bind(null,t):null}function yo(t,e){var r=In;return t.current.memoizedState.isDehydrated&&(lr(t,e).flags|=256),t=wi(t,e),t!==2&&(e=Ee,Ee=r,e!==null&&vo(e)),t}function vo(t){Ee===null?Ee=t:Ee.push.apply(Ee,t)}function xp(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!nt(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function It(t,e){for(e&=~xl,e&=~Ii,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-tt(e),n=1<<r;t[r]=-1,e&=~n}}function Mc(t){if(W&6)throw Error(P(327));Kr();var e=ri(t,0);if(!(e&1))return $e(t,ne()),null;var r=wi(t,e);if(t.tag!==0&&r===2){var n=qa(t);n!==0&&(e=n,r=yo(t,n))}if(r===1)throw r=ss,lr(t,0),It(t,e),$e(t,ne()),r;if(r===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rr(t,Ee,mt),$e(t,ne()),null}function vl(t,e){var r=W;W|=1;try{return t(e)}finally{W=r,W===0&&(en=ne()+500,Ti&&Yt())}}function mr(t){Rt!==null&&Rt.tag===0&&!(W&6)&&Kr();var e=W;W|=1;var r=We.transition,n=V;try{if(We.transition=null,V=1,t)return t()}finally{V=n,We.transition=r,W=e,!(W&6)&&Yt()}}function wl(){Ie=Fr.current,J(Fr)}function lr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Km(r)),ae!==null)for(r=ae.return;r!==null;){var n=r;switch(el(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&oi();break;case 3:Xr(),J(Oe),J(be),cl();break;case 5:ll(n);break;case 4:Xr();break;case 13:J(Z);break;case 19:J(Z);break;case 10:sl(n.type._context);break;case 22:case 23:wl()}r=r.return}if(fe=t,ae=t=Ht(t.current,null),pe=Ie=e,de=0,ss=null,xl=Ii=fr=0,Ee=In=null,ar!==null){for(e=0;e<ar.length;e++)if(r=ar[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ar=null}return t}function uh(t,e){do{var r=ae;try{if(nl(),Vs.current=gi,pi){for(var n=ee.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}pi=!1}if(hr=0,he=ue=ee=null,An=!1,ts=0,gl.current=null,r===null||r.return===null){de=1,ss=e,ae=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=pe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Nc(o);if(y!==null){y.flags&=-257,Sc(y,o,l,i,e),y.mode&1&&kc(i,u,e),e=y,c=u;var w=e.updateQueue;if(w===null){var j=new Set;j.add(c),e.updateQueue=j}else w.add(c);break e}else{if(!(e&1)){kc(i,u,e),bl();break e}c=Error(P(426))}}else if(Y&&l.mode&1){var C=Nc(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Sc(C,o,l,i,e),tl(Zr(c,l));break e}}i=c=Zr(c,l),de!==4&&(de=2),In===null?In=[i]:In.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Kd(i,c,e);yc(i,x);break e;case 1:l=c;var p=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(qt===null||!qt.has(f)))){i.flags|=65536,e&=-e,i.lanes|=e;var g=Gd(i,l,e);yc(i,g);break e}}i=i.return}while(i!==null)}fh(r)}catch(k){e=k,ae===r&&r!==null&&(ae=r=r.return);continue}break}while(!0)}function dh(){var t=xi.current;return xi.current=gi,t===null?gi:t}function bl(){(de===0||de===3||de===2)&&(de=4),fe===null||!(fr&268435455)&&!(Ii&268435455)||It(fe,pe)}function wi(t,e){var r=W;W|=2;var n=dh();(fe!==t||pe!==e)&&(mt=null,lr(t,e));do try{yp();break}catch(s){uh(t,s)}while(!0);if(nl(),W=r,xi.current=n,ae!==null)throw Error(P(261));return fe=null,pe=0,de}function yp(){for(;ae!==null;)hh(ae)}function vp(){for(;ae!==null&&!Wf();)hh(ae)}function hh(t){var e=ph(t.alternate,t,Ie);t.memoizedProps=t.pendingProps,e===null?fh(t):ae=e,gl.current=null}function fh(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=hp(r,e),r!==null){r.flags&=32767,ae=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{de=6,ae=null;return}}else if(r=dp(r,e,Ie),r!==null){ae=r;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);de===0&&(de=5)}function rr(t,e,r){var n=V,s=We.transition;try{We.transition=null,V=1,wp(t,e,r,n)}finally{We.transition=s,V=n}return null}function wp(t,e,r,n){do Kr();while(Rt!==null);if(W&6)throw Error(P(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(em(t,i),t===fe&&(ae=fe=null,pe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Is||(Is=!0,gh(ti,function(){return Kr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=We.transition,We.transition=null;var o=V;V=1;var l=W;W|=4,gl.current=null,mp(t,r),oh(r,t),Um(Qa),ni=!!Ga,Qa=Ga=null,t.current=r,pp(r),Hf(),W=l,V=o,We.transition=i}else t.current=r;if(Is&&(Is=!1,Rt=t,vi=s),i=t.pendingLanes,i===0&&(qt=null),Gf(r.stateNode),$e(t,ne()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(yi)throw yi=!1,t=go,go=null,t;return vi&1&&t.tag!==0&&Kr(),i=t.pendingLanes,i&1?t===xo?Ln++:(Ln=0,xo=t):Ln=0,Yt(),null}function Kr(){if(Rt!==null){var t=Ku(vi),e=We.transition,r=V;try{if(We.transition=null,V=16>t?16:t,Rt===null)var n=!1;else{if(t=Rt,Rt=null,vi=0,W&6)throw Error(P(331));var s=W;for(W|=4,I=t.current;I!==null;){var i=I,o=i.child;if(I.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(I=u;I!==null;){var d=I;switch(d.tag){case 0:case 11:case 15:$n(8,d,i)}var h=d.child;if(h!==null)h.return=d,I=h;else for(;I!==null;){d=I;var m=d.sibling,y=d.return;if(sh(d),d===u){I=null;break}if(m!==null){m.return=y,I=m;break}I=y}}}var w=i.alternate;if(w!==null){var j=w.child;if(j!==null){w.child=null;do{var C=j.sibling;j.sibling=null,j=C}while(j!==null)}}I=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,I=o;else e:for(;I!==null;){if(i=I,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$n(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,I=x;break e}I=i.return}}var p=t.current;for(I=p;I!==null;){o=I;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,I=f;else e:for(o=p;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$i(9,l)}}catch(k){re(l,l.return,k)}if(l===o){I=null;break e}var g=l.sibling;if(g!==null){g.return=l.return,I=g;break e}I=l.return}}if(W=s,Yt(),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Ni,t)}catch{}n=!0}return n}finally{V=r,We.transition=e}}return!1}function zc(t,e,r){e=Zr(r,e),e=Kd(t,e,1),t=Bt(t,e,1),e=ke(),t!==null&&(us(t,1,e),$e(t,e))}function re(t,e,r){if(t.tag===3)zc(t,t,r);else for(;e!==null;){if(e.tag===3){zc(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qt===null||!qt.has(n))){t=Zr(r,t),t=Gd(e,t,1),e=Bt(e,t,1),t=ke(),e!==null&&(us(e,1,t),$e(e,t));break}}e=e.return}}function bp(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ke(),t.pingedLanes|=t.suspendedLanes&r,fe===t&&(pe&r)===r&&(de===4||de===3&&(pe&130023424)===pe&&500>ne()-yl?lr(t,0):xl|=r),$e(t,e)}function mh(t,e){e===0&&(t.mode&1?(e=ks,ks<<=1,!(ks&130023424)&&(ks=4194304)):e=1);var r=ke();t=kt(t,e),t!==null&&(us(t,e,r),$e(t,r))}function jp(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),mh(t,r)}function _p(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(e),mh(t,r)}var ph;ph=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Oe.current)Pe=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Pe=!1,up(t,e,r);Pe=!!(t.flags&131072)}else Pe=!1,Y&&e.flags&1048576&&vd(e,ui,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Gs(t,e),t=e.pendingProps;var s=Qr(e,be.current);Vr(e,r),s=dl(null,e,n,t,s,r);var i=hl();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ae(n)?(i=!0,li(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,al(e),s.updater=Ai,e.stateNode=s,s._reactInternals=e,so(e,n,t,r),e=oo(null,e,n,!0,i,r)):(e.tag=0,Y&&i&&Zo(e),_e(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Gs(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Np(n),t=Je(n,t),s){case 0:e=ao(null,e,n,t,r);break e;case 1:e=Pc(null,e,n,t,r);break e;case 11:e=Ec(null,e,n,t,r);break e;case 14:e=Cc(null,e,n,Je(n.type,t),r);break e}throw Error(P(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Je(n,s),ao(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Je(n,s),Pc(t,e,n,s,r);case 3:e:{if(Xd(e),t===null)throw Error(P(387));n=e.pendingProps,i=e.memoizedState,s=i.element,Nd(t,e),fi(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zr(Error(P(423)),e),e=Tc(t,e,n,r,s);break e}else if(n!==s){s=Zr(Error(P(424)),e),e=Tc(t,e,n,r,s);break e}else for(Le=Ft(e.stateNode.containerInfo.firstChild),De=e,Y=!0,Ze=null,r=_d(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Jr(),n===s){e=Nt(t,e,r);break e}_e(t,e,n,r)}e=e.child}return e;case 5:return Sd(e),t===null&&to(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ja(n,s)?o=null:i!==null&&Ja(n,i)&&(e.flags|=32),Yd(t,e),_e(t,e,o,r),e.child;case 6:return t===null&&to(e),null;case 13:return Zd(t,e,r);case 4:return ol(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Yr(e,null,n,r):_e(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Je(n,s),Ec(t,e,n,s,r);case 7:return _e(t,e,e.pendingProps,r),e.child;case 8:return _e(t,e,e.pendingProps.children,r),e.child;case 12:return _e(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,G(di,n._currentValue),n._currentValue=o,i!==null)if(nt(i.value,o)){if(i.children===s.children&&!Oe.current){e=Nt(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=wt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ro(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),ro(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_e(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Vr(e,r),s=Ve(s),n=n(s),e.flags|=1,_e(t,e,n,r),e.child;case 14:return n=e.type,s=Je(n,e.pendingProps),s=Je(n.type,s),Cc(t,e,n,s,r);case 15:return Qd(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Je(n,s),Gs(t,e),e.tag=1,Ae(n)?(t=!0,li(e)):t=!1,Vr(e,r),Vd(e,n,s),so(e,n,s,r),oo(null,e,n,!0,t,r);case 19:return eh(t,e,r);case 22:return Jd(t,e,r)}throw Error(P(156,e.tag))};function gh(t,e){return qu(t,e)}function kp(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(t,e,r,n){return new kp(t,e,r,n)}function jl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Np(t){if(typeof t=="function")return jl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fo)return 11;if(t===Bo)return 14}return 2}function Ht(t,e){var r=t.alternate;return r===null?(r=qe(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ys(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")jl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Or:return cr(r.children,s,i,e);case Uo:o=8,s|=8;break;case Ca:return t=qe(12,r,e,s|2),t.elementType=Ca,t.lanes=i,t;case Pa:return t=qe(13,r,e,s),t.elementType=Pa,t.lanes=i,t;case Ta:return t=qe(19,r,e,s),t.elementType=Ta,t.lanes=i,t;case Su:return Li(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ku:o=10;break e;case Nu:o=9;break e;case Fo:o=11;break e;case Bo:o=14;break e;case Ot:o=16,n=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=qe(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function cr(t,e,r,n){return t=qe(7,t,n,e),t.lanes=r,t}function Li(t,e,r,n){return t=qe(22,t,n,e),t.elementType=Su,t.lanes=r,t.stateNode={isHidden:!1},t}function xa(t,e,r){return t=qe(6,t,null,e),t.lanes=r,t}function ya(t,e,r){return e=qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sp(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xi(0),this.expirationTimes=Xi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _l(t,e,r,n,s,i,o,l,c){return t=new Sp(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qe(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},al(i),t}function Ep(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function xh(t){if(!t)return Kt;t=t._reactInternals;e:{if(xr(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ae(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var r=t.type;if(Ae(r))return xd(t,r,e)}return e}function yh(t,e,r,n,s,i,o,l,c){return t=_l(r,n,!0,t,s,i,o,l,c),t.context=xh(null),r=t.current,n=ke(),s=Wt(r),i=wt(n,s),i.callback=e??null,Bt(r,i,s),t.current.lanes=s,us(t,s,n),$e(t,n),t}function Di(t,e,r,n){var s=e.current,i=ke(),o=Wt(s);return r=xh(r),e.context===null?e.context=r:e.pendingContext=r,e=wt(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Bt(s,e,o),t!==null&&(rt(t,s,o,i),Hs(t,s,o)),o}function bi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function kl(t,e){Uc(t,e),(t=t.alternate)&&Uc(t,e)}function Cp(){return null}var vh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nl(t){this._internalRoot=t}Ri.prototype.render=Nl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Di(t,e,null,null)};Ri.prototype.unmount=Nl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mr(function(){Di(null,t,null,null)}),e[_t]=null}};function Ri(t){this._internalRoot=t}Ri.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ju();t={blockedOn:null,target:t,priority:e};for(var r=0;r<$t.length&&e!==0&&e<$t[r].priority;r++);$t.splice(r,0,t),r===0&&Xu(t)}};function Sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fc(){}function Pp(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=bi(o);i.call(u)}}var o=yh(e,n,t,0,null,!1,!1,"",Fc);return t._reactRootContainer=o,t[_t]=o.current,Jn(t.nodeType===8?t.parentNode:t),mr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=bi(c);l.call(u)}}var c=_l(t,0,!1,null,null,!1,!1,"",Fc);return t._reactRootContainer=c,t[_t]=c.current,Jn(t.nodeType===8?t.parentNode:t),mr(function(){Di(e,c,r,n)}),c}function zi(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=bi(o);l.call(c)}}Di(e,o,t,s)}else o=Pp(r,e,t,s,n);return bi(o)}Gu=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=_n(e.pendingLanes);r!==0&&(Ho(e,r|1),$e(e,ne()),!(W&6)&&(en=ne()+500,Yt()))}break;case 13:mr(function(){var n=kt(t,1);if(n!==null){var s=ke();rt(n,t,1,s)}}),kl(t,1)}};Vo=function(t){if(t.tag===13){var e=kt(t,134217728);if(e!==null){var r=ke();rt(e,t,134217728,r)}kl(t,134217728)}};Qu=function(t){if(t.tag===13){var e=Wt(t),r=kt(t,e);if(r!==null){var n=ke();rt(r,t,e,n)}kl(t,e)}};Ju=function(){return V};Yu=function(t,e){var r=V;try{return V=t,e()}finally{V=r}};Ua=function(t,e,r){switch(e){case"input":if($a(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Pi(n);if(!s)throw Error(P(90));Cu(n),$a(n,s)}}}break;case"textarea":Tu(t,r);break;case"select":e=r.value,e!=null&&Br(t,!!r.multiple,e,!1)}};Ru=vl;Mu=mr;var Tp={usingClientEntryPoint:!1,Events:[hs,Lr,Pi,Lu,Du,vl]},vn={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Op={bundleType:vn.bundleType,version:vn.version,rendererPackageName:vn.rendererPackageName,rendererConfig:vn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Et.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fu(t),t===null?null:t.stateNode},findFiberByHostInstance:vn.findFiberByHostInstance||Cp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ls=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ls.isDisabled&&Ls.supportsFiber)try{Ni=Ls.inject(Op),ct=Ls}catch{}}Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tp;Me.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sl(e))throw Error(P(200));return Ep(t,e,null,r)};Me.createRoot=function(t,e){if(!Sl(t))throw Error(P(299));var r=!1,n="",s=vh;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_l(t,1,!1,null,null,r,!1,n,s),t[_t]=e.current,Jn(t.nodeType===8?t.parentNode:t),new Nl(e)};Me.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Fu(e),t=t===null?null:t.stateNode,t};Me.flushSync=function(t){return mr(t)};Me.hydrate=function(t,e,r){if(!Mi(e))throw Error(P(200));return zi(null,t,e,!0,r)};Me.hydrateRoot=function(t,e,r){if(!Sl(t))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=vh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=yh(e,null,t,1,r??null,s,!1,i,o),t[_t]=e.current,Jn(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ri(e)};Me.render=function(t,e,r){if(!Mi(e))throw Error(P(200));return zi(null,t,e,!1,r)};Me.unmountComponentAtNode=function(t){if(!Mi(t))throw Error(P(40));return t._reactRootContainer?(mr(function(){zi(null,null,t,!1,function(){t._reactRootContainer=null,t[_t]=null})}),!0):!1};Me.unstable_batchedUpdates=vl;Me.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Mi(r))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return zi(t,e,r,!1,n)};Me.version="18.3.1-next-f1338f8080-20240426";function wh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wh)}catch(t){console.error(t)}}wh(),wu.exports=Me;var Ap=wu.exports,bh,Bc=Ap;bh=Bc.createRoot,Bc.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(t,e)=>{const r=$.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>$.createElement("svg",{ref:d,...$p,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Ip(t)}`,l].join(" "),...u},[...e.map(([h,m])=>$.createElement(h,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=U("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=U("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=U("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=U("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=U("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=U("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=U("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=U("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=U("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=U("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=U("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=U("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=U("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=U("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=U("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=U("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=U("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=U("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=U("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=U("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=U("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=U("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=U("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=U("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=U("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=U("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=U("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=U("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=U("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=U("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Vp=({isOpen:t,onToggle:e,currentPage:r,onPageChange:n})=>{const s=[{id:"producoes",label:"Produções",icon:Wc,description:"Gestão de produções"},{id:"preparar-componentes",label:"A preparar componentes",icon:Nn,description:"Componentes pendentes"},{id:"gantt",label:"Planeamento",icon:Dn,description:"Planeamento e timeline"},{id:"registos",label:"Registos",icon:Mn,description:"Gestão de dados"},{id:"historico",label:"Histórico",icon:Er,description:"Eliminados e completos"},{id:"apps-lomartex",label:"Apps Lomartex",icon:jh,description:"Ferramentas auxiliares"},{id:"controlo-qualidade",label:"Controlo de Qualidade",icon:Nh,description:"Gestão de qualidade"}];return a.jsxs(a.Fragment,{children:[t&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:e}),a.jsxs("div",{className:`
        fixed left-0 top-0 h-full bg-white border-r border-gray-200 z-30 transition-all duration-300 ease-in-out
        ${t?"w-56":"w-14"}
        shadow-lg lg:shadow-none
      `,children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-100",children:[a.jsxs("div",{className:`flex items-center space-x-3 ${t?"opacity-100":"opacity-0"} transition-opacity duration-200`,children:[a.jsx(Wc,{className:"w-6 h-6 text-blue-600"}),a.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"ProduTech"})]}),a.jsx("button",{onClick:e,className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:t?a.jsx(St,{className:"w-4 h-4"}):a.jsx(Fp,{className:"w-4 h-4"})})]}),a.jsx("nav",{className:"p-2 space-y-1",children:s.map(i=>{const o=i.icon,l=r===i.id;return a.jsxs("button",{onClick:()=>n(i.id),title:t?"":i.label,className:`
                  w-full flex items-center space-x-2 p-2 rounded-lg transition-all duration-200 relative
                  ${l?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"}
                  ${t?"justify-start":"justify-center"}
                `,children:[l&&a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-600 rounded-r"}),a.jsx(o,{className:`w-4 h-4 ${l?"text-blue-600":""}`}),t&&a.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[a.jsx("span",{className:"font-medium text-sm truncate",children:i.label}),a.jsx("span",{className:"text-xs opacity-70 truncate",children:i.description})]})]},i.id)})})]})]})},Kp=()=>a.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-6 py-3 z-10",children:a.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Criado por Rui Guimarães 2025"})}),Gp=({children:t,currentPage:e,onPageChange:r})=>{const[n,s]=$.useState(!0);return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[a.jsx(Vp,{isOpen:n,onToggle:()=>s(!n),currentPage:e,onPageChange:r}),a.jsx("div",{className:`
        flex-1 transition-all duration-300 ease-in-out
        ${n?"ml-56":"ml-14"}
        pb-16
      `,children:a.jsx("main",{className:"p-6 max-w-full",children:t})}),a.jsx(Kp,{})]})},pr=["Desenvolvimento","1º proto","2º proto","Size-Set","PPS","Produção","Pronto","Enviado"],os=["Modelagem","Aguarda Componentes","FALTA COMPONENTES","Aguarda Malha","Com Defeito","Aguarda Comentários","Corte","Confecção","Transfers","Serviços Externos","Embalamento"],Fi=({isOpen:t,onClose:e,producao:r,onUpdateFlags:n})=>{if(!t||!r)return null;const s=()=>{const l=r.variantes.reduce((h,m)=>h+Object.values(m.tamanhos).reduce((y,w)=>y+w,0),0),c=Array.from(new Set(r.variantes.flatMap(h=>Object.keys(h.tamanhos)))).sort(),u=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Resumo de Produção - ${r.referenciaInterna}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
            .company { font-size: 24px; font-weight: bold; color: #333; }
            .contact { font-size: 14px; color: #666; margin-top: 5px; }
            .date { font-size: 12px; color: #666; margin-top: 5px; }
            .content { margin-top: 20px; }
            .section { margin-bottom: 20px; }
            .section-title { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
            .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
            .info-item { margin-bottom: 10px; }
            .label { font-weight: bold; color: #555; }
            .value { color: #333; }
            table { width: 100%; border-collapse: collapse; margin-top: 10px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f5f5f5; font-weight: bold; }
            .total { font-weight: bold; background-color: #f0f8ff; }
            .status { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
            .status-green { background-color: #d4edda; color: #155724; }
            .status-red { background-color: #f8d7da; color: #721c24; }
            .status-yellow { background-color: #fff3cd; color: #856404; }
            .status-blue { background-color: #d1ecf1; color: #0c5460; }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company">LOMARTEX</div>
            <div class="contact">info@lomartex.pt</div>
            <div class="date">${new Date().toLocaleDateString("pt-PT")} - ${new Date().toLocaleTimeString("pt-PT")}</div>
          </div>
          
          <div class="content">
            <div class="section">
              <div class="section-title">Resumo de Produção</div>
              <div class="info-grid">
                <div>
                  <div class="info-item">
                    <span class="label">Referência Interna:</span>
                    <span class="value">${r.referenciaInterna}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Referência Cliente:</span>
                    <span class="value">${r.referenciaCliente}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Marca:</span>
                    <span class="value">${r.marca}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Cliente:</span>
                    <span class="value">${r.cliente}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Tipo de Peça:</span>
                    <span class="value">${r.tipoPeca}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Género:</span>
                    <span class="value">${r.genero}</span>
                  </div>
                </div>
                <div>
                  <div class="info-item">
                    <span class="label">Etapa:</span>
                    <span class="value status status-blue">${r.etapa}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Estado:</span>
                    <span class="value status ${r.estado==="FALTA COMPONENTES"?"status-yellow":"status-green"}">${r.estado}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Data Início:</span>
                    <span class="value">${new Date(r.dataInicio).toLocaleDateString("pt-PT")}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Data Entrega:</span>
                    <span class="value">${new Date(r.dataEstimadaEntrega).toLocaleDateString("pt-PT")}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Local Produção:</span>
                    <span class="value">${r.localProducao==="Interno"?"Interno":r.empresaExterna||"Externo"}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Quantidade Total:</span>
                    <span class="value">${l} unidades</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-title">Descrição</div>
              <p>${r.descricao}</p>
            </div>

            <div class="section">
              <div class="section-title">Grelha de Quantidades</div>
              <table>
                <thead>
                  <tr>
                    <th>Cor</th>
                    ${c.map(h=>`<th>${h}</th>`).join("")}
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  ${r.variantes.map(h=>{const m=Object.values(h.tamanhos).reduce((y,w)=>y+w,0);return`
                      <tr>
                        <td>${h.cor}</td>
                        ${c.map(y=>`<td>${h.tamanhos[y]||"-"}</td>`).join("")}
                        <td class="total">${m}</td>
                      </tr>
                    `}).join("")}
                </tbody>
                <tfoot>
                  <tr class="total">
                    <td><strong>Total</strong></td>
                    ${c.map(h=>`<td><strong>${r.variantes.reduce((y,w)=>y+(w.tamanhos[h]||0),0)||"-"}</strong></td>`).join("")}
                    <td class="total"><strong>${l}</strong></td>
                  </tr>
                </tfoot>
              </table>
            </div>

            ${r.comments?`
              <div class="section">
                <div class="section-title">Comentários</div>
                <p style="white-space: pre-wrap;">${r.comments}</p>
              </div>
            `:""}

            ${r.linkOdoo?`
              <div class="section">
                <div class="section-title">Link Odoo</div>
                <p>${r.linkOdoo}</p>
              </div>
            `:""}
          </div>
        </body>
      </html>
    `,d=window.open("","_blank");d&&(d.document.write(u),d.document.close(),d.focus(),d.print())},i=r.variantes.reduce((l,c)=>l+Object.values(c.tamanhos).reduce((u,d)=>u+d,0),0),o=Array.from(new Set(r.variantes.flatMap(l=>Object.keys(l.tamanhos)))).sort();return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Gt,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Registo Completo - ",r.referenciaInterna]}),a.jsxs("p",{className:"text-gray-600",children:[r.marca," • ",r.cliente]})]})]}),a.jsxs("button",{onClick:s,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Imprimir resumo",children:[a.jsx(_h,{className:"w-4 h-4"}),a.jsx("span",{children:"Imprimir"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(St,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Estado Rápido"}),a.jsxs("div",{className:"flex items-center space-x-4 flex-wrap gap-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"problemas-detail",checked:r.problemas||!1,onChange:l=>{n==null||n({problemas:l.target.checked}),r&&(r.problemas=l.target.checked)},className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),a.jsxs("label",{htmlFor:"problemas-detail",className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[a.jsx(is,{className:"w-4 h-4 text-red-600"}),a.jsx("span",{children:"Com Problemas"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"producao-detail",checked:r.emProducao||!1,onChange:l=>{n==null||n({emProducao:l.target.checked}),r&&(r.emProducao=l.target.checked)},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),a.jsxs("label",{htmlFor:"producao-detail",className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[a.jsx(Gt,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{children:"Em Produção"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"falta-componentes-detail",checked:r.estado==="FALTA COMPONENTES",onChange:l=>{n==null||n({faltaComponentes:l.target.checked})},className:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),a.jsxs("label",{htmlFor:"falta-componentes-detail",className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[a.jsx(bt,{className:"w-4 h-4 text-yellow-600"}),a.jsx("span",{children:"Falta Componentes"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Peça"}),a.jsx("p",{className:"text-gray-900",children:r.tipoPeca})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Género"}),a.jsx("p",{className:"text-gray-900",children:r.genero})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),a.jsx("p",{className:"text-gray-900",children:r.descricao})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referência Cliente"}),a.jsx("p",{className:"text-gray-900",children:r.referenciaCliente})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade Total"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[i," unidades"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local de Produção"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[r.localProducao==="Interno"?a.jsx(Ui,{className:"w-4 h-4 text-blue-600"}):a.jsx(El,{className:"w-4 h-4 text-orange-600"}),a.jsx("span",{className:"text-gray-900",children:r.localProducao==="Interno"?"Interno":r.empresaExterna||"Externo"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grelha de Quantidades por Cor/Tamanho"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 border-b border-gray-200",children:"Cor"}),o.map(l=>a.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 border-b border-gray-200",children:l},l)),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 border-b border-gray-200",children:"Total"})]})}),a.jsx("tbody",{children:r.variantes.map((l,c)=>{const u=Object.values(l.tamanhos).reduce((d,h)=>d+h,0);return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:Qp(l.cor)}}),a.jsx("span",{children:l.cor})]})}),o.map(d=>a.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-900 border-b border-gray-200",children:l.tamanhos[d]||"-"},d)),a.jsx("td",{className:"px-4 py-3 text-center text-sm font-bold text-blue-600 border-b border-gray-200",children:u})]},c)})}),a.jsx("tfoot",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:"Total"}),o.map(l=>{const c=r.variantes.reduce((u,d)=>u+(d.tamanhos[l]||0),0);return a.jsx("td",{className:"px-4 py-3 text-center text-sm font-bold text-gray-900",children:c||"-"},l)}),a.jsx("td",{className:"px-4 py-3 text-center text-sm font-bold text-blue-600",children:i})]})})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Odoo"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"url",value:r.linkOdoo||"",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700",placeholder:"Nenhum link configurado"}),r.linkOdoo&&a.jsxs("a",{href:r.linkOdoo,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(wo,{className:"w-4 h-4"}),a.jsx("span",{children:"Abrir"})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:a.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fechar"})})]})]})})},Qp=t=>({Preto:"#000000",Branco:"#FFFFFF","Azul Marinho":"#1e3a8a",Rosa:"#ec4899","Rosa Claro":"#f9a8d4",Cinzento:"#6b7280",Azul:"#3b82f6",Verde:"#10b981",Vermelho:"#ef4444",Amarelo:"#f59e0b"})[t]||"#6b7280",Jp=({producoes:t,onEdit:e,onDelete:r,onUpdateFlags:n,showActions:s=!1})=>{const[i,o]=$.useState("all"),[l,c]=$.useState("all"),[u,d]=$.useState(""),[h,m]=$.useState({isOpen:!1,producao:null}),y=g=>({Desenvolvimento:"bg-yellow-100 text-yellow-800","1º proto":"bg-orange-100 text-orange-800","2º proto":"bg-orange-100 text-orange-800","Size-Set":"bg-blue-100 text-blue-800",PPS:"bg-purple-100 text-purple-800",Produção:"bg-indigo-100 text-indigo-800",Pronto:"bg-green-100 text-green-800",Enviado:"bg-gray-100 text-gray-800"})[g],w=g=>({Modelagem:"bg-yellow-100 text-yellow-700","Aguarda Componentes":"bg-orange-100 text-orange-700","Aguarda Malha":"bg-orange-100 text-orange-700","Com Defeito":"bg-red-100 text-red-700","Aguarda Comentários":"bg-amber-100 text-amber-700",Corte:"bg-blue-100 text-blue-700",Confecção:"bg-indigo-100 text-indigo-700",Transfers:"bg-purple-100 text-purple-700","Serviços Externos":"bg-teal-100 text-teal-700",Embalamento:"bg-green-100 text-green-700"})[g],j=g=>{const k=new Date,b=new Date(g).getTime()-k.getTime(),S=Math.ceil(b/(1e3*60*60*24));return S<=3&&S>=0},C=g=>g.variantes.reduce((k,N)=>k+Object.values(N.tamanhos).reduce((b,S)=>b+S,0),0),x=g=>Array.from(new Set(g.variantes.flatMap(N=>Object.keys(N.tamanhos)))).sort().join(", "),p=(g,k,N)=>{k==="faltaComponentes"?n==null||n(g,{faltaComponentes:N}):n==null||n(g,{[k]:N})},f=$.useMemo(()=>t.filter(g=>{const k=i==="all"||g.etapa===i,N=l==="all"||g.estado===l,b=u===""||g.marca.toLowerCase().includes(u.toLowerCase())||g.cliente.toLowerCase().includes(u.toLowerCase())||g.referenciaInterna.toLowerCase().includes(u.toLowerCase())||g.referenciaCliente.toLowerCase().includes(u.toLowerCase())||g.descricao.toLowerCase().includes(u.toLowerCase());return k&&N&&b}).sort((g,k)=>new Date(g.dataInicio).getTime()-new Date(k.dataInicio).getTime()),[i,l,u,t]);return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Cl,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por marca, cliente, referência...",value:u,onChange:g=>d(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:i,onChange:g=>o(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"Todas as etapas"}),pr.map(g=>a.jsx("option",{value:g,children:g},g))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:l,onChange:g=>c(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"Todos os estados"}),os.map(g=>a.jsx("option",{value:g,children:g},g))]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4",children:f.map(g=>a.jsxs("div",{className:`
              rounded-lg border p-4 hover:shadow-md transition-all duration-200 relative overflow-hidden
              ${g.problemas?"blink-problems":g.estado==="FALTA COMPONENTES"?"bg-yellow-100 border-yellow-300":j(g.dataEstimadaEntrega)?"bg-red-50 border-red-300 border-l-4 border-l-red-500":"bg-white border-gray-200"}
            `,children:[a.jsxs("div",{className:"absolute top-2 right-2 flex flex-col space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"checkbox",id:`problemas-${g.id}`,checked:g.problemas||!1,onChange:k=>p(g.id,"problemas",k.target.checked),className:"w-3 h-3 text-red-600 border-gray-300 rounded focus:ring-red-500",title:"Marcar como tendo problemas"}),a.jsx(is,{className:`w-3 h-3 ${g.problemas?"text-red-600":"text-gray-300"}`})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"checkbox",id:`producao-${g.id}`,checked:g.emProducao||!1,onChange:k=>p(g.id,"emProducao",k.target.checked),className:"w-3 h-3 text-green-600 border-gray-300 rounded focus:ring-green-500",title:"Marcar como em produção"}),a.jsx(Gt,{className:`w-3 h-3 ${g.emProducao?"text-green-600":"text-gray-300"}`})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"checkbox",id:`falta-componentes-${g.id}`,checked:g.estado==="FALTA COMPONENTES",onChange:k=>p(g.id,"faltaComponentes",k.target.checked),className:"w-3 h-3 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500",title:"Marcar como falta componentes"}),a.jsx(bt,{className:`w-3 h-3 ${g.estado==="FALTA COMPONENTES"?"text-yellow-600":"text-gray-300"}`})]})]}),a.jsx("div",{className:"flex items-start justify-between mb-3 pr-16",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight mb-1",children:g.referenciaInterna}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${y(g.etapa)}`,children:g.etapa}),a.jsx("br",{}),a.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${w(g.estado)}`,children:g.estado})]})]})}),a.jsxs("div",{className:"space-y-1.5 text-xs text-gray-600 mb-3",children:[a.jsx("p",{className:"font-medium text-gray-900 text-sm leading-tight",children:g.descricao}),a.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Tamanhos:"}),a.jsx("span",{className:"ml-1 text-gray-900 font-medium",children:x(g)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Qtd Total:"}),a.jsx("span",{className:"ml-1 font-bold text-blue-600 text-sm",children:C(g)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Início:"}),a.jsx("span",{className:"ml-1 text-gray-900 font-medium",children:new Date(g.dataInicio).toLocaleDateString("pt-PT")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Entrega:"}),a.jsx("span",{className:"ml-1 font-bold text-red-700",children:new Date(g.dataEstimadaEntrega).toLocaleDateString("pt-PT")})]})]}),a.jsxs("div",{className:"flex items-center space-x-1 pt-1",children:[g.localProducao==="Interno"?a.jsx(Ui,{className:"w-3 h-3 text-blue-600"}):a.jsx(El,{className:"w-3 h-3 text-orange-600"}),a.jsx("span",{className:"text-gray-500",children:"Local:"}),a.jsx("span",{className:"text-gray-900 font-medium",children:g.localProducao==="Interno"?"Interno":g.empresaExterna||"Externo"})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[a.jsxs("button",{onClick:()=>m({isOpen:!0,producao:g}),className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-medium",children:[a.jsx(tn,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs",children:"Resumo"})]}),s&&a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>e==null?void 0:e(g),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar registo completo",children:a.jsx(vt,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>r==null?void 0:r(g.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(Te,{className:"w-3 h-3"})})]})]}),a.jsx("div",{className:`
              absolute bottom-0 left-0 right-0 py-0.5 px-2 text-center text-xs font-bold tracking-wide
              ${g.emProducao?"bg-green-600 text-white":g.problemas?"bg-red-600 text-white":"bg-gray-400 text-white"}
            `,children:g.emProducao?"EM PRODUÇÃO":g.problemas?"COM PROBLEMAS":"PARADO"})]},g.id))}),f.length===0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 text-center py-8",children:[a.jsx(Gt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Nenhuma produção encontrada"})]}),a.jsx(Fi,{isOpen:h.isOpen,onClose:()=>m({isOpen:!1,producao:null}),producao:h.producao,onUpdateFlags:g=>{h.producao&&n&&n(h.producao.id,g)}})]})},Yp="modulepreload",Xp=function(t){return"/"+t},Hc={},ps=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Xp(c),c in Hc)return;Hc[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Yp,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Zp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ps(async()=>{const{default:n}=await Promise.resolve().then(()=>ln);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Pl extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class e0 extends Pl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Vc extends Pl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Kc extends Pl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var jo;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(jo||(jo={}));var t0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class r0{constructor(e,{headers:r={},customFetch:n,region:s=jo.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Zp(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return t0(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(j=>{throw new e0(j)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new Vc(h);if(!h.ok)throw new Kc(h);let y=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield h.json():y==="application/octet-stream"?w=yield h.blob():y==="text/event-stream"?w=h:y==="multipart/form-data"?w=yield h.formData():w=yield h.text(),{data:w,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Kc||s instanceof Vc?s.context:void 0}}})}}var Ce={},Tl={},Bi={},gs={},qi={},Wi={},n0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},nn=n0();const s0=nn.fetch,Eh=nn.fetch.bind(nn),Ch=nn.Headers,i0=nn.Request,a0=nn.Response,ln=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ch,Request:i0,Response:a0,default:Eh,fetch:s0},Symbol.toStringTag,{value:"Module"})),o0=sf(ln);var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});let l0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Hi.default=l0;var Ph=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wi,"__esModule",{value:!0});const c0=Ph(o0),u0=Ph(Hi);let d0=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=c0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,m=null,y=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=p:h=JSON.parse(p))}const C=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");C&&x&&x.length>1&&(m=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,y=406,w="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const C=await i.text();try{d=JSON.parse(C),Array.isArray(d)&&i.status===404&&(h=[],d=null,y=200,w="OK")}catch{i.status===404&&C===""?(y=204,w="No Content"):d={message:C}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,y=200,w="OK"),d&&this.shouldThrowOnError)throw new u0.default(d)}return{error:d,data:h,count:m,status:y,statusText:w}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};Wi.default=d0;var h0=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qi,"__esModule",{value:!0});const f0=h0(Wi);let m0=class extends f0.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};qi.default=m0;var p0=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gs,"__esModule",{value:!0});const g0=p0(qi);let x0=class extends g0.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};gs.default=x0;var y0=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bi,"__esModule",{value:!0});const wn=y0(gs);let v0=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new wn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new wn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new wn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new wn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new wn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Bi.default=v0;var Th=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tl,"__esModule",{value:!0});const w0=Th(Bi),b0=Th(gs);let j0=class Oh{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new w0.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Oh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new b0.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Tl.default=j0;var cn=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.PostgrestError=Ce.PostgrestBuilder=Ce.PostgrestTransformBuilder=Ce.PostgrestFilterBuilder=Ce.PostgrestQueryBuilder=Ce.PostgrestClient=void 0;const Ah=cn(Tl);Ce.PostgrestClient=Ah.default;const $h=cn(Bi);Ce.PostgrestQueryBuilder=$h.default;const Ih=cn(gs);Ce.PostgrestFilterBuilder=Ih.default;const Lh=cn(qi);Ce.PostgrestTransformBuilder=Lh.default;const Dh=cn(Wi);Ce.PostgrestBuilder=Dh.default;const Rh=cn(Hi);Ce.PostgrestError=Rh.default;var _0=Ce.default={PostgrestClient:Ah.default,PostgrestQueryBuilder:$h.default,PostgrestFilterBuilder:Ih.default,PostgrestTransformBuilder:Lh.default,PostgrestBuilder:Dh.default,PostgrestError:Rh.default};const{PostgrestClient:k0,PostgrestQueryBuilder:Fx,PostgrestFilterBuilder:Bx,PostgrestTransformBuilder:qx,PostgrestBuilder:Wx,PostgrestError:Hx}=_0;class N0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const S0="2.15.4",E0=`realtime-js/${S0}`,C0="1.0.0",_o=1e4,P0=1e3,T0=100;var zn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(zn||(zn={}));var le;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(le||(le={}));var Xe;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Xe||(Xe={}));var ko;(function(t){t.websocket="websocket"})(ko||(ko={}));var sr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(sr||(sr={}));class O0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Mh{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var K;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(K||(K={}));const Gc=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=A0(o,t,e,s),i),{})},A0=(t,e,r,n)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?zh(i,o):No(o)},zh=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return D0(e,r)}switch(t){case K.bool:return $0(e);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return I0(e);case K.json:case K.jsonb:return L0(e);case K.timestamp:return R0(e);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return No(e);default:return No(e)}},No=t=>t,$0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},I0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},L0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},D0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>zh(e,l))}return t},R0=t=>typeof t=="string"?t.replace(" ","T"):t,Uh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class va{constructor(e,r,n={},s=_o){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Qc||(Qc={}));class Un{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Un.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Un.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Un.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(C=>C.presence_ref),y=h.map(C=>C.presence_ref),w=d.filter(C=>y.indexOf(C.presence_ref)<0),j=h.filter(C=>m.indexOf(C.presence_ref)<0);w.length>0&&(l[u]=w),j.length>0&&(c[u]=j)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(y=>y.presence_ref),m=d.filter(y=>h.indexOf(y.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jc||(Jc={}));var Fn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fn||(Fn={}));var pt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pt||(pt={}));class Ol{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new va(this,Xe.join,this.params,this.timeout),this.rejoinTimer=new Mh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xe.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Un(this),this.broadcastEndpointURL=Uh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==le.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Fn.PRESENCE]&&this.bindings[Fn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(pt.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(pt.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var w;if(this.socket.setAuth(),y===void 0){e==null||e(pt.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,C=(w=j==null?void 0:j.length)!==null&&w!==void 0?w:0,x=[];for(let p=0;p<C;p++){const f=j[p],{filter:{event:g,schema:k,table:N,filter:b}}=f,S=y&&y[p];if(S&&S.event===g&&S.schema===k&&S.table===N&&S.filter===b)x.push(Object.assign(Object.assign({},f),{id:S.id}));else{this.unsubscribe(),this.state=le.errored,e==null||e(pt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(pt.SUBSCRIBED);return}}).receive("error",y=>{this.state=le.errored,e==null||e(pt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===le.joined&&e===Fn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=le.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xe.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new va(this,Xe.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=le.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new va(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>T0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Xe;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var w,j,C;return((w=y.filter)===null||w===void 0?void 0:w.event)==="*"||((C=(j=y.filter)===null||j===void 0?void 0:j.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(y=>y.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var w,j,C,x,p,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const g=y.id,k=(w=y.filter)===null||w===void 0?void 0:w.event;return g&&((j=r.ids)===null||j===void 0?void 0:j.includes(g))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const g=(p=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return g==="*"||g===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:j,table:C,commit_timestamp:x,type:p,errors:f}=w;m=Object.assign(Object.assign({},{schema:j,table:C,commit_timestamp:x,eventType:p,new:{},old:{},errors:f}),this._getPayloadRecords(w))}y.callback(m,n)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Ol.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xe.close,{},e)}_onError(e){this._on(Xe.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Gc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Gc(e.columns,e.old_record)),r}}const wa=()=>{},Ds={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},M0=[1e3,2e3,5e3,1e4],z0=1e4,U0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class F0{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_o,this.transport=null,this.heartbeatIntervalMs=Ds.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wa,this.ref=0,this.reconnectTimer=null,this.logger=wa,this.conn=null,this.sendBuffer=[],this.serializer=new O0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>ps(async()=>{const{default:l}=await Promise.resolve().then(()=>ln);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${ko.websocket}`,this.httpEndpoint=Uh(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=N0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:C0}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case zn.connecting:return sr.Connecting;case zn.open:return sr.Open;case zn.closing:return sr.Closing;default:return sr.Closed}}isConnected(){return this.connectionState()===sr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Ol(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(P0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ds.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xe.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([U0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:E0};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Xe.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Mh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ds.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,l,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:_o,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ds.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:wa,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>M0[h-1]||z0,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Al extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ce(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class B0 extends Al{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class So extends Al{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var q0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Fh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ps(async()=>{const{default:n}=await Promise.resolve().then(()=>ln);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},W0=()=>q0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ps(()=>Promise.resolve().then(()=>ln),void 0)).Response:Response}),Eo=t=>{if(Array.isArray(t))return t.map(r=>Eo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Eo(n)}),e},H0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var yr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const ba=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),V0=(t,e,r)=>yr(void 0,void 0,void 0,function*(){const n=yield W0();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new B0(ba(s),i,o))}).catch(s=>{e(new So(ba(s),s))}):e(new So(ba(t),t))}),K0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(H0(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function xs(t,e,r,n,s,i){return yr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,K0(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>V0(c,l,n))})})}function ji(t,e,r,n){return yr(this,void 0,void 0,function*(){return xs(t,"GET",e,r,n)})}function ot(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return xs(t,"POST",e,n,s,r)})}function Co(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return xs(t,"PUT",e,n,s,r)})}function G0(t,e,r,n){return yr(this,void 0,void 0,function*(){return xs(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Bh(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return xs(t,"DELETE",e,n,s,r)})}var je=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Q0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class J0{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Fh(s)}uploadOrUpdate(e,r,n,s){return je(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Yc),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?Co:ot)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}})}upload(e,r,n){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return je(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Yc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Co(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(ce(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return je(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield ot(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Al("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}update(e,r,n){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return je(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}copy(e,r,n){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return je(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ot(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return je(this,void 0,void 0,function*(){try{const s=yield ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}download(e,r){return je(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ji(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ce(l))return{data:null,error:l};throw l}})}info(e){return je(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield ji(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Eo(n),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}exists(e){return je(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield G0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ce(n)&&n instanceof So){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return je(this,void 0,void 0,function*(){try{return{data:yield Bh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}list(e,r,n){return je(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Q0),r),{prefix:e||""});return{data:yield ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}listV2(e,r){return je(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Y0="2.11.0",X0={"X-Client-Info":`storage-js/${Y0}`};var jr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Z0{constructor(e,r={},n,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},X0),r),this.fetch=Fh(n)}listBuckets(){return jr(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}getBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return jr(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return jr(this,void 0,void 0,function*(){try{return{data:yield Co(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}emptyBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}deleteBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield Bh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}}class eg extends Z0{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new J0(this.url,this.headers,e,this.fetch)}}const tg="2.57.0";let Sn="";typeof Deno<"u"?Sn="deno":typeof document<"u"?Sn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sn="react-native":Sn="node";const rg={"X-Client-Info":`supabase-js-${Sn}/${tg}`},ng={headers:rg},sg={schema:"public"},ig={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ag={};var og=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const lg=t=>{let e;return t?e=t:typeof fetch>"u"?e=Eh:e=fetch,(...r)=>e(...r)},cg=()=>typeof Headers>"u"?Ch:Headers,ug=(t,e,r)=>{const n=lg(r),s=cg();return(i,o)=>og(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var dg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function hg(t){return t.endsWith("/")?t:t+"/"}function fg(t,e){var r,n;const{db:s,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>dg(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const qh="2.71.1",Cr=30*1e3,Po=3,ja=Po*Cr,mg="http://localhost:9999",pg="supabase.auth.token",gg={"X-Client-Info":`gotrue-js/${qh}`},To="X-Supabase-Api-Version",Wh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yg=10*60*1e3;class $l extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class vg extends $l{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function wg(t){return z(t)&&t.name==="AuthApiError"}class Hh extends $l{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Xt extends $l{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Tt extends Xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bg(t){return z(t)&&t.name==="AuthSessionMissingError"}class Rs extends Xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ms extends Xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zs extends Xt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jg(t){return z(t)&&t.name==="AuthImplicitGrantRedirectError"}class Xc extends Xt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Oo extends Xt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function _a(t){return z(t)&&t.name==="AuthRetryableFetchError"}class Zc extends Xt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ao extends Xt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),eu=` 	
\r=`.split(""),_g=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<eu.length;e+=1)t[eu[e].charCodeAt(0)]=-2;for(let e=0;e<_i.length;e+=1)t[_i[e].charCodeAt(0)]=e;return t})();function tu(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(_i[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(_i[n]),e.queuedBits-=6}}function Vh(t,e,r){const n=_g[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ru(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Sg(o,n,r)};for(let o=0;o<t.length;o+=1)Vh(t.charCodeAt(o),s,i);return e.join("")}function kg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ng(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}kg(n,e)}}function Sg(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Eg(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Vh(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Cg(t){const e=[];return Ng(t,r=>e.push(r)),new Uint8Array(e)}function Pg(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>tu(s,r,n)),tu(null,r,n),e.join("")}function Tg(t){return Math.round(Date.now()/1e3)+t}function Og(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qe=()=>typeof window<"u"&&typeof document<"u",Zt={tested:!1,writable:!1},Kh=()=>{if(!Qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zt.tested)return Zt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Zt.tested=!0,Zt.writable=!0}catch{Zt.tested=!0,Zt.writable=!1}return Zt.writable};function Ag(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Gh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ps(async()=>{const{default:n}=await Promise.resolve().then(()=>ln);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},$g=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Pr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},er=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Pt=async(t,e)=>{await t.removeItem(e)};class Vi{constructor(){this.promise=new Vi.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Vi.promiseConstructor=Promise;function ka(t){const e=t.split(".");if(e.length!==3)throw new Ao("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!xg.test(e[n]))throw new Ao("JWT not in base64url format");return{header:JSON.parse(ru(e[0])),payload:JSON.parse(ru(e[1])),signature:Eg(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ig(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Lg(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Dg(t){return("0"+t.toString(16)).substr(-2)}function Rg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Dg).join("")}async function Mg(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function zg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Mg(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _r(t,e,r=!1){const n=Rg();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Pr(t,`${e}-code-verifier`,s);const i=await zg(n);return[i,n===i?"plain":"s256"]}const Ug=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Fg(t){const e=t.headers.get(To);if(!e||!e.match(Ug))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Bg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function qg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kr(t){if(!Wg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Na(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nu(t){return JSON.parse(JSON.stringify(t))}var Hg=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const nr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Vg=[502,503,504];async function su(t){var e;if(!$g(t))throw new Oo(nr(t),0);if(Vg.includes(t.status))throw new Oo(nr(t),t.status);let r;try{r=await t.json()}catch(i){throw new Hh(nr(i),i)}let n;const s=Fg(t);if(s&&s.getTime()>=Wh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Zc(nr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Tt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Zc(nr(r),t.status,r.weak_password.reasons);throw new vg(nr(r),t.status||500,n)}const Kg=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function B(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[To]||(i[To]=Wh["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Gg(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Gg(t,e,r,n,s,i){const o=Kg(e,n,s,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Oo(nr(c),0)}if(l.ok||await su(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await su(c)}}function ft(t){var e;let r=null;Xg(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Tg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function iu(t){const e=ft(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Qg(t){return{data:t,error:null}}function Jg(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=Hg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Yg(t){return t}function Xg(t){return t.access_token&&t.refresh_token&&t.expires_in}const Sa=["global","local","others"];var Zg=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class ex{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Gh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Sa[0]){if(Sa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sa.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Lt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Zg(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Jg,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Yg});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(w=>{const j=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(w.split(";")[1].split("=")[1]);u[`${C}Page`]=j}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){kr(e);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){kr(e);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Lt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){kr(e);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Lt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){kr(e.userId);try{const{data:r,error:n}=await B(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteFactor(e){kr(e.userId),kr(e.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}}function au(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function tx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Nr={debug:!!(globalThis&&Kh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rx extends Qh{}async function nx(t,e,r){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new rx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Nr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}tx();const sx={url:mg,storageKey:pg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ou(t,e,r){return await r()}const Sr={};class ls{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ls.nextInstanceID,ls.nextInstanceID+=1,this.instanceID>0&&Qe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},sx),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ex({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Gh(s.fetch),this.lock=s.lock||ou,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=nx:this.lock=ou,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Kh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=au(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=au(this.memoryStorage)),Qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Sr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Sr[this.storageKey]=Object.assign(Object.assign({},Sr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Sr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Sr[this.storageKey]=Object.assign(Object.assign({},Sr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Ag(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Qe()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),jg(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return z(r)?{error:r}:{error:new Hh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ft}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:h,options:m}=e;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await _r(this.storage,this.storageKey)),i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:w},xform:ft})}else if("phone"in e){const{phone:d,password:h,options:m}=e;i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ft})}else throw new Ms("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:iu})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:iu})}else throw new Ms("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Rs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,i,o,l,c,u,d,h,m,y;let w,j;if("message"in e)w=e.message,j=e.signature;else{const{chain:C,wallet:x,statement:p,options:f}=e;let g;if(Qe())if(typeof x=="object")g=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))g=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=x}const k=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in g&&g.signIn){const N=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),p?{statement:p}:null));let b;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")b=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)b=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)w=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),j=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in g)||typeof g.signMessage!="function"||!("publicKey"in g)||typeof g!="object"||!g.publicKey||!("toBase58"in g.publicKey)||typeof g.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${k.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(d=f==null?void 0:f.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const N=await g.signMessage(new TextEncoder().encode(w),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=N}}try{const{data:C,error:x}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Pg(j)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ft});if(x)throw x;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Rs}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:x})}catch(C){if(z(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const r=await er(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ft});if(await Pt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Rs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,l=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ft}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Rs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await _r(this.storage,this.storageKey));const{error:h}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ms("You must provide either an email or phone number.")}catch(l){if(z(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ft});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await _r(this.storage,this.storageKey)),await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Qg})}catch(i){if(z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Tt;const{error:s}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(z(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await B(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:l}=await B(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ms("You must provide either an email or phone number and a type")}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await er(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ja:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await er(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Na()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tt}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Lt})})}catch(r){if(z(r))return bg(r)&&(await this._removeSession(),await Pt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Tt;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await _r(this.storage,this.storageKey));const{data:u,error:d}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Lt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=ka(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(z(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Tt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Qe())throw new zs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Xc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Xc("No code detected.");const{data:p,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const g=new URL(window.location.href);return g.searchParams.delete("code"),window.history.replaceState(window.history.state,"",g.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new zs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const y=m-d;y*1e3<=Cr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const w=m-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,d);const{data:j,error:C}=await this._getUser(i);if(C)throw C;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(z(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await er(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(wg(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Pt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Og(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await _r(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Qe()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(z(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Lg(async s=>(s>0&&await Ig(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ft})),(s,i)=>{const o=200*Math.pow(2,s);return i&&_a(i)&&Date.now()+o-n<Cr})}catch(n){if(this._debug(r,"error",n),z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Qe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await er(this.storage,this.storageKey);if(s&&this.userStorage){let o=await er(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Pr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Na()}else if(s&&!s.user&&!s.user){const o=await er(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Pt(this.storage,this.storageKey+"-user"),await Pr(this.storage,this.storageKey,s)):s.user=Na()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ja;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${ja}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),_a(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Vi;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Tt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),z(i)){const o={session:null,error:i};return _a(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Pr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=nu(s);await Pr(this.storage,this.storageKey,i)}else{const s=nu(r);await Pr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Pt(this.storage,this.storageKey),await Pt(this.storage,this.storageKey+"-code-verifier"),await Pt(this.storage,this.storageKey+"-user"),this.userStorage&&await Pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Cr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Cr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Cr}ms, refresh threshold is ${Po} ticks`),s<=Po&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Qh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await _r(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await B(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ka(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+yg>s)return n;const{data:i,error:o}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:y,error:w}=await this.getSession();if(w||!y.session)return{data:null,error:w};n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=ka(n);r!=null&&r.allowExpired||Bg(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=qg(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Cg(`${l}.${c}`)))throw new Ao("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}}ls.nextInstanceID=0;const ix=ls;class ax extends ix{constructor(e){super(e)}}var ox=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class lx{constructor(e,r,n){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=hg(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:sg,realtime:ag,auth:Object.assign(Object.assign({},ig),{storageKey:u}),global:ng},h=fg(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=ug(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new k0(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new eg(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new r0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return ox(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ax({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new F0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cx=(t,e,r)=>new lx(t,e,r);function ux(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ux()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dx="https://lwjpgpgcbpkorntsjcpk.supabase.co",hx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx3anBncGdjYnBrb3JudHNqY3BrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3Mzc3MDEsImV4cCI6MjA3MjMxMzcwMX0.HqROR3YI2G9BPVv-lJcFN1ZgIaVvyBetrOeghPICiQQ",se=cx(dx,hx),fx=(t,e,r=[])=>{var s,i;const n=e.reduce((o,l)=>{const c=o.find(u=>u.cor===l.cor);return c?c.tamanhos[l.tamanho]=l.quantidade:o.push({cor:l.cor,tamanhos:{[l.tamanho]:l.quantidade}}),o},[]);return{id:t.id,marca:((s=t.marcas)==null?void 0:s.nome)||"",cliente:((i=t.clientes)==null?void 0:i.nome)||"",referenciaInterna:t.referencia_interna,referenciaCliente:t.referencia_cliente,descricao:t.descricao,tipoPeca:t.tipo_peca,genero:t.genero,variantes:n,etapa:t.etapa,estado:t.estado,dataInicio:t.data_inicio,dataPrevisao:t.data_previsao,dataEstimadaEntrega:t.data_estimada_entrega,emProducao:t.em_producao,problemas:t.problemas,localProducao:t.local_producao,empresaExterna:t.empresa_externa,linkOdoo:t.link_odoo,comments:t.comments,bomFiles:r.map(o=>({id:o.id,name:o.nome,url:o.url,uploadDate:o.upload_date}))}},mx=async()=>{try{const{data:t,error:e}=await se.from("clientes").select("*").order("nome");if(e)throw e;const{data:r,error:n}=await se.from("marcas").select("*");if(n)throw n;return t.map(s=>({id:s.id,nome:s.nome,marcas:r.filter(i=>i.cliente_id===s.id).map(i=>i.nome)}))}catch(t){return console.error("Error fetching clientes:",t),[]}},px=async t=>{try{const{data:e,error:r}=await se.from("clientes").insert({nome:t.nome}).select().single();if(r)throw r;const n=t.marcas.map(i=>({nome:i,cliente_id:e.id})),{error:s}=await se.from("marcas").insert(n);if(s)throw s;return{id:e.id,nome:e.nome,marcas:t.marcas}}catch(e){throw console.error("Error creating cliente:",e),e}},gx=async(t,e)=>{try{const{error:r}=await se.from("clientes").update({nome:e.nome}).eq("id",t);if(r)throw r;const{error:n}=await se.from("marcas").delete().eq("cliente_id",t);if(n)throw n;const s=e.marcas.map(o=>({nome:o,cliente_id:t})),{error:i}=await se.from("marcas").insert(s);if(i)throw i;return{id:t,nome:e.nome,marcas:e.marcas}}catch(r){throw console.error("Error updating cliente:",r),r}},xx=async t=>{try{const{error:e}=await se.from("clientes").delete().eq("id",t);if(e)throw e}catch(e){throw console.error("Error deleting cliente:",e),e}},yx=async()=>{try{const{data:t,error:e}=await se.from("producoes").select(`
        *,
        clientes:cliente_id(nome),
        marcas:marca_id(nome)
      `).order("data_inicio",{ascending:!1});if(e)throw e;const{data:r,error:n}=await se.from("producao_variantes").select("*");if(n)throw n;const{data:s,error:i}=await se.from("bom_files").select("*");if(i)throw i;return t.map(o=>{const l=r.filter(u=>u.producao_id===o.id),c=s.filter(u=>u.producao_id===o.id);return fx(o,l,c)})}catch(t){return console.error("Error fetching producoes:",t),[]}},vx=async t=>{try{const{data:e,error:r}=await se.from("marcas").select("id, cliente_id, clientes!inner(nome)").eq("nome",t.marca).eq("clientes.nome",t.cliente);if(r||!e||e.length===0)throw new Error(`Marca "${t.marca}" não encontrada para o cliente "${t.cliente}"`);const n=e[0],{data:s,error:i}=await se.from("producoes").insert({marca_id:n.id,cliente_id:n.cliente_id,referencia_interna:t.referenciaInterna,referencia_cliente:t.referenciaCliente,descricao:t.descricao,tipo_peca:t.tipoPeca,genero:t.genero,etapa:t.etapa,estado:t.estado,data_inicio:t.dataInicio,data_previsao:t.dataPrevisao,data_estimada_entrega:t.dataEstimadaEntrega,em_producao:t.emProducao,problemas:t.problemas,local_producao:t.localProducao,empresa_externa:t.empresaExterna,link_odoo:t.linkOdoo,comments:t.comments}).select().single();if(i)throw i;const o=[];if(t.variantes.forEach(l=>{Object.entries(l.tamanhos).forEach(([c,u])=>{u>0&&o.push({producao_id:s.id,cor:l.cor,tamanho:c,quantidade:u})})}),o.length>0){const{error:l}=await se.from("producao_variantes").insert(o);if(l)throw l}return{...t,id:s.id}}catch(e){throw console.error("Error creating producao:",e),e}},wx=async(t,e)=>{try{const{data:r,error:n}=await se.from("marcas").select("id, cliente_id, clientes!inner(nome)").eq("nome",e.marca).eq("clientes.nome",e.cliente);if(n||!r||r.length===0)throw new Error(`Marca "${e.marca}" não encontrada para o cliente "${e.cliente}"`);const s=r[0],{error:i}=await se.from("producoes").update({marca_id:s.id,cliente_id:s.cliente_id,referencia_interna:e.referenciaInterna,referencia_cliente:e.referenciaCliente,descricao:e.descricao,tipo_peca:e.tipoPeca,genero:e.genero,etapa:e.etapa,estado:e.estado,data_inicio:e.dataInicio,data_previsao:e.dataPrevisao,data_estimada_entrega:e.dataEstimadaEntrega,em_producao:e.emProducao,problemas:e.problemas,local_producao:e.localProducao,empresa_externa:e.empresaExterna,link_odoo:e.linkOdoo,comments:e.comments}).eq("id",t);if(i)throw i;const{error:o}=await se.from("producao_variantes").delete().eq("producao_id",t);if(o)throw o;const l=[];if(e.variantes.forEach(c=>{Object.entries(c.tamanhos).forEach(([u,d])=>{d>0&&l.push({producao_id:t,cor:c.cor,tamanho:u,quantidade:d})})}),l.length>0){const{error:c}=await se.from("producao_variantes").insert(l);if(c)throw c}return{...e,id:t}}catch(r){throw console.error("Error updating producao:",r),r}},bx=async t=>{try{const{error:e}=await se.from("producoes").delete().eq("id",t);if(e)throw e}catch(e){throw console.error("Error deleting producao:",e),e}},jx=async(t,e)=>{try{const r={};e.problemas!==void 0&&(r.problemas=e.problemas),e.emProducao!==void 0&&(r.em_producao=e.emProducao),e.faltaComponentes!==void 0&&(r.estado=e.faltaComponentes?"FALTA COMPONENTES":"Aguarda Componentes");const{error:n}=await se.from("producoes").update(r).eq("id",t);if(n)throw n}catch(r){throw console.error("Error updating producao flags:",r),r}},_x=async(t,e)=>{try{const{error:r}=await se.from("producoes").update({comments:e}).eq("id",t);if(r)throw r}catch(r){throw console.error("Error updating producao comments:",r),r}};const ys=()=>{const[t,e]=$.useState([]),[r,n]=$.useState(!0),[s,i]=$.useState(null),o=async()=>{try{n(!0);const m=await yx();e(m),i(null)}catch(m){i("Erro ao carregar produções"),console.error(m)}finally{n(!1)}};return $.useEffect(()=>{o()},[]),{producoes:t,loading:r,error:s,createProducao:async m=>{try{const y=await vx(m);return e(w=>[...w,y]),y}catch(y){throw i("Erro ao criar produção"),y}},updateProducao:async(m,y)=>{try{const w=await wx(m,y);return e(j=>j.map(C=>C.id===m?{...w,id:m}:C)),w}catch(w){throw i("Erro ao atualizar produção"),console.error("Update error:",w),w}},deleteProducao:async m=>{try{await bx(m),e(y=>y.filter(w=>w.id!==m))}catch(y){throw i("Erro ao remover produção"),y}},updateFlags:async(m,y)=>{try{await jx(m,y),e(w=>w.map(j=>j.id===m?{...j,problemas:y.problemas!==void 0?y.problemas:j.problemas,emProducao:y.emProducao!==void 0?y.emProducao:j.emProducao,estado:y.faltaComponentes!==void 0?y.faltaComponentes?"FALTA COMPONENTES":"Aguarda Componentes":j.estado}:j))}catch(w){throw i("Erro ao atualizar flags"),w}},updateComments:async(m,y)=>{try{await _x(m,y),e(w=>w.map(j=>j.id===m?{...j,comments:y}:j))}catch(w){throw i("Erro ao atualizar comentários"),w}},refetch:o}},Jh=()=>{const[t,e]=$.useState([]),[r,n]=$.useState(!0),[s,i]=$.useState(null),o=async()=>{try{n(!0);const d=await mx();e(d),i(null)}catch(d){i("Erro ao carregar clientes"),console.error(d)}finally{n(!1)}};return $.useEffect(()=>{o()},[]),{clientes:t,loading:r,error:s,createCliente:async d=>{try{const h=await px(d);return e(m=>[...m,h]),h}catch(h){throw i("Erro ao criar cliente"),h}},updateCliente:async(d,h)=>{try{const m=await gx(d,h);return e(y=>y.map(w=>w.id===d?m:w)),m}catch(m){throw i("Erro ao atualizar cliente"),m}},deleteCliente:async d=>{try{await xx(d),e(h=>h.filter(m=>m.id!==d))}catch(h){throw i("Erro ao remover cliente"),h}},refetch:o}},Yh=({isOpen:t,onClose:e,onSave:r,producao:n})=>{const{clientes:s,loading:i}=Jh(),o=v=>{const T=[];return v.forEach(O=>{Object.entries(O.tamanhos).forEach(([A,R])=>{T.push({id:`${O.cor}-${A}`,cor:O.cor,tamanho:A,quantidade:R})})}),T},l=v=>{const T=new Map;return v.forEach(O=>{T.has(O.cor)||T.set(O.cor,{cor:O.cor,tamanhos:{}}),O.quantidade>0&&(T.get(O.cor).tamanhos[O.tamanho]=O.quantidade)}),Array.from(T.values()).filter(O=>Object.keys(O.tamanhos).length>0)},[c,u]=$.useState({marca:"",cliente:"",referenciaInterna:"",referenciaCliente:"",descricao:"",tipoPeca:"",genero:"Unissexo",etapa:"Desenvolvimento",estado:"Modelagem",dataInicio:new Date().toISOString().split("T")[0],dataPrevisao:"",dataEstimadaEntrega:"",emProducao:!1,problemas:!1,faltaComponentes:!1,localProducao:"Interno",empresaExterna:"",linkOdoo:"",comments:""}),[d,h]=$.useState([]),[m,y]=$.useState(""),[w,j]=$.useState("");$.useEffect(()=>{n&&t?(u({marca:n.marca||"",cliente:n.cliente||"",referenciaInterna:n.referenciaInterna||"",referenciaCliente:n.referenciaCliente||"",descricao:n.descricao||"",tipoPeca:n.tipoPeca||"",genero:n.genero||"Unissexo",etapa:n.etapa||"Desenvolvimento",estado:n.estado||"Modelagem",dataInicio:n.dataInicio||new Date().toISOString().split("T")[0],dataPrevisao:n.dataPrevisao||"",dataEstimadaEntrega:n.dataEstimadaEntrega||"",emProducao:n.emProducao||!1,problemas:n.problemas||!1,faltaComponentes:n.estado==="FALTA COMPONENTES"||!1,localProducao:n.localProducao||"Interno",empresaExterna:n.empresaExterna||"",linkOdoo:n.linkOdoo||"",comments:n.comments||""}),h(o(n.variantes||[]))):!n&&t&&(u({marca:"",cliente:"",referenciaInterna:"",referenciaCliente:"",descricao:"",tipoPeca:"",genero:"Unissexo",etapa:"Desenvolvimento",estado:"Modelagem",dataInicio:new Date().toISOString().split("T")[0],dataPrevisao:"",dataEstimadaEntrega:"",emProducao:!1,problemas:!1,faltaComponentes:!1,localProducao:"Interno",empresaExterna:"",linkOdoo:"",comments:""}),h([]))},[n,t]);const C=s==null?void 0:s.find(v=>v.nome===c.cliente),x=(C==null?void 0:C.marcas)||[],p=Array.from(new Set(d.map(v=>v.cor))).filter(Boolean),f=Array.from(new Set(d.map(v=>v.tamanho))).filter(Boolean),g=(v,T)=>{u(O=>({...O,[v]:T}))},k=v=>{u(T=>({...T,cliente:v,marca:""}))},N=v=>{v.preventDefault();const T=l(d),O={...c,variantes:T,estado:c.faltaComponentes?"FALTA COMPONENTES":c.estado};n!=null&&n.id&&(O.id=n.id),delete O.faltaComponentes,r(O),e()},b=()=>{if(!m.trim()||p.includes(m.trim()))return;const v=m.trim(),T=f.length>0?f.map(O=>({id:`${v}-${O}`,cor:v,tamanho:O,quantidade:0})):["XS","S","M","L","XL"].map(O=>({id:`${v}-${O}`,cor:v,tamanho:O,quantidade:0}));h(O=>[...O,...T]),y("")},S=()=>{if(!w.trim()||f.includes(w.trim().toUpperCase()))return;const v=w.trim().toUpperCase(),T=p.length>0?p.map(O=>({id:`${O}-${v}`,cor:O,tamanho:v,quantidade:0})):[{id:`Nova Cor-${v}`,cor:"Nova Cor",tamanho:v,quantidade:0}];h(O=>[...O,...T]),j("")},L=v=>{confirm(`Remover todas as entradas da cor "${v}"?`)&&h(T=>T.filter(O=>O.cor!==v))},D=v=>{confirm(`Remover todas as entradas do tamanho "${v}"?`)&&h(T=>T.filter(O=>O.tamanho!==v))},H=v=>h(T=>T.filter(O=>O.id!==v)),xe=v=>{h(T=>[...T,{...v,id:`${v.cor}-${v.tamanho}-${Date.now()}`}])},oe=(v,T,O)=>{h(A=>A.map(R=>R.id===v?{...R,[T]:O,id:T==="cor"||T==="tamanho"?`${T==="cor"?O:R.cor}-${T==="tamanho"?O:R.tamanho}`:R.id}:R))},_=()=>{h(v=>[...v,{id:`nova-${Date.now()}`,cor:"",tamanho:"",quantidade:0}])};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Gt,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n?"Editar Produção":"Nova Produção"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(St,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente"}),a.jsxs("select",{value:c.cliente,onChange:v=>k(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Selecionar cliente"}),s.map(v=>a.jsx("option",{value:v.nome,children:v.nome},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marca"}),a.jsxs("select",{value:c.marca,onChange:v=>g("marca",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:!c.cliente,children:[a.jsx("option",{value:"",children:"Selecionar marca"}),x.map(v=>a.jsx("option",{value:v,children:v},v))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referência Interna"}),a.jsx("input",{type:"text",value:c.referenciaInterna,onChange:v=>g("referenciaInterna",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referência Cliente"}),a.jsx("input",{type:"text",value:c.referenciaCliente,onChange:v=>g("referenciaCliente",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),a.jsx("input",{type:"text",value:c.descricao,onChange:v=>g("descricao",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Peça"}),a.jsx("input",{type:"text",value:c.tipoPeca,onChange:v=>g("tipoPeca",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Género"}),a.jsxs("select",{value:c.genero,onChange:v=>g("genero",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"Masculino",children:"Masculino"}),a.jsx("option",{value:"Feminino",children:"Feminino"}),a.jsx("option",{value:"Unissexo",children:"Unissexo"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etapa"}),a.jsx("select",{value:c.etapa,onChange:v=>g("etapa",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:pr.map(v=>a.jsx("option",{value:v,children:v},v))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),a.jsx("select",{value:c.faltaComponentes?"FALTA COMPONENTES":c.estado,onChange:v=>{v.target.value==="FALTA COMPONENTES"?(g("faltaComponentes",!0),g("estado","Aguarda Componentes")):(g("faltaComponentes",!1),g("estado",v.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:os.map(v=>a.jsx("option",{value:v,children:v},v))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Início"}),a.jsx("input",{type:"date",value:c.dataInicio,onChange:v=>g("dataInicio",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Previsão"}),a.jsx("input",{type:"date",value:c.dataPrevisao,onChange:v=>g("dataPrevisao",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Estimada de Entrega"}),a.jsx("input",{type:"date",value:c.dataEstimadaEntrega,onChange:v=>g("dataEstimadaEntrega",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cores e Tamanhos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:m,onChange:v=>y(v.target.value),placeholder:"Nova cor",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a.jsx(et,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:w,onChange:v=>j(v.target.value),placeholder:"Novo tamanho",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:a.jsx(et,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cor"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tamanho"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Quantidade"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Ações"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map((v,T)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("input",{type:"text",value:v.cor,onChange:O=>oe(v.id,"cor",O.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("input",{type:"text",value:v.tamanho,onChange:O=>oe(v.id,"tamanho",O.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("input",{type:"number",min:"0",value:v.quantidade,onChange:O=>oe(v.id,"quantidade",parseInt(O.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center"})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx("button",{type:"button",onClick:()=>xe(v),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Duplicar linha",children:a.jsx(Up,{className:"w-3 h-3"})}),a.jsx("button",{type:"button",onClick:()=>H(v.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remover linha",children:a.jsx(Te,{className:"w-3 h-3"})})]})})]},v.id))})]}),a.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:a.jsxs("button",{type:"button",onClick:_,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{children:"Adicionar Linha"})]})})]}),(p.length>0||f.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[p.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cores Disponíveis"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(v=>a.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-2 py-1 rounded",children:[a.jsx("span",{className:"text-sm text-blue-800",children:v}),a.jsx("button",{type:"button",onClick:()=>L(v),className:"text-red-600 hover:text-red-800",children:a.jsx(Te,{className:"w-3 h-3"})})]},v))})]}),f.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tamanhos Disponíveis"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(v=>a.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 px-2 py-1 rounded",children:[a.jsx("span",{className:"text-sm text-green-800",children:v}),a.jsx("button",{type:"button",onClick:()=>D(v),className:"text-red-600 hover:text-red-800",children:a.jsx(Te,{className:"w-3 h-3"})})]},v))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Local de Produção"}),a.jsxs("select",{value:c.localProducao,onChange:v=>g("localProducao",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"Interno",children:"Interno"}),a.jsx("option",{value:"Externo",children:"Externo"})]})]}),c.localProducao==="Externo"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empresa Externa"}),a.jsx("input",{type:"text",value:c.empresaExterna,onChange:v=>g("empresaExterna",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Odoo"}),a.jsx("input",{type:"url",value:c.linkOdoo,onChange:v=>g("linkOdoo",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://odoo.example.com/production/..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentários"}),a.jsx("textarea",{value:c.comments,onChange:v=>g("comments",v.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Comentários sobre a produção..."})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"emProducao",checked:c.emProducao,onChange:v=>g("emProducao",v.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),a.jsx("label",{htmlFor:"emProducao",className:"text-sm font-medium text-gray-700",children:"Em Produção"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"problemas",checked:c.problemas,onChange:v=>g("problemas",v.target.checked),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),a.jsx("label",{htmlFor:"problemas",className:"text-sm font-medium text-gray-700",children:"Com Problemas"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"faltaComponentes",checked:c.faltaComponentes,onChange:v=>{g("faltaComponentes",v.target.checked),v.target.checked&&g("estado","Aguarda Componentes")},className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),a.jsx("label",{htmlFor:"faltaComponentes",className:"text-sm font-medium text-gray-700",children:"Falta Componentes"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ms,{className:"w-4 h-4"}),a.jsxs("span",{children:[n?"Atualizar":"Criar"," Produção"]})]})]})]})]})}):null},lu=()=>{const{producoes:t,loading:e,error:r,createProducao:n,updateProducao:s,deleteProducao:i,updateFlags:o}=ys(),[l,c]=$.useState({isOpen:!1}),[u,d]=$.useState(!1),h=async p=>{try{await n(p)}catch{alert("Erro ao criar produção")}c({isOpen:!1})},m=async p=>{try{await s(p.id,p)}catch{alert("Erro ao atualizar produção")}c({isOpen:!1})},y=async p=>{if(confirm("Tem certeza que deseja remover esta produção?"))try{await i(p)}catch{alert("Erro ao remover produção")}},w=p=>({Desenvolvimento:"bg-yellow-100 text-yellow-800","1º proto":"bg-orange-100 text-orange-800","2º proto":"bg-orange-100 text-orange-800","Size-Set":"bg-blue-100 text-blue-800",PPS:"bg-purple-100 text-purple-800",Produção:"bg-indigo-100 text-indigo-800",Pronto:"bg-green-100 text-green-800",Enviado:"bg-gray-100 text-gray-800"})[p],j=p=>{const f=new Date,k=new Date(p).getTime()-f.getTime(),N=Math.ceil(k/(1e3*60*60*24));return N<=3&&N>=0},C=$.useMemo(()=>{const p=t.length,f=t.filter(S=>S.emProducao||!1).length,g=t.filter(S=>S.problemas||!1).length,k=t.filter(S=>S.estado==="FALTA COMPONENTES").length,N=t.filter(S=>{const L=new Date,H=new Date(S.dataEstimadaEntrega).getTime()-L.getTime();return Math.ceil(H/(1e3*60*60*24))<=2}).length,b=pr.reduce((S,L)=>(S[L]=t.filter(D=>D.etapa===L).length,S),{});return{total:p,emProducao:f,comProblemas:g,faltaComponentes:k,atrasado:N,porEtapa:b}},[t]),x=$.useMemo(()=>[...t].sort((p,f)=>{const g=j(p.dataEstimadaEntrega),k=j(f.dataEstimadaEntrega);return g&&!k?-1:!g&&k?1:new Date(f.dataInicio).getTime()-new Date(p.dataInicio).getTime()}),[t]);return e?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Carregando produções..."})]})}):r?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(is,{className:"w-6 h-6 text-red-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),a.jsx("p",{className:"text-red-700",children:r})]})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard de Produções"}),a.jsx("p",{className:"text-gray-600",children:"Visão geral e acompanhamento em tempo real"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xl font-bold text-blue-600",children:C.total}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total de produções"})]}),a.jsxs("button",{onClick:()=>c({isOpen:!0}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{children:"Nova Produção"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Bp,{className:"w-6 h-6 text-green-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-700",children:C.emProducao}),a.jsx("div",{className:"text-sm text-green-600",children:"Em Produção"})]})]})}),a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(is,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-700",children:C.comProblemas}),a.jsx("div",{className:"text-sm text-red-600",children:"Com Problemas"})]})]})}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(bt,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-700",children:C.faltaComponentes}),a.jsx("div",{className:"text-sm text-yellow-600",children:"Falta Componentes"})]})]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(bt,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-blue-700",children:C.atrasado}),a.jsx("div",{className:"text-sm text-blue-600",children:"Atrasado"})]})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Distribuição por Etapas"}),a.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-1 px-2 py-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:[a.jsx("span",{className:"text-xs",children:u?"Expandir":"Comprimir"}),u?a.jsx(Mp,{className:"w-4 h-4"}):a.jsx(zp,{className:"w-4 h-4"})]})]}),!u&&a.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-1",children:pr.map(p=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${w(p)} mb-1`,children:C.porEtapa[p]}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:p})]},p))})]})]}),a.jsx(Jp,{producoes:x,onUpdateFlags:o,onEdit:p=>c({isOpen:!0,producao:p}),onDelete:y,showActions:!0}),a.jsx(Yh,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1}),onSave:l.producao?m:h,producao:l.producao})]})},kx=({isOpen:t,onClose:e,onSave:r,title:n,value:s,color:i="#3B82F6",showColorPicker:o=!1})=>{const[l,c]=$.useState(s),[u,d]=$.useState(i);$.useEffect(()=>{t&&(c(s||""),d(i||"#3B82F6"))},[t,s,i]);const h=m=>{m.preventDefault(),l.trim()&&(r(l.trim(),o?u:void 0),e())};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(vt,{className:"w-5 h-5 text-blue-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n})]}),a.jsx("button",{onClick:e,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(St,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"}),a.jsx("input",{type:"text",value:l,onChange:m=>c(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,autoFocus:!0})]}),o&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"color",value:u,onChange:m=>d(m.target.value),className:"w-12 h-10 border border-gray-300 rounded-lg cursor-pointer"}),a.jsx("input",{type:"text",value:u,onChange:m=>d(m.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"#3B82F6"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ms,{className:"w-4 h-4"}),a.jsx("span",{children:"Guardar"})]})]})]})]})}):null},Nx=({isOpen:t,onClose:e,onSave:r,cliente:n})=>{const[s,i]=$.useState({nome:(n==null?void 0:n.nome)||"",marcas:(n==null?void 0:n.marcas)||[""]});$.useEffect(()=>{t&&n?i({nome:n.nome||"",marcas:n.marcas.length>0?n.marcas:[""]}):t&&!n&&i({nome:"",marcas:[""]})},[t,n]);const o=d=>{d.preventDefault();const h=s.marcas.filter(m=>m.trim()!=="");s.nome.trim()&&h.length>0&&(r({nome:s.nome.trim(),marcas:h}),e())},l=()=>{i(d=>({...d,marcas:[...d.marcas,""]}))},c=d=>{i(h=>({...h,marcas:h.marcas.filter((m,y)=>y!==d)}))},u=(d,h)=>{i(m=>({...m,marcas:m.marcas.map((y,w)=>w===d?h:y)}))};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(bo,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n?"Editar Cliente":"Novo Cliente"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(St,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Cliente"}),a.jsx("input",{type:"text",value:s.nome,onChange:d=>i(h=>({...h,nome:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,autoFocus:!0})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marcas"}),a.jsxs("button",{type:"button",onClick:l,className:"flex items-center space-x-1 px-2 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Adicionar"})]})]}),a.jsx("div",{className:"space-y-2",children:s.marcas.map((d,h)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:d,onChange:m=>u(h,m.target.value),placeholder:"Nome da marca",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:h===0}),s.marcas.length>1&&a.jsx("button",{type:"button",onClick:()=>c(h),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(Te,{className:"w-4 h-4"})})]},h))})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ms,{className:"w-4 h-4"}),a.jsxs("span",{children:[n?"Atualizar":"Criar"," Cliente"]})]})]})]})]})}):null},Sx=()=>{const[t,e]=$.useState("producoes"),{producoes:r,loading:n,createProducao:s,updateProducao:i,deleteProducao:o,updateFlags:l}=ys(),{clientes:c,loading:u,createCliente:d,updateCliente:h,deleteCliente:m}=Jh(),[y,w]=$.useState(pr),[j,C]=$.useState(os),[x,p]=$.useState("all"),[f,g]=$.useState("all"),[k,N]=$.useState(""),[b,S]=$.useState({isOpen:!1,type:"etapa"}),[L,D]=$.useState({isOpen:!1}),[H,xe]=$.useState({isOpen:!1}),[oe,_]=$.useState({isOpen:!1}),v=bf.useMemo(()=>r.filter(E=>{const F=x==="all"||E.etapa===x,Ue=f==="all"||E.estado===f,ht=k===""||E.marca.toLowerCase().includes(k.toLowerCase())||E.cliente.toLowerCase().includes(k.toLowerCase())||E.referenciaInterna.toLowerCase().includes(k.toLowerCase())||E.referenciaCliente.toLowerCase().includes(k.toLowerCase())||E.descricao.toLowerCase().includes(k.toLowerCase());return F&&Ue&&ht}).sort((E,F)=>new Date(F.dataInicio).getTime()-new Date(E.dataInicio).getTime()),[r,x,f,k]),T=async E=>{try{await s(E)}catch{alert("Erro ao criar produção")}},O=async E=>{try{await i(E.id,E)}catch{alert("Erro ao atualizar produção")}},A=async(E,F)=>{try{await l(E,F)}catch{alert("Erro ao atualizar flags")}},R=async E=>{if(confirm("Tem certeza que deseja remover esta produção?"))try{await o(E)}catch{alert("Erro ao remover produção")}},M=async E=>{if(oe.cliente)try{await h(oe.cliente.id,E)}catch{alert("Erro ao atualizar cliente")}else try{await d(E)}catch{alert("Erro ao criar cliente")}_({isOpen:!1})},X=async E=>{if(confirm("Tem certeza que deseja remover este cliente?"))try{await m(E)}catch{alert("Erro ao remover cliente")}},ie=E=>{b.type==="new"?w(F=>[...F,E]):b.index!==void 0&&w(F=>F.map((Ue,ht)=>ht===b.index?E:Ue)),S({isOpen:!1,type:"etapa"})},vr=E=>{b.type==="new"?C(F=>[...F,E]):b.index!==void 0&&C(F=>F.map((Ue,ht)=>ht===b.index?E:Ue)),S({isOpen:!1,type:"estado"})},st=(E,F)=>{if(confirm("Tem certeza que deseja remover este item?"))switch(E){case"etapa":w(Ue=>Ue.filter((ht,dn)=>dn!==F));break;case"estado":C(Ue=>Ue.filter((ht,dn)=>dn!==F));break}},un=E=>({Desenvolvimento:"bg-yellow-100 text-yellow-800","1º proto":"bg-orange-100 text-orange-800","2º proto":"bg-orange-100 text-orange-800","Size-Set":"bg-blue-100 text-blue-800",PPS:"bg-purple-100 text-purple-800",Produção:"bg-indigo-100 text-indigo-800",Pronto:"bg-green-100 text-green-800",Enviado:"bg-gray-100 text-gray-800"})[E],dt=E=>({Modelagem:"bg-yellow-100 text-yellow-700","Aguarda Componentes":"bg-orange-100 text-orange-700","FALTA COMPONENTES":"bg-red-100 text-red-700","Aguarda Malha":"bg-orange-100 text-orange-700","Com Defeito":"bg-red-100 text-red-700","Aguarda Comentários":"bg-amber-100 text-amber-700",Corte:"bg-blue-100 text-blue-700",Confecção:"bg-indigo-100 text-indigo-700",Transfers:"bg-purple-100 text-purple-700","Serviços Externos":"bg-teal-100 text-teal-700",Embalamento:"bg-green-100 text-green-700"})[E],wr=E=>E.variantes.reduce((F,Ue)=>F+Object.values(Ue.tamanhos).reduce((ht,dn)=>ht+dn,0),0),Xh=[{id:"producoes",label:"Produções",icon:Gt},{id:"clientes",label:"Clientes",icon:bo},{id:"etapas",label:"Etapas",icon:Ui},{id:"estados",label:"Estados",icon:qc}],Zh=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Produções"}),a.jsxs("button",{onClick:()=>D({isOpen:!0}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{children:"Nova Produção"})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Cl,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por marca, cliente, referência...",value:k,onChange:E=>N(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:x,onChange:E=>p(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"Todas as etapas"}),pr.map(E=>a.jsx("option",{value:E,children:E},E))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:f,onChange:E=>g(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"Todos os estados"}),os.map(E=>a.jsx("option",{value:E,children:E},E))]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca / Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrição"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Etapa"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entrega"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(E=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.referenciaInterna}),a.jsx("div",{className:"text-sm text-gray-500",children:E.referenciaCliente})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.marca}),a.jsx("div",{className:"text-sm text-gray-500",children:E.cliente})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:E.descricao,children:E.descricao}),a.jsxs("div",{className:"text-sm text-gray-500",children:[E.tipoPeca," • ",E.genero," • ",E.localProducao==="Interno"?"Interno":E.empresaExterna||"Externo"]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${un(E.etapa)}`,children:E.etapa})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${dt(E.estado)}`,children:E.estado})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[a.jsx("div",{className:"text-sm font-medium text-blue-600",children:wr(E)}),a.jsx("div",{className:"text-xs text-gray-500",children:"unidades"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:new Date(E.dataEstimadaEntrega).toLocaleDateString("pt-PT")}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Início: ",new Date(E.dataInicio).toLocaleDateString("pt-PT")]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[E.emProducao&&a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Em Produção"}),E.problemas&&a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Com Problemas"}),!E.emProducao&&!E.problemas&&a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:"Parado"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("button",{onClick:()=>xe({isOpen:!0,producao:E}),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Ver detalhes completos",children:a.jsx(tn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>D({isOpen:!0,producao:E}),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Editar produção",children:a.jsx(vt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>R(E.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remover produção",children:a.jsx(Te,{className:"w-4 h-4"})})]})})]},E.id))})]})}),v.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Gt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma produção encontrada"}),a.jsx("p",{className:"text-gray-500",children:k||x!=="all"||f!=="all"?"Tente ajustar os filtros de pesquisa":"Adicione uma nova produção para começar"})]})]})]}),ef=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Clientes e Marcas"}),a.jsxs("button",{onClick:()=>_({isOpen:!0}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{children:"Novo Cliente"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(E=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(bo,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:E.nome})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>_({isOpen:!0,cliente:E}),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:a.jsx(vt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>X(E.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(Te,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"Marcas"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:E.marcas.map(F=>a.jsx("span",{className:"inline-flex px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:F},F))})]})]},E.id))})]}),tf=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Etapas"}),a.jsxs("button",{onClick:()=>S({isOpen:!0,type:"new"}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{children:"Nova Etapa"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map((E,F)=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-bold",children:F+1}),a.jsx("span",{className:"font-medium text-gray-900",children:E})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>S({isOpen:!0,type:"etapa",item:E,index:F}),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:a.jsx(vt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>st("etapa",F),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(Te,{className:"w-4 h-4"})})]})]})},E))})]}),rf=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Estados"}),a.jsxs("button",{onClick:()=>S({isOpen:!0,type:"new"}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{children:"Novo Estado"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:j.map((E,F)=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(qc,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900 text-sm",children:E})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>S({isOpen:!0,type:"estado",item:E,index:F}),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:a.jsx(vt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>st("estado",F),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(Te,{className:"w-4 h-4"})})]})]})},E))})]});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Registos"}),a.jsx("p",{className:"text-gray-600",children:"Gestão completa de produções, clientes, etapas e estados"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:Xh.map(E=>{const F=E.icon;return a.jsxs("button",{onClick:()=>e(E.id),className:`
                    flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors
                    ${t===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[a.jsx(F,{className:"w-5 h-5"}),a.jsx("span",{children:E.label})]},E.id)})})}),a.jsxs("div",{className:"p-6",children:[t==="producoes"&&Zh(),t==="clientes"&&ef(),t==="etapas"&&tf(),t==="estados"&&rf()]})]}),a.jsx(kx,{isOpen:b.isOpen,onClose:()=>S({isOpen:!1,type:"etapa"}),onSave:t==="etapas"?ie:vr,title:b.type==="new"?`Nova ${t.slice(0,-1)}`:`Editar ${t.slice(0,-1)}`,value:b.item||"",showColorPicker:!1}),a.jsx(Yh,{isOpen:L.isOpen,onClose:()=>D({isOpen:!1}),onSave:L.producao?O:T,producao:L.producao}),a.jsx(Fi,{isOpen:H.isOpen,onClose:()=>xe({isOpen:!1}),producao:H.producao||null,onUpdateFlags:E=>{H.producao&&A(H.producao.id,E)}}),a.jsx(Nx,{isOpen:oe.isOpen,onClose:()=>_({isOpen:!1}),onSave:M,cliente:oe.cliente})]})},Ex=({isOpen:t,onClose:e,producaoRef:r,historico:n})=>{if(!t)return null;const s=l=>{switch(l){case"comentario":return a.jsx(as,{className:"w-4 h-4 text-blue-600"});case"upload_bom":return a.jsx(Sh,{className:"w-4 h-4 text-green-600"});case"remover_bom":return a.jsx(Mn,{className:"w-4 h-4 text-red-600"});case"marcar_completo":return a.jsx(Rn,{className:"w-4 h-4 text-green-600"});case"estado_alterado":return a.jsx(vt,{className:"w-4 h-4 text-purple-600"});default:return a.jsx(bt,{className:"w-4 h-4 text-gray-600"})}},i=l=>{switch(l){case"comentario":return"bg-blue-50 border-blue-200";case"upload_bom":return"bg-green-50 border-green-200";case"remover_bom":return"bg-red-50 border-red-200";case"marcar_completo":return"bg-green-50 border-green-200";case"estado_alterado":return"bg-purple-50 border-purple-200";default:return"bg-gray-50 border-gray-200"}},o=l=>new Date(l).toLocaleString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(bt,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Histórico de Componentes"}),a.jsx("p",{className:"text-sm text-gray-600",children:r})]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(St,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:n.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(bt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum histórico disponível"}),a.jsx("p",{className:"text-gray-500",children:"As ações relacionadas com componentes aparecerão aqui"})]}):a.jsx("div",{className:"space-y-4",children:n.map((l,c)=>a.jsx("div",{className:`border rounded-lg p-4 ${i(l.tipo)}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:s(l.tipo)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.descricao}),a.jsx("span",{className:"text-xs text-gray-500",children:o(l.timestamp)})]}),a.jsxs("p",{className:"text-xs text-gray-600",children:["Por: ",l.usuario]}),l.detalhes&&a.jsx("div",{className:"mt-2 p-2 bg-white rounded border border-gray-200",children:a.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:JSON.stringify(l.detalhes,null,2)})})]})]})},l.id))})}),a.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:a.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fechar"})})]})})},Cx=({isOpen:t,onClose:e,onSave:r,producao:n})=>{const[s,i]=$.useState([]),[o,l]=$.useState(""),[c,u]=$.useState([]),[d,h]=$.useState(null),[m,y]=$.useState(""),[w,j]=$.useState(null),[C,x]=$.useState(!1);$.useEffect(()=>{if(t&&n){const _=n.comments?[{id:"1",text:n.comments,files:n.bomFiles||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]:[];i(_),l(""),u([]),h(null),j(null)}},[t,n]);const p=_=>{if(!_)return;const v=Array.from(_).filter(T=>T.type==="application/pdf"||T.name.toLowerCase().endsWith(".pdf")||T.type.startsWith("image/")||T.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/));u(T=>[...T,...v])},f=_=>{_.preventDefault(),x(!1),p(_.dataTransfer.files)},g=_=>{_.preventDefault(),x(!0)},k=_=>{_.preventDefault(),x(!1)},N=_=>{u(v=>v.filter((T,O)=>O!==_))},b=()=>{if(!o.trim()&&c.length===0)return;const _={id:Date.now().toString(),text:o.trim(),files:c.map(v=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:v.name,url:`https://storage.example.com/comments/${v.name}`,uploadDate:new Date().toISOString()})),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};i(v=>[...v,_]),l(""),u([])},S=_=>{m.trim()&&(i(v=>v.map(T=>T.id===_?{...T,text:m.trim(),updatedAt:new Date().toISOString()}:T)),h(null),y(""))},L=_=>{confirm("Tem certeza que deseja remover este comentário?")&&i(v=>v.filter(T=>T.id!==_))},D=(_,v)=>{confirm("Tem certeza que deseja remover este ficheiro?")&&i(T=>T.map(O=>O.id===_?{...O,files:O.files.filter(A=>A.id!==v)}:O))},H=()=>{const _=s.map(v=>`[${new Date(v.createdAt).toLocaleString("pt-PT")}] ${v.text}`).join(`

`);s.flatMap(v=>v.files),r(_),e()},xe=_=>{if(_===0)return"0 Bytes";const v=1024,T=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(_)/Math.log(v));return parseFloat((_/Math.pow(v,O)).toFixed(2))+" "+T[O]},oe=_=>new Date(_).toLocaleString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return!t||!n?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(as,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Gestão de Comentários"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[n.referenciaInterna," - ",n.marca]})]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(St,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"flex flex-col h-[calc(90vh-120px)]",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[s.map(_=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("div",{className:"flex-1",children:d===_.id?a.jsxs("div",{className:"space-y-2",children:[a.jsx("textarea",{value:m,onChange:v=>y(v.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",autoFocus:!0}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>S(_.id),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Guardar"}),a.jsx("button",{onClick:()=>{h(null),y("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):a.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:_.text})}),d!==_.id&&a.jsxs("div",{className:"flex space-x-1 ml-4",children:[a.jsx("button",{onClick:()=>{h(_.id),y(_.text)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar comentário",children:a.jsx(vt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>L(_.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remover comentário",children:a.jsx(Te,{className:"w-4 h-4"})})]})]}),_.files.length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Ficheiros Anexos"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:_.files.map(v=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[a.jsx(Mn,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-900 truncate",children:v.name})]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>j(v),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Pré-visualizar",children:a.jsx(tn,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>D(_.id,v.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remover ficheiro",children:a.jsx(Te,{className:"w-3 h-3"})})]})]},v.id))})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Criado: ",oe(_.createdAt),_.updatedAt!==_.createdAt&&a.jsxs("span",{children:[" • Editado: ",oe(_.updatedAt)]})]})]},_.id)),s.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(as,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum comentário"}),a.jsx("p",{className:"text-gray-500",children:"Adicione o primeiro comentário sobre os componentes"})]})]}),a.jsxs("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Adicionar Novo Comentário"}),a.jsx("div",{className:"mb-4",children:a.jsx("textarea",{value:o,onChange:_=>l(_.target.value),rows:3,placeholder:"Adicione comentários sobre componentes, fornecedores, prazos...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})}),a.jsxs("div",{onDrop:f,onDragOver:g,onDragLeave:k,className:`
                border-2 border-dashed rounded-lg p-4 text-center transition-colors mb-4
                ${C?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}
              `,children:[a.jsx(Sh,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Arraste ficheiros aqui ou"}),a.jsxs("label",{className:"inline-flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer text-sm",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{children:"Selecionar Ficheiros"}),a.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.gif,application/pdf,image/*",onChange:_=>p(_.target.files),className:"hidden"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG, GIF"})]}),c.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Ficheiros Selecionados (",c.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:c.map((_,v)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[a.jsx(Mn,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_.name}),a.jsx("p",{className:"text-xs text-gray-500",children:xe(_.size)})]})]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>j(_),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Pré-visualizar",children:a.jsx(tn,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>N(v),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remover",children:a.jsx(Te,{className:"w-3 h-3"})})]})]},v))})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:[o.length," caracteres"]}),a.jsxs("button",{onClick:b,disabled:!o.trim()&&c.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(et,{className:"w-4 h-4"}),a.jsx("span",{children:"Adicionar Comentário"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-white",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:H,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ms,{className:"w-4 h-4"}),a.jsx("span",{children:"Guardar Todos os Comentários"})]})]})]}),w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-60 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pré-visualização: ",w.name]}),a.jsx("button",{onClick:()=>j(null),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(St,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 h-96 flex items-center justify-center bg-gray-50",children:w.name.toLowerCase().endsWith(".pdf")?a.jsx("div",{className:"w-full h-full",children:a.jsx("iframe",{src:`data:application/pdf;base64,${btoa("PDF preview not available in demo")}`,className:"w-full h-full border-0",title:`Preview of ${w.name}`})}):w.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)?a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx("img",{src:"url"in w?w.url:URL.createObjectURL(w),alt:w.name,className:"max-w-full max-h-full object-contain"})}):a.jsxs("div",{className:"text-center",children:[a.jsx(Mn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"Pré-visualização de ficheiro"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[w.name,"size"in w&&` (${xe(w.size)})`]}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Tipo de ficheiro não suportado para pré-visualização"})]})})]})})]})})},Px=()=>{var N;const{producoes:t,loading:e,error:r,updateProducao:n,updateFlags:s,updateComments:i}=ys(),[o,l]=$.useState({isOpen:!1,producao:null}),[c,u]=$.useState({isOpen:!1,producao:null}),[d,h]=$.useState({isOpen:!1,producao:null}),{producoesPendentes:m,producoesCompletas:y}=$.useMemo(()=>{const b=t.filter(L=>L.estado==="Aguarda Componentes"||L.estado==="FALTA COMPONENTES"||L.etapa==="Desenvolvimento"&&L.estado==="Modelagem"||!L.comments||L.comments.trim()===""),S=t.filter(L=>(L.estado==="Corte"||L.estado==="Confecção"||L.estado==="Transfers"||L.estado==="Serviços Externos"||L.estado==="Embalamento"||L.etapa==="Pronto"||L.etapa==="Enviado")&&L.estado!=="FALTA COMPONENTES"&&L.comments&&L.comments.trim()!=="");return{producoesPendentes:b,producoesCompletas:S}},[t]),w=$.useMemo(()=>{const b=m.length,S=m.filter(D=>D.estado==="Aguarda Componentes").length,L=y.length;return{totalPendentes:b,aguardaComponentes:S,completos:L}},[m,y]),j=async b=>{if(confirm(`Marcar componentes como completos para "${b.referenciaInterna}"?`))try{const S={...b,estado:"Corte",problemas:!1};await n(b.id,S),p(b.id,"marcar_completo",'Componentes marcados como completos - Estado alterado para "Corte"'),alert('Componentes marcados como completos! Estado alterado para "Corte".')}catch{alert("Erro ao marcar componentes como completos")}},C=async(b,S,L)=>{try{await i(b,S),L&&L.length>0,p(b,"comentario","Comentários atualizados",{comments:S}),h({isOpen:!1,producao:null})}catch{alert("Erro ao atualizar comentários")}},x=async b=>{const S=prompt("Para eliminar este registo, introduza a senha:");if(S==="lomartex.24"){if(confirm("Tem certeza que deseja eliminar permanentemente este registo?"))try{alert("Registo movido para o histórico de eliminados.")}catch{alert("Erro ao eliminar registo")}}else S!==null&&alert("Senha incorreta")},p=(b,S,L,D)=>{const H={id:Date.now().toString(),producaoId:b,tipo:S,descricao:L,usuario:"Utilizador Atual",timestamp:new Date().toISOString(),detalhes:D};console.log("Histórico adicionado:",H)},f=b=>[{id:"1",producaoId:b,tipo:"comentario",descricao:"Comentários iniciais sobre componentes",usuario:"João Silva",timestamp:"2025-01-28T10:30:00Z"},{id:"2",producaoId:b,tipo:"upload_bom",descricao:"Upload de 2 ficheiro(s) anexo(s)",usuario:"Maria Santos",timestamp:"2025-01-28T14:15:00Z",detalhes:{files:["Especificacoes.pdf","Lista_Componentes.xlsx"]}}],g=b=>b.variantes.reduce((S,L)=>S+Object.values(L.tamanhos).reduce((D,H)=>D+H,0),0),k=b=>{const S=new Date,D=new Date(b).getTime()-S.getTime(),H=Math.ceil(D/(1e3*60*60*24));return H<=3&&H>=0};return e?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-orange-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Carregando dados..."})]})}):r?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Nn,{className:"w-6 h-6 text-red-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),a.jsx("p",{className:"text-red-700",children:r})]})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Nn,{className:"w-8 h-8 text-orange-600"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Preparar Componentes"}),a.jsx("p",{className:"text-gray-600",children:"Gestão de componentes e comentários para produções"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Nn,{className:"w-6 h-6 text-orange-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-700",children:w.totalPendentes}),a.jsx("div",{className:"text-sm text-orange-600",children:"Total Pendentes"})]})]})}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(bt,{className:"w-6 h-6 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:w.aguardaComponentes}),a.jsx("div",{className:"text-sm text-yellow-600",children:"Aguarda Componentes"})]})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Rn,{className:"w-6 h-6 text-green-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-700",children:w.completos}),a.jsx("div",{className:"text-sm text-green-600",children:"Completos"})]})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Produções Pendentes"}),a.jsx("p",{className:"text-gray-600",children:"Componentes que necessitam de atenção"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca / Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entrega"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(b=>a.jsxs("tr",{className:`hover:bg-gray-50 ${b.estado==="FALTA COMPONENTES"?"bg-red-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.referenciaInterna}),a.jsx("div",{className:"text-sm text-gray-500",children:b.referenciaCliente})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.marca}),a.jsx("div",{className:"text-sm text-gray-500",children:b.cliente})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b.estado==="FALTA COMPONENTES"?"bg-red-100 text-red-800":b.estado==="Aguarda Componentes"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:b.estado})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[a.jsx("div",{className:"text-sm font-medium text-blue-600",children:g(b)}),a.jsx("div",{className:"text-xs text-gray-500",children:"unidades"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:`text-sm font-medium ${k(b.dataEstimadaEntrega)?"text-red-600":"text-gray-900"}`,children:new Date(b.dataEstimadaEntrega).toLocaleDateString("pt-PT")}),a.jsx("div",{className:"text-xs text-gray-500",children:b.etapa})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsxs("button",{onClick:()=>j(b),className:"flex items-center space-x-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",title:"Marcar componentes como completos",children:[a.jsx(Rn,{className:"w-4 h-4"}),a.jsx("span",{children:"Marcar Completo"})]}),a.jsxs("button",{onClick:()=>h({isOpen:!0,producao:b}),className:`flex items-center space-x-1 px-3 py-2 rounded-lg transition-colors text-sm font-medium ${b.comments?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Gerir comentários e ficheiros",children:[a.jsx(as,{className:"w-4 h-4"}),a.jsx("span",{children:"Comentários"}),b.comments&&a.jsx("span",{className:"bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:"●"})]})]})})]},b.id))})]})}),m.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma produção pendente"}),a.jsx("p",{className:"text-gray-500",children:"Todas as produções têm os componentes preparados"})]})]}),y.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Componentes Completos"}),a.jsx("p",{className:"text-gray-600",children:"Produções com componentes já preparados"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca / Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado Atual"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(b=>a.jsxs("tr",{className:"hover:bg-gray-50 opacity-50 bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Rn,{className:"w-4 h-4 text-green-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:b.referenciaInterna}),a.jsx("div",{className:"text-sm text-gray-400",children:b.referenciaCliente})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:b.marca}),a.jsx("div",{className:"text-sm text-gray-400",children:b.cliente})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:b.estado})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:g(b)}),a.jsx("div",{className:"text-xs text-gray-400",children:"unidades"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("button",{onClick:()=>l({isOpen:!0,producao:b}),className:"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",title:"Ver registo completo",children:a.jsx(tn,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>u({isOpen:!0,producao:b}),className:"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",title:"Ver histórico",children:a.jsx(bt,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>h({isOpen:!0,producao:b}),className:"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",title:"Ver comentários",children:a.jsx(as,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>x(b.id),className:"p-1 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Eliminar registo",children:a.jsx(Te,{className:"w-3 h-3"})})]})})]},b.id))})]})})]}),a.jsx(Cx,{isOpen:d.isOpen,onClose:()=>h({isOpen:!1,producao:null}),onSave:b=>{d.producao&&C(d.producao.id,b)},producao:d.producao}),a.jsx(Fi,{isOpen:o.isOpen,onClose:()=>l({isOpen:!1,producao:null}),producao:o.producao,onUpdateFlags:b=>{o.producao&&s(o.producao.id,b)}}),a.jsx(Ex,{isOpen:c.isOpen,onClose:()=>u({isOpen:!1,producao:null}),producaoRef:((N=c.producao)==null?void 0:N.referenciaInterna)||"",historico:c.producao?f(c.producao.id):[]})]})},Tx=({isOpen:t,onClose:e,onSave:r,producao:n})=>{const[s,i]=$.useState({dataInicio:"",dataEstimadaEntrega:""});$.useEffect(()=>{t&&n&&i({dataInicio:n.dataInicio,dataEstimadaEntrega:n.dataEstimadaEntrega})},[t,n]);const o=l=>{l.preventDefault(),n&&s.dataInicio&&s.dataEstimadaEntrega&&r(n,s)};return!t||!n?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Dn,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar Datas"}),a.jsx("p",{className:"text-sm text-gray-600",children:n.referenciaInterna})]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(St,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Início"}),a.jsx("input",{type:"date",value:s.dataInicio,onChange:l=>i(c=>({...c,dataInicio:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Estimada de Entrega"}),a.jsx("input",{type:"date",value:s.dataEstimadaEntrega,onChange:l=>i(c=>({...c,dataEstimadaEntrega:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Valores Atuais"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:["Início: ",new Date(n.dataInicio).toLocaleDateString("pt-PT")]}),a.jsxs("p",{children:["Entrega: ",new Date(n.dataEstimadaEntrega).toLocaleDateString("pt-PT")]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ms,{className:"w-4 h-4"}),a.jsx("span",{children:"Guardar"})]})]})]})]})})},Ox=()=>{const{producoes:t,loading:e,error:r,updateProducao:n}=ys(),[s,i]=$.useState(1),[o,l]=$.useState(0),[c,u]=$.useState("day"),d=$.useRef(null),[h,m]=$.useState({isOpen:!1,producao:null}),y=$.useMemo(()=>{const _=t.flatMap(O=>[new Date(O.dataInicio),new Date(O.dataPrevisao),new Date(O.dataEstimadaEntrega)]),v=new Date(Math.min(..._.map(O=>O.getTime()))),T=new Date(Math.max(..._.map(O=>O.getTime())));return v.setDate(v.getDate()-7),T.setDate(T.getDate()+7),{minDate:v,maxDate:T}},[t]),w=$.useMemo(()=>{const _=[],v=new Date(y.minDate),T=c==="day"?1:c==="week"?7:30;for(;v<=y.maxDate;)_.push(new Date(v)),v.setDate(v.getDate()+T);return _},[y]),j=c==="day"?30*s:c==="week"?120*s:200*s,C=w.length*j,x=_=>_.variantes.reduce((v,T)=>v+Object.values(T.tamanhos).reduce((O,A)=>O+A,0),0),p=_=>c==="day"?Math.floor((_.getTime()-y.minDate.getTime())/864e5)*(30*s):c==="week"?Math.floor((_.getTime()-y.minDate.getTime())/6048e5)*(120*s):Math.floor((_.getTime()-y.minDate.getTime())/2592e6)*(200*s),f=(_,v)=>{if(c==="day"){const T=Math.floor((v.getTime()-_.getTime())/864e5);return Math.max(T*(30*s),30*s)}else if(c==="week"){const T=Math.floor((v.getTime()-_.getTime())/6048e5);return Math.max(T*(120*s),120*s)}else{const T=Math.floor((v.getTime()-_.getTime())/2592e6);return Math.max(T*(200*s),200*s)}},g=_=>{if(_.estado==="FALTA COMPONENTES")return"bg-red-500";if(_.problemas)return"bg-orange-500";if(_.emProducao)return"bg-green-500";switch(_.etapa){case"Desenvolvimento":return"bg-yellow-500";case"1º proto":return"bg-orange-400";case"2º proto":return"bg-orange-500";case"Size-Set":return"bg-blue-500";case"PPS":return"bg-purple-500";case"Produção":return"bg-indigo-500";case"Pronto":return"bg-green-600";case"Enviado":return"bg-gray-500";default:return"bg-gray-400"}},k=_=>{const v=new Date;return _.toDateString()===v.toDateString()},N=_=>{const v=_.getDay();return v===0||v===6},b=_=>{if(c==="day")return _.toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit"});if(c==="week"){const v=new Date(_);return v.setDate(v.getDate()+6),`${_.getDate()}/${_.getMonth()+1} - ${v.getDate()}/${v.getMonth()+1}`}else return _.toLocaleDateString("pt-PT",{month:"short",year:"2-digit"})},S=_=>_.toLocaleDateString("pt-PT",{month:"long",year:"numeric"}),L=$.useMemo(()=>{const _=[];let v="",T=0,O=0;return w.forEach((A,R)=>{const M=S(A);M!==v?(v&&_.push({month:v,startIndex:T,days:O}),v=M,T=R,O=1):O++}),v&&_.push({month:v,startIndex:T,days:O}),_},[w]),D=()=>{i(_=>Math.min(_*1.2,3))},H=()=>{i(_=>Math.max(_/1.2,.3))},xe=()=>{i(1),l(0),d.current&&(d.current.scrollLeft=0)};$.useEffect(()=>{d.current&&(d.current.scrollLeft=o)},[s]);const oe=async(_,v)=>{try{const T={..._,dataInicio:v.dataInicio,dataEstimadaEntrega:v.dataEstimadaEntrega};await n(_.id,T),m({isOpen:!1,producao:null})}catch{alert("Erro ao atualizar datas")}};return e?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Carregando gráfico de Gantt..."})]})}):r?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Dn,{className:"w-6 h-6 text-red-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),a.jsx("p",{className:"text-red-700",children:r})]})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Dn,{className:"w-8 h-8 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Planeamento"}),a.jsx("p",{className:"text-gray-600",children:"Timeline visual e planeamento das produções"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>u("day"),className:`flex items-center space-x-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="day"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsx("span",{children:"Dia"})]}),a.jsxs("button",{onClick:()=>u("week"),className:`flex items-center space-x-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="week"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[a.jsx(Dp,{className:"w-4 h-4"}),a.jsx("span",{children:"Semana"})]}),a.jsxs("button",{onClick:()=>u("month"),className:`flex items-center space-x-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="month"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[a.jsx(Rp,{className:"w-4 h-4"}),a.jsx("span",{children:"Mês"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:H,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Zoom Out",children:a.jsx(Hp,{className:"w-5 h-5"})}),a.jsxs("span",{className:"text-sm text-gray-600 min-w-[60px] text-center",children:[Math.round(s*100),"%"]}),a.jsx("button",{onClick:D,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Zoom In",children:a.jsx(Wp,{className:"w-5 h-5"})}),a.jsx("button",{onClick:xe,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Reset Zoom",children:a.jsx(kh,{className:"w-5 h-5"})})]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"w-80 flex-shrink-0 border-r border-gray-200 bg-gray-50",children:a.jsxs("div",{className:"grid grid-cols-4 h-12 text-xs font-medium text-gray-700",children:[a.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:"Ref. Interna"}),a.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:"Quantidade"}),a.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:"Datas"}),a.jsx("div",{className:"flex items-center px-3",children:"Local"})]})}),a.jsx("div",{className:"flex-1",children:a.jsx("div",{ref:d,className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 max-h-[600px]",onScroll:_=>l(_.currentTarget.scrollLeft),children:a.jsxs("div",{style:{width:C},children:[a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-100 h-8",children:L.map((_,v)=>a.jsx("div",{className:"flex items-center justify-center text-xs font-semibold text-gray-700 border-r border-gray-300",style:{width:_.days*j},children:_.month},v))}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50 h-8",children:w.map((_,v)=>a.jsx("div",{className:`
                          flex items-center justify-center text-xs border-r border-gray-200
                          ${k(_)?"bg-blue-100 text-blue-800 font-bold":""}
                          ${N(_)?"bg-gray-100 text-gray-500":"text-gray-600"}
                        `,style:{width:j},children:b(_)},v))})]})})})]})}),a.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:t.map((_,v)=>a.jsxs("div",{className:"flex border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("div",{className:"w-80 flex-shrink-0 border-r border-gray-200 bg-white",children:a.jsxs("div",{className:"grid grid-cols-4 h-16 text-xs",children:[a.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:_.referenciaInterna}),a.jsx("div",{className:"text-gray-500",children:_.marca})]})}),a.jsx("div",{className:"flex items-center justify-center px-3 border-r border-gray-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-blue-600",children:x(_)}),a.jsx("div",{className:"text-gray-500",children:"unidades"})]})}),a.jsx("div",{className:"flex items-center px-3 border-r border-gray-200",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:new Date(_.dataInicio).toLocaleDateString("pt-PT")}),a.jsx("div",{className:"text-red-600 font-medium",children:new Date(_.dataEstimadaEntrega).toLocaleDateString("pt-PT")})]})}),a.jsx("div",{className:"flex items-center px-3",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[_.localProducao==="Interno"?a.jsx(Ui,{className:"w-3 h-3 text-blue-600"}):a.jsx(El,{className:"w-3 h-3 text-orange-600"}),a.jsx("span",{className:"text-gray-700",children:_.localProducao==="Interno"?"Interno":_.empresaExterna||"Externo"})]})})]})}),a.jsx("div",{className:"flex-1 relative",children:a.jsx("div",{className:"overflow-x-auto h-16 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",style:{scrollLeft:o},children:a.jsxs("div",{className:"relative h-16",style:{width:C},children:[w.map((T,O)=>a.jsx("div",{className:`
                          absolute top-0 bottom-0 border-r border-gray-100
                          ${k(T)?"bg-blue-50":""}
                          ${N(T)?"bg-gray-50":""}
                        `,style:{left:O*j,width:j}},O)),w.some(T=>k(T))&&a.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-20",style:{left:p(new Date)+j/2}}),a.jsx("div",{className:`
                        absolute top-2 bottom-2 rounded-md shadow-sm z-10 flex items-center px-2 cursor-pointer
                        ${g(_)} opacity-80 hover:opacity-100 transition-opacity
                      `,style:{left:p(new Date(_.dataInicio)),width:f(new Date(_.dataInicio),new Date(_.dataEstimadaEntrega))},title:`${_.referenciaInterna} - ${_.etapa} - ${_.estado}`,onClick:()=>m({isOpen:!0,producao:_}),children:a.jsxs("div",{className:"text-white text-xs font-medium truncate flex items-center space-x-1",children:[_.etapa,a.jsx(vt,{className:"w-3 h-3 opacity-70"})]})})]})})})]},_.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Legenda"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3 text-xs",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-yellow-500 rounded"}),a.jsx("span",{children:"Desenvolvimento"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-orange-400 rounded"}),a.jsx("span",{children:"1º Proto"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-orange-500 rounded"}),a.jsx("span",{children:"2º Proto"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-blue-500 rounded"}),a.jsx("span",{children:"Size-Set"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-purple-500 rounded"}),a.jsx("span",{children:"PPS"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-indigo-500 rounded"}),a.jsx("span",{children:"Produção"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-green-600 rounded"}),a.jsx("span",{children:"Pronto"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-gray-500 rounded"}),a.jsx("span",{children:"Enviado"})]})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-xs",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-red-500 rounded"}),a.jsx("span",{children:"Falta Componentes"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-orange-500 rounded"}),a.jsx("span",{children:"Com Problemas"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-3 bg-green-500 rounded"}),a.jsx("span",{children:"Em Produção"})]})]})})]}),a.jsx(Tx,{isOpen:h.isOpen,onClose:()=>m({isOpen:!1,producao:null}),onSave:oe,producao:h.producao})]})},Ax=()=>{const{producoes:t,loading:e,error:r,deleteProducao:n}=ys(),[s,i]=$.useState("all"),[o,l]=$.useState("all"),[c,u]=$.useState(""),[d,h]=$.useState({isOpen:!1,producao:null}),m=$.useMemo(()=>t.filter(f=>f.etapa==="Pronto"||f.etapa==="Enviado"||f.estado==="Embalamento"),[t]),y=$.useMemo(()=>m.filter(f=>{const g=s==="all"||f.etapa===s,k=o==="all"||f.estado===o,N=c===""||f.marca.toLowerCase().includes(c.toLowerCase())||f.cliente.toLowerCase().includes(c.toLowerCase())||f.referenciaInterna.toLowerCase().includes(c.toLowerCase())||f.referenciaCliente.toLowerCase().includes(c.toLowerCase())||f.descricao.toLowerCase().includes(c.toLowerCase());return g&&k&&N}).sort((f,g)=>new Date(g.dataInicio).getTime()-new Date(f.dataInicio).getTime()),[m,s,o,c]),w=async f=>{const g=prompt("Para eliminar permanentemente este registo, introduza a senha:");if(g==="lomartex.24"){if(confirm("ATENÇÃO: Esta ação irá eliminar permanentemente o registo. Esta ação não pode ser desfeita. Continuar?"))try{await n(f),alert("Registo eliminado permanentemente.")}catch{alert("Erro ao eliminar registo")}}else g!==null&&alert("Senha incorreta")},j=async f=>{if(confirm(`Restaurar "${f.referenciaInterna}" para a lista ativa?`))try{alert("Funcionalidade de restauro será implementada na versão completa")}catch{alert("Erro ao restaurar registo")}},C=f=>f.variantes.reduce((g,k)=>g+Object.values(k.tamanhos).reduce((N,b)=>N+b,0),0),x=f=>({Desenvolvimento:"bg-yellow-100 text-yellow-800","1º proto":"bg-orange-100 text-orange-800","2º proto":"bg-orange-100 text-orange-800","Size-Set":"bg-blue-100 text-blue-800",PPS:"bg-purple-100 text-purple-800",Produção:"bg-indigo-100 text-indigo-800",Pronto:"bg-green-100 text-green-800",Enviado:"bg-gray-100 text-gray-800"})[f],p=f=>({Modelagem:"bg-yellow-100 text-yellow-700","Aguarda Componentes":"bg-orange-100 text-orange-700","FALTA COMPONENTES":"bg-red-100 text-red-700","Aguarda Malha":"bg-orange-100 text-orange-700","Com Defeito":"bg-red-100 text-red-700","Aguarda Comentários":"bg-amber-100 text-amber-700",Corte:"bg-blue-100 text-blue-700",Confecção:"bg-indigo-100 text-indigo-700",Transfers:"bg-purple-100 text-purple-700","Serviços Externos":"bg-teal-100 text-teal-700",Embalamento:"bg-green-100 text-green-700"})[f];return e?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Carregando histórico..."})]})}):r?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Er,{className:"w-6 h-6 text-red-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Erro ao carregar dados"}),a.jsx("p",{className:"text-red-700",children:r})]})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Er,{className:"w-8 h-8 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Histórico"}),a.jsx("p",{className:"text-gray-600",children:"Produções completas, enviadas e eliminadas"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Er,{className:"w-6 h-6 text-green-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-700",children:m.length}),a.jsx("div",{className:"text-sm text-green-600",children:"Total no Histórico"})]})]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Rn,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-700",children:m.filter(f=>f.etapa==="Pronto").length}),a.jsx("div",{className:"text-sm text-blue-600",children:"Prontas"})]})]})}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Er,{className:"w-6 h-6 text-gray-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-700",children:m.filter(f=>f.etapa==="Enviado").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Enviadas"})]})]})})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Cl,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por marca, cliente, referência...",value:c,onChange:f=>u(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"Todas as etapas"}),pr.map(f=>a.jsx("option",{value:f,children:f},f))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:o,onChange:f=>l(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"Todos os estados"}),os.map(f=>a.jsx("option",{value:f,children:f},f))]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Registos Históricos"}),a.jsx("p",{className:"text-gray-600",children:"Produções completas e enviadas"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca / Cliente"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Etapa"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Entrega"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(f=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.referenciaInterna}),a.jsx("div",{className:"text-sm text-gray-500",children:f.referenciaCliente})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.marca}),a.jsx("div",{className:"text-sm text-gray-500",children:f.cliente})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x(f.etapa)}`,children:f.etapa})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(f.estado)}`,children:f.estado})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[a.jsx("div",{className:"text-sm font-medium text-blue-600",children:C(f)}),a.jsx("div",{className:"text-xs text-gray-500",children:"unidades"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:new Date(f.dataEstimadaEntrega).toLocaleDateString("pt-PT")}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Início: ",new Date(f.dataInicio).toLocaleDateString("pt-PT")]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("button",{onClick:()=>h({isOpen:!0,producao:f}),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Ver detalhes",children:a.jsx(tn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>j(f),className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Restaurar para lista ativa",children:a.jsx(kh,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>w(f.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Eliminar permanentemente (requer senha)",children:a.jsx(Te,{className:"w-4 h-4"})})]})})]},f.id))})]})}),y.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Er,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum registo no histórico"}),a.jsx("p",{className:"text-gray-500",children:c||s!=="all"||o!=="all"?"Tente ajustar os filtros de pesquisa":"Registos completos e enviados aparecerão aqui"})]})]}),a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(is,{className:"w-5 h-5 text-amber-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-amber-900 mb-1",children:"Informação Importante"}),a.jsx("p",{className:"text-sm text-amber-800",children:'A eliminação permanente de registos requer a senha "lomartex.24" e não pode ser desfeita. Use esta funcionalidade com cuidado.'})]})]})}),a.jsx(Fi,{isOpen:d.isOpen,onClose:()=>h({isOpen:!1,producao:null}),producao:d.producao})]})},$x=()=>{const t=[{id:"conversor",title:"Conversor KG/MT",description:"Ferramenta para conversão entre quilogramas e metros",url:"https://luminous-blancmange-b169da.netlify.app/",icon:Lp,color:"bg-blue-500"},{id:"etiquetas",title:"Impressão de Etiquetas",description:"Sistema para impressão de etiquetas de produção",url:"https://dapper-banoffee-6c581f.netlify.app/",icon:_h,color:"bg-green-500"},{id:"packing",title:"Packing List",description:"Gestão de listas de embalamento e expedição",url:"https://loquacious-tanuki-038afc.netlify.app/",icon:Gt,color:"bg-purple-500"}],e=r=>{window.open(r,"_blank","noopener,noreferrer")};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(jh,{className:"w-8 h-8 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Apps Lomartex"}),a.jsx("p",{className:"text-gray-600",children:"Ferramentas auxiliares para produção e gestão"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>{const n=r.icon;return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(r.url),children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:`w-12 h-12 ${r.color} rounded-lg flex items-center justify-center`,children:a.jsx(n,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.title}),a.jsx("p",{className:"text-sm text-gray-600",children:r.description})]}),a.jsx(wo,{className:"w-5 h-5 text-gray-400"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Clique para abrir"}),a.jsxs("button",{onClick:s=>{s.stopPropagation(),e(r.url)},className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx("span",{children:"Abrir App"}),a.jsx(wo,{className:"w-4 h-4"})]})]})]},r.id)})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Sobre as Aplicações"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Conversor KG/MT:"})," Converte facilmente entre quilogramas e metros para diferentes tipos de tecidos"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Impressão de Etiquetas:"})," Gera e imprime etiquetas personalizadas para identificação de produtos"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Packing List:"})," Cria listas detalhadas de embalamento para expedição e controlo de stock"]})]}),a.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:a.jsxs("p",{className:"text-xs text-blue-700",children:[a.jsx("strong",{children:"Nota:"})," Estas aplicações abrem em novas janelas/separadores do navegador."]})})]})]})},Ix=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Nh,{className:"w-8 h-8 text-green-600"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Controlo de Qualidade"}),a.jsx("p",{className:"text-gray-600",children:"Sistema de gestão e controlo de qualidade"})]})]})}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx(qp,{className:"w-16 h-16 text-yellow-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-yellow-900 mb-2",children:"EM DESENVOLVIMENTO"}),a.jsx("p",{className:"text-yellow-800 text-lg",children:"Esta funcionalidade está atualmente em desenvolvimento e estará disponível em breve."})]})})]});function Lx(){const[t,e]=$.useState("producoes"),r=()=>{switch(t){case"producoes":return a.jsx(lu,{});case"preparar-componentes":return a.jsx(Px,{});case"gantt":return a.jsx(Ox,{});case"registos":return a.jsx(Sx,{});case"historico":return a.jsx(Ax,{});case"apps-lomartex":return a.jsx($x,{});case"controlo-qualidade":return a.jsx(Ix,{});default:return a.jsx(lu,{})}};return a.jsx(Gp,{currentPage:t,onPageChange:e,children:r()})}bh(document.getElementById("root")).render(a.jsx($.StrictMode,{children:a.jsx(Lx,{})}));
